(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae28d440","chunk-07fe189f"],{"1f82":function(e,t,a){"use strict";t["a"]={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter(){let e=this.$parent;while(e&&"ElRow"!==e.$options.componentName)e=e.$parent;return e?e.gutter:0}},render(e){let t=[],a={};return this.gutter&&(a.paddingLeft=this.gutter/2+"px",a.paddingRight=a.paddingLeft),["span","offset","pull","push"].forEach(e=>{(this[e]||0===this[e])&&t.push("span"!==e?`el-col-${e}-${this[e]}`:"el-col-"+this[e])}),["xs","sm","md","lg","xl"].forEach(e=>{if("number"===typeof this[e])t.push(`el-col-${e}-${this[e]}`);else if("object"===typeof this[e]){let a=this[e];Object.keys(a).forEach(s=>{t.push("span"!==s?`el-col-${e}-${s}-${a[s]}`:`el-col-${e}-${a[s]}`)})}}),e(this.tag,{class:["el-col",t],style:a},this.$slots.default)}}},"34cd":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o}));var s=a("0d5e");function i(e){return Object(s["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function n(e){return Object(s["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function r(e){return Object(s["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function o(e){return Object(s["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"delete",data:e})}},4744:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"h",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"a",(function(){return d}));var s=a("0d5e");function i(e){return Object(s["a"])({url:"mindmaplog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function n(e){return Object(s["a"])({url:"mylog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function r(e){return Object(s["a"])({url:"alllog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(s["a"])({url:"dynamicsalog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function l(e){return Object(s["a"])({url:"statistics/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function c(e){return Object(s["a"])({url:"allstatistics/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function u(e){return Object(s["a"])({url:"mycase/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function d(e){return Object(s["a"])({url:"allcase/?token="+sessionStorage.getItem("token"),method:"get",params:e})}},"6a66":function(e,t,a){"use strict";var s=a("2b0e");t["a"]=new s["default"]},"6a87":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tree-expand"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.DATA.isEdit,expression:"DATA.isEdit"}],staticClass:"tree-label"},[t("el-input",{ref:"treeInput"+e.DATA.id,staticClass:"edit",attrs:{size:"mini",autofocus:window.externalPublicPath},on:{blur:function(t){return t.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE)}},nativeOn:{click:function(t){return t.stopPropagation(),e.nodeEditFocus.apply(null,arguments)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE))}},model:{value:e.DATA.name,callback:function(t){e.$set(e.DATA,"name",t)},expression:"DATA.name"}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],class:[e.DATA.id>e.maxexpandId?"tree-new tree-label":"tree-label"]},[t("span",[e._v(e._s(e.DATA.name))])]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],staticClass:"tree-btn"},[t("i",{staticClass:"el-icon-plus",on:{click:function(t){return t.stopPropagation(),e.nodeAdd(e.STORE,e.DATA,e.NODE)}}}),t("i",{staticClass:"el-icon-edit",on:{click:function(t){return t.stopPropagation(),e.nodeEdit(e.STORE,e.DATA,e.NODE)}}}),t("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.nodeDel(e.STORE,e.DATA,e.NODE)}}})])])},i=[],n={name:"treeExpand",props:["NODE","DATA","STORE","maxexpandId"],methods:{nodeAdd(e,t,a){this.$emit("nodeAdd",e,t,a)},nodeEdit(e,t,a){t.isEdit=!0,this.$nextTick(()=>{this.$refs["treeInput"+t.id].$refs.input.focus()}),this.$emit("nodeEdit",e,t,a)},nodeDel(e,t,a){this.$emit("nodeDel",e,t,a)},nodeEditPass(e,t,a){t.isEdit=!1},nodeEditFocus(){}}},r=n,o=(a("7a58"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,null,null);t["a"]=l.exports},"7a58":function(e,t,a){"use strict";a("9598")},"7dd3":function(e,t,a){"use strict";a("bc45")},"7fbf":function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"n",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"i",(function(){return l})),a.d(t,"m",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"o",(function(){return h})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return g})),a.d(t,"l",(function(){return f})),a.d(t,"k",(function(){return b})),a.d(t,"p",(function(){return w})),a.d(t,"b",(function(){return _}));var s=a("0d5e");function i(e){return Object(s["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function n(e){return Object(s["a"])({url:"tree/casemindmaplist/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function r(e){return Object(s["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(s["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function l(e){return Object(s["a"])({url:"casemindmap/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function c(e){return Object(s["a"])({url:"saveCaseMindMap/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function u(e){return Object(s["a"])({url:"copyCaseMindMap/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function d(e){return Object(s["a"])({url:"copyIdCaseMindMap/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function m(e){return Object(s["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"delete",data:e})}function h(e){return Object(s["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function p(e){return Object(s["a"])({url:"auth/casemindmaplist/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function g(e){return Object(s["a"])({url:"caseMindMapData/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function f(e){return Object(s["a"])({url:"recentUseCases/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function b(e){return Object(s["a"])({url:"historicalMimdMap/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function w(e){return Object(s["a"])({url:"zenTao/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function _(e){return Object(s["a"])({url:"zenTao/?token="+sessionStorage.getItem("token"),method:"post",data:e})}},"89c2":function(e,t,a){"use strict";t["a"]={maxexpandId:1e5,treelist:[{id:34,name:"格力电商",ProSort:34,remark:"格力电商",pid:"",isEdit:!1,children:[{id:82,name:"测试组",pid:34,remark:"",isEdit:!1,children:[]},{id:95,name:"开发组",pid:34,remark:"",isEdit:!1,children:[]}]}]}},9598:function(e,t,a){},bc45:function(e,t,a){},c24f:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c}));var s=a("0d5e");function i(e){return Object(s["a"])({url:"login/",method:"post",data:e})}function n(e){return Object(s["a"])({url:"register/",method:"post",data:e})}function r(e){return Object(s["a"])({url:"userInfo/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(s["a"])({url:"userInfo/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function l(e){return Object(s["a"])({url:"user/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function c(e){return Object(s["a"])({url:"user/?token="+sessionStorage.getItem("token"),method:"post",data:e})}},d72f:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r}));var s=a("0d5e");function i(e){return Object(s["a"])({url:"casetree/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function n(e){return Object(s["a"])({url:"casetree/?id="+e.id+"&token="+sessionStorage.getItem("token"),method:"patch",data:e})}function r(e){return Object(s["a"])({url:"updatesingle/?token="+sessionStorage.getItem("token"),method:"post",data:e})}},f32d:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{height:"5px"}}),t("el-link",{staticStyle:{"margin-left":"93%"},attrs:{type:"success",href:e.tutorialLink,target:"_blank"}},[e._v(" TMind使用教程 ")]),t("div",{staticStyle:{height:"5px"}}),t("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[t("el-aside",{staticStyle:{width:"12%"}},[t("div",[t("div",{staticClass:"button-container"},[t("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAddTop}},[e._v("添加根目录")]),t("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm()}}},[e._v("重置根目录")])],1),t("el-input",{attrs:{size:"small",placeholder:"输入关键字查询~"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e.isLoadingTree?t("el-tree",{ref:"expandMenuList",staticClass:"expand-tree",attrs:{data:e.setTree,"node-key":"id","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent,"default-expanded-keys":e.defaultExpandKeys,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}}):e._e()],1)]),t("el-container",[t("el-main",[t("el-input",{staticStyle:{width:"20%"},attrs:{placeholder:"请输入用例ID",clearable:""},on:{clear:e.getCaseMindmapList},model:{value:e.caseid,callback:function(t){e.caseid="string"===typeof t?t.trim():t},expression:"caseid"}}),t("el-input",{staticStyle:{width:"20%","margin-left":"5px"},attrs:{placeholder:"请输入名称",clearable:""},on:{clear:e.getCaseMindmapList},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t("el-select",{staticStyle:{width:"15%","margin-left":"5px"},attrs:{placeholder:"请选择权限"},model:{value:e.form.switch,callback:function(t){e.$set(e.form,"switch",t)},expression:"form.switch"}},[t("el-option",{attrs:{label:"仅读",value:"False"}}),t("el-option",{attrs:{label:"读写",value:"True"}})],1),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.getCaseMindmapListButton()}}},[e._v("查询")]),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-refresh-left"},on:{click:function(t){return e.resetForm()}}},[e._v("重置")]),t("el-button",{staticStyle:{"margin-left":"25%"},attrs:{icon:"el-icon-s-home",type:"primary",round:""},on:{click:function(t){return e.reHome()}}},[e._v("首页")]),t("div",{staticStyle:{height:"5px"}}),t("el-checkbox",{on:{change:function(t){return e.getCaseMindmapListSelf()}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("我的")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.results,border:""}},[t("el-table-column",{attrs:{type:"selection"},on:{"selection-change":e.handleSelectionChange_exportExcel}}),t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",fixed:"left"}}),t("el-table-column",{attrs:{label:"用例ID",align:"center","show-overflow-tooltip":!0,width:"170",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.caseid))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"名称",width:"180",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"用例数量",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",[e._v(e._s(a.row.casenum.totalnum))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"待测数",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"warning"}},[e._v(e._s(a.row.casenum.unknown))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"通过数",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success"}},[e._v(e._s(a.row.casenum.passnum))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"失败数",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(a.row.casenum.failnum))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"通过率",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"success"}},[e._v(e._s(a.row.casenum.passrate))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"失败率",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"danger"}},[e._v(e._s(a.row.casenum.failrate))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"测试进度",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return["0%"==a.row.casenum.schedule?t("div",{attrs:{type:"success"}},[e._v("待测试")]):"0%"!=a.row.casenum.schedule?t("el-tag",{attrs:{type:"success"}},[e._v(e._s(a.row.casenum.schedule))]):e._e()]}}])}),t("el-table-column",{attrs:{label:"测试结果",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.casenum.totalnum==a.row.casenum.unknown?t("div",{attrs:{type:"danger"}},[e._v(" 待测试 ")]):"0"!=a.row.casenum.unknown?t("div",{staticStyle:{color:"yellowgreen"},attrs:{type:"success"}},[e._v("测试中 ")]):"100%"==a.row.casenum.passrate?t("div",{staticStyle:{color:"green"},attrs:{type:"success"}},[e._v("通过 ")]):"100%"!=a.row.casenum.passrate?t("div",{staticStyle:{color:"red"},attrs:{type:"danger"}},[e._v(" 失败 ")]):e._e()]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"用例目录",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.treename))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"actual_testing_time",label:"实际提测时间",formatter:e.formatTime,width:"160"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"start_use_case_write_time",label:"用例编写开始时间",formatter:e.formatTime,width:"160"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"case_write_time",label:"用例编写完成时间",formatter:e.formatTime,width:"160"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"case_review_time",label:"用例评审时间",formatter:e.formatTime,width:"160"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"case_start_time",label:"用例开始执行时间",formatter:e.formatTime,width:"160"}}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"case_end_time",label:"用例执行完成时间",formatter:e.formatTime,width:"160"}}),t("el-table-column",{attrs:{label:"共享模式",align:"center",width:"100","render-header":e.renderTipsHeader2},scopedSlots:e._u([{key:"default",fn:function(a){return["True"==a.row.switch?t("div",{staticStyle:{color:"#67C23A"},attrs:{type:"success"}},[e._v("读写 ")]):"False"==a.row.switch?t("div",{staticStyle:{color:"red"},attrs:{type:"danger"}},[e._v("仅读 ")]):e._e()]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.creter))])]}}])}),t("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"create_time",label:"创建时间",formatter:e.formatTime2,width:"160"}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-row",[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.enterMimdMap(a.row)}}},[e._v("打开 ")]),a.row.creter===e.columnPermissions?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.updateMimdMap(a.row)}}},[e._v("编辑 ")]):e._e(),a.row.creter===e.columnPermissions?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.updateAuth(a.row)}}},[e._v("设置共享 ")]):e._e(),t("el-popover",{staticStyle:{"margin-left":"10px"},model:{value:a.visible,callback:function(t){e.$set(a,"visible",t)},expression:"scope.visible"}},[t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.copyMimdMap(a.row.caseid)}}},[e._v("复制 ")]),a.row.creter===e.columnPermissions?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteMimdMap(a.row)}}},[e._v("删除 ")]):e._e(),a.row.creter===e.columnPermissions?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.getHistoricalMimdMap(a.row)}}},[e._v("历史版本 ")]):e._e(),a.row.creter===e.columnPermissions?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.transformZenTao(a.row)}}},[e._v("转换禅道用例 ")]):e._e(),a.row.creter===e.columnPermissions?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.preview(a.row)}}},[e._v("已共享成员 ")]):e._e()],1),t("el-button",{attrs:{slot:"reference",icon:"el-icon-more",title:"更多",circle:"",size:"mini"},on:{click:function(e){a.row.visible=!a.row.visible}},slot:"reference"})],1)],1)]}}])})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"30%"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.tableData.count,expression:"tableData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.casecurrentPage,layout:"total, prev, pager, next, jumper",total:e.tableData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.casecurrentPage=t},"update:current-page":function(t){e.casecurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1)],1)],1),t("el-dialog",{attrs:{title:"编辑用例",visible:e.dialogFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{placeholder:"输入名称",label:"名称:"}},[t("el-input",{attrs:{maxlength:"50",minlength:"2",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"用例实际提测时间:"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择用例实际提测时间"},model:{value:e.actual_testing_time,callback:function(t){e.actual_testing_time=t},expression:"actual_testing_time"}})],1),t("el-form-item",{attrs:{label:"用例编写开始时间:"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择用例编写开始时间"},model:{value:e.start_use_case_write_time,callback:function(t){e.start_use_case_write_time=t},expression:"start_use_case_write_time"}})],1),t("el-form-item",{attrs:{label:"用例编写完成时间:"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择用例编写完成时间"},model:{value:e.case_write_time,callback:function(t){e.case_write_time=t},expression:"case_write_time"}})],1),t("el-form-item",{attrs:{label:"用例评审结束时间:"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择用例评审结束时间"},model:{value:e.case_review_time,callback:function(t){e.case_review_time=t},expression:"case_review_time"}})],1),t("el-form-item",{attrs:{label:"用例开始执行时间:"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择用例开始执行时间"},model:{value:e.case_start_time,callback:function(t){e.case_start_time=t},expression:"case_start_time"}})],1),t("el-form-item",{attrs:{label:"用例执行完成时间:"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择用例执行完成时间"},model:{value:e.case_end_time,callback:function(t){e.case_end_time=t},expression:"case_end_time"}})],1),t("el-form-item",{attrs:{label:"共享模式:"}},[t("el-switch",{attrs:{"active-text":"读写","inactive-text":"仅读"},model:{value:e.readwrite,callback:function(t){e.readwrite=t},expression:"readwrite"}})],1),t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"移除共享人员",name:"first"}},[t("el-input",{staticStyle:{width:"50%","margin-left":"1px"},attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:function(t){return e.getuserList2()}},model:{value:e.removeSharedUsers,callback:function(t){e.removeSharedUsers="string"===typeof t?t.trim():t},expression:"removeSharedUsers"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.getuserList2()}}},[e._v("查询")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData.results},on:{"selection-change":e.handleSelectionChange_remove}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"id",label:"用户ID",align:"center"}}),t("el-table-column",{attrs:{prop:"username",label:"名称",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.membersData.count,expression:"membersData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.addcurrentPage,layout:"total, prev, pager, next, jumper",total:e.membersData.count},on:{"current-change":e.handleCurrentChange4,"update:currentPage":function(t){e.addcurrentPage=t},"update:current-page":function(t){e.addcurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1),t("el-tab-pane",{attrs:{label:"移除共享分组",name:"second"}},[t("el-table",{attrs:{data:e.lableData.results},on:{"selection-change":e.handleSelectionChange_label_romeve}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"name",label:"名称",align:"center"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"num",label:"分组人数",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.lableData.count,expression:"lableData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.lableData.count},on:{"current-change":e.handleCurrentChange_label2,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fromMimdMap()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"共享设置",visible:e.authdialogFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.authdialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"指定共享人员",name:"first"}},[t("el-input",{staticStyle:{width:"50%","margin-left":"1px"},attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:function(t){return e.getuserList()}},model:{value:e.addSharedUsers,callback:function(t){e.addSharedUsers="string"===typeof t?t.trim():t},expression:"addSharedUsers"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.getuserList()}}},[e._v("查询")]),t("div",{staticStyle:{height:"15px"}}),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData.results},on:{"selection-change":e.handleSelectionChange_add}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"id",label:"用户ID",align:"center"}}),t("el-table-column",{attrs:{prop:"username",label:"姓名",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.membersData.count,expression:"membersData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.addcurrentPage,layout:"total, prev, pager, next, jumper",total:e.membersData.count},on:{"current-change":e.handleCurrentChange3,"update:currentPage":function(t){e.addcurrentPage=t},"update:current-page":function(t){e.addcurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1),t("el-tab-pane",{attrs:{label:"指定共享分组",name:"second"}},[t("el-table",{attrs:{data:e.lableData.results},on:{"selection-change":e.handleSelectionChange_label}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"name",label:"名称",align:"center"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"num",label:"分组人数",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.lableData.count,expression:"lableData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.lableData.count},on:{"current-change":e.handleCurrentChange_label,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.authdialogFormVisible=!1}}},[e._v("关 闭")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitData()}}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"查看已共享人员",visible:e.previewauthdialogFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.previewauthdialogFormVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-input",{staticStyle:{width:"50%","margin-left":"1px"},attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:function(t){return e.getuserList2()}},model:{value:e.removeSharedUsers,callback:function(t){e.removeSharedUsers="string"===typeof t?t.trim():t},expression:"removeSharedUsers"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.getuserList2()}}},[e._v("查询")]),t("el-tab-pane",{attrs:{label:"已共享人员",name:"first"}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData.results},on:{"selection-change":e.handleSelectionChange_remove}},[t("el-table-column",{attrs:{prop:"id",label:"用户ID",align:"center"}}),t("el-table-column",{attrs:{prop:"username",label:"名称",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.membersData.count,expression:"membersData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.addcurrentPage,layout:"total, prev, pager, next, jumper",total:e.membersData.count},on:{"current-change":e.handleCurrentChange4,"update:currentPage":function(t){e.addcurrentPage=t},"update:current-page":function(t){e.addcurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1),t("el-tab-pane",{attrs:{label:"已共享分组",name:"second"}},[t("el-table",{attrs:{data:e.lableData.results},on:{"selection-change":e.handleSelectionChange_label_romeve}},[t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"name",label:"名称",align:"center"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"num",label:"分组人数",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.lableData.count,expression:"lableData.count !== 0"}],attrs:{"page-size":10,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.lableData.count},on:{"current-change":e.handleCurrentChange_label2,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1)],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.previewauthdialogFormVisible=!1}}},[e._v("关闭")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.historicalDialogVisible,width:"25%",center:""},on:{"update:visible":function(t){e.historicalDialogVisible=t}}},[t("span",[e._v("确定恢复到当前版本吗？恢复到当前版本后会覆盖原有数据!")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.historicalDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.clickHistoricalDialogVisible}},[e._v("确 定")])],1)]),t("el-dialog",{attrs:{title:"转换禅道用例",visible:e.zenTaoDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.zenTaoDialogVisible=t}}},[t("div",[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[t("el-divider",[e._v("若cookie为空时，绑定后要点保存")]),t("el-form-item",{attrs:{label:"禅道Cookie"}},[t("el-col",{staticStyle:{width:"86%"}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请绑定禅道Cookie",clearable:""},model:{value:e.zenTaoform.cookie,callback:function(t){e.$set(e.zenTaoform,"cookie",t)},expression:"zenTaoform.cookie"}},[t("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addCookie},slot:"append"},[e._v("保存")])],1)],1)],1),t("el-form-item",{attrs:{label:"所属用例库"}},[t("el-select",{staticStyle:{width:"86%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.caseoptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"测试用例名"}},[e._v(" "+e._s(this.zenTaoform.name)+" ")]),t("el-form-item",{attrs:{label:"测试用例ID"}},[e._v(" "+e._s(this.zenTaoform.caseid)+" ")]),t("el-form-item",{attrs:{label:"符合性检查"}},[t("el-progress",{staticStyle:{width:"86%"},attrs:{"text-inside":!0,"stroke-width":35,percentage:e.progress,status:e.status}})],1),t("el-descriptions",{attrs:{title:"转成禅道用例格式检查结果",direction:"vertical",column:4,border:""}},[t("el-descriptions-item",{attrs:{label:"符合数量",span:2}},[e._v(e._s(this.zenTaocompliant))]),t("el-descriptions-item",{attrs:{label:"不符合数量",span:2}},[e._v(e._s(this.zenTaoNompliant))]),t("el-descriptions-item",{attrs:{label:"符合禅道用例"}},[t("el-link",{attrs:{type:"success",disabled:e.isSubmit},on:{click:e.clickzenTaoSuccessDialogVisible}},[e._v("查看符合用例")])],1),t("el-descriptions-item",{attrs:{label:"不符合禅道用例"}},[t("el-link",{attrs:{type:"danger",disabled:e.isSubmit},on:{click:e.clickzenTaoFailureDialogVisible}},[e._v("查看不符合用例")])],1)],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.zenTaoDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"success",disabled:e.isconvert},on:{click:e.zenTao}},[e._v("转禅道格式")]),t("el-button",{attrs:{type:"primary",disabled:e.isSubmit,loading:e.ztloading},on:{click:e.addzenTao}},[e._v("提交禅道")])],1)]),t("el-drawer",{attrs:{title:"历史版本(只展示最近20次记录)",visible:e.historicalMimdMap,direction:"rtl",size:"50%"},on:{"update:visible":function(t){e.historicalMimdMap=t}}},[t("el-card",{staticClass:"rounded-card",staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{shadow:"hover"}},[t("el-table",{attrs:{data:e.tableLog.results}},[t("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),t("el-table-column",{attrs:{property:"id",label:"ID",width:"80"}}),t("el-table-column",{attrs:{property:"casesum",label:"用例数量",width:"80"}}),t("el-table-column",{attrs:{property:"update_time",label:"最后更新时间",formatter:e.formatTime2}}),t("el-table-column",{attrs:{property:"creter",label:"最后更新人"}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-row",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.enterLogMimdMap(a.row)}}},[e._v("查看 ")]),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.retoVersion(a.row)}}},[e._v("恢复到此版本 ")])],1)]}}])})],1)],1)],1),t("el-dialog",{attrs:{title:"符合禅道用例",visible:e.zenTaoSuccessDialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.zenTaoSuccessDialogVisible=t}}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.zenTaotableData}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"title",label:"标题",width:"250"}}),t("el-table-column",{attrs:{prop:"lib",label:"库ID",width:"80"}}),t("el-table-column",{attrs:{prop:"module",label:"模块",width:"80"}}),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"80"}}),t("el-table-column",{attrs:{prop:"pri",label:"优先级",width:"80"}}),t("el-table-column",{attrs:{prop:"precondition",label:"前置条件"}}),e._l(e.steps,(function(a,s){return t("el-table-column",{key:s,attrs:{label:"步骤 "+(s+1)},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t[`steps[${s+1}]`])+" ")]}}],null,!0)})})),e._l(e.expects,(function(a,s){return t("el-table-column",{key:"expect-"+s,attrs:{label:"预期 "+(s+1)},scopedSlots:e._u([{key:"default",fn:function({row:t}){return[e._v(" "+e._s(t[`expects[${s+1}]`])+" ")]}}],null,!0)})}))],2),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.zenTaoSuccessDialogVisible=!1}}},[e._v("取 消")])],1)],1),t("el-dialog",{attrs:{title:"提示",visible:e.zenTaoFailureDialogVisible,width:"80%",center:""},on:{"update:visible":function(t){e.zenTaoFailureDialogVisible=t}}},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.casePathReason}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),t("el-table-column",{attrs:{prop:"path",label:"用例路径"}}),t("el-table-column",{attrs:{prop:"reason",label:"错误原因（缺少必要的标签）"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.zenTaoFailureDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},i=[],n=(a("14d9"),a("1f82")),r=a("89c2"),o=a("6a87"),l=a("d72f"),c=a("7fbf"),u=a("c24f"),d=a("34cd"),m=a("4744"),h=(a("365c"),a("6a66"),{inject:["reload"],name:"tree",components:{ElCol:n["a"]},watch:{filterText(e){this.$refs.expandMenuList.filter(e)}},data(){return{tutorialLink:"https://docs.qq.com/doc/DYkNiekxtV3BwaW9m?u=2755f280259642feae5f6c877b6c5187/",ztloading:!1,zenTaotableData:[],casePathReason:[],zenTaoSuccessDialogVisible:!1,zenTaoFailureDialogVisible:!1,zenTaocasenum:"",zenTaocompliant:"",zenTaoNompliant:"",isconvert:!1,isSubmit:!0,caseoptions:[{value:"31",label:"TMind用例库"}],value:"31",zenTaoform:{name:"",cookie:"",caseid:""},progress:0,interval:null,status:"warning",zenTaoDialogVisible:!1,historicalID:"",historicalCaseid:"",historicalDialogVisible:!1,tableLog:[],historicalMimdMap:!1,case_write_time:"",case_review_time:"",case_start_time:"",case_end_time:"",actual_testing_time:"",start_use_case_write_time:"",authority:"",addSharedUsers:"",removeSharedUsers:"",viewSharedUsers:"",columnPermissions:"",showDateArray:["薛公侯","何少军","泊毓燊","吴雪雯"],centerDialogVisible:!1,maxexpandId:r["a"].maxexpandId,non_maxexpandId:r["a"].maxexpandId,isLoadingTree:!1,setTree:[],defaultProps:{children:"children",label:"name"},defaultExpandKeys:[],tableData:[],filterText:"",treetype:"",operateOn:"",operationContent:"",beforeoperation:"",dialogFormVisible:!1,authdialogFormVisible:!1,previewauthdialogFormVisible:!1,form:{name:"",switch:"",type:"",caseid:"",beforeoperation:"",readwrite:"",creter:"",usermultipleSelection:[],labemultipleSelection:[]},formLabelWidth:"120px",checked:!1,visible:!1,name:"",caseid:"",treeid:"",treeidCase:"",centerDialogVisible:!1,eleId:"",isShow:!1,tableData:{count:0,results:[]},currentRow:"",casecurrentPage:1,menuVisible:!1,firstLevel:!1,maxexpandId:4,treeData:[],defaultProps:{children:"children",label:"label"},activeName:"first",readwrite:!0,sharecaseid:"",isButtonEnabled:!1,AddMembersDialogVisible:!1,RemoveMembersDialogVisible:!1,LookMembersDialogVisible:!1,AddLabelDialogVisible:!1,adduser:"",personalcenter:!1,loading:!1,lableData:[],currentPage:1,addcurrentPage:1,lookcurrentPage:1,removecurrentPage:1,labelname:"",membersData:[],userid:"",addmultipleSelection:[],labemultipleSelection:[],exportExcelSelection:[]}},computed:{shouldShowDateColumn(){return this.tableData.results.some(e=>this.showDateArray.includes(e.creter))},steps(){const e={};return this.zenTaotableData.forEach(t=>{for(const a in t)if(a.startsWith("steps[")){const s=parseInt(a.match(/\[(\d+)\]/)[1],10);e[s]=t[a]}}),Object.keys(e).sort((e,t)=>e-t).map(t=>e[t])},expects(){const e={};return this.zenTaotableData.forEach(t=>{for(const a in t)if(a.startsWith("expects[")){const s=parseInt(a.match(/\[(\d+)\]/)[1],10);e[s]=t[a]}}),Object.keys(e).sort((e,t)=>e-t).map(t=>e[t])}},beforeDestroy(){this.$bus.$off("showCaseNavigation",this.handleOpenPanelDialog)},created(){this.getCaseTree(),this.columnPermissions=window.sessionStorage.getItem("username"),this.getCaseMindmapList(),this.$bus.$on("showCaseNavigation",this.handleOpenPanelDialog),this.$bus.$on("show-login-dialog",()=>{this.$router.push("/")})},methods:{clickzenTaoSuccessDialogVisible(){this.zenTaoSuccessDialogVisible=!0},clickzenTaoFailureDialogVisible(){this.zenTaoFailureDialogVisible=!0},addzenTao(){if(0==this.zenTaotableData)return void this.$message.error({message:"没有符合禅道的用例~",type:"success",center:!0});if(""==this.zenTaoform.cookie)return void this.$message.error({message:"禅道Cookie不能为空~",type:"success",center:!0});this.ztloading=!0;Object(c["b"])({ztcase:this.zenTaotableData,ztcookie:this.zenTaoform.cookie}).then(e=>{e.success?(this.ztloading=!1,this.zenTaoDialogVisible=!1,window.open("https://ztpm.gree.com:8888/caselib-browse-0.html","_blank"),this.$message.success({message:"创建禅道成功~",type:"success",center:!0})):(this.ztloading=!1,this.$message.error({message:e.msg,type:"success",center:!0}))})},addCookie(){if(""==this.zenTaoform.cookie)return void this.$message.error({message:"禅道Cookie不能为空~",type:"success",center:!0});Object(u["a"])({ztcookie:this.zenTaoform.cookie}).then(e=>{this.$message.success({message:"保存成功~",type:"success",center:!0})})},getCookie(){Object(u["c"])({}).then(e=>{this.zenTaoform.cookie=e.results[0].ztCookie})},zenTao(){this.progress=0,this.isconvert=!0,this.status="warning";Object(c["p"])({caseid:this.zenTaoform.caseid}).then(e=>{e.success?(this.interval=setInterval(()=>{this.progress<100?this.progress+=1:(clearInterval(this.interval),this.status="success",this.isSubmit=!1,100==this.progress&&(this.zenTaocasenum=e.casesNum.sum_num,this.zenTaocompliant=e.casesNum.success_num,this.zenTaoNompliant=e.casesNum.failure_num,this.$message.success({message:"检查完成~",type:"success",center:!0})))},100),this.zenTaotableData=e.detailsSuccessful,this.casePathReason=e.casePathReason):this.$message.error({message:"检查失败，程序错误~",type:"success",center:!0})})},transformZenTao(e){this.progress=0,clearInterval(this.interval),this.zenTaoform.caseid=e.caseid,this.isSubmit=!0,this.isconvert=!1,this.zenTaoform.name=e.name,this.zenTaoDialogVisible=!0,this.zenTaocasenum=0,this.zenTaocompliant=0,this.zenTaoNompliant=0,this.getCookie()},clickHistoricalDialogVisible(){Object(c["k"])({id:this.historicalID,caseid:this.historicalCaseid}).then(e=>{e.success?(this.historicalDialogVisible=!1,this.$message.success({message:"恢复成功~",type:"success",center:!0})):this.$message.error({message:"恢复失败~",type:"success",center:!0})})},retoVersion(e){this.historicalDialogVisible=!0,this.historicalID=e.id,this.historicalCaseid=e.caseid},enterLogMimdMap(e){window.sessionStorage.setItem("logid",e.id),window.sessionStorage.setItem("logcase",e.caseid),window.sessionStorage.setItem("jumptocase","jumptocase"),this.$router.push("/log")},getHistoricalMimdMap(e){this.historicalMimdMap=!0;Object(m["e"])({pagenum:"20",page:1,id:"",caseid:e.caseid}).then(e=>{this.tableLog=e})},goHome(){window.sessionStorage.setItem("rehome","rehome"),this.$router.replace("/")},saveLocalFile(){Object(c["m"])({content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA"),caseid:window.sessionStorage.getItem("caseid"),name:window.sessionStorage.getItem("name"),switch:!0}).then(e=>{0==e.success?window.sessionStorage.setItem("switch","False"):window.sessionStorage.setItem("switch","True")}).catch(e=>{})},handleDialogClose(){},handleOpenPanelDialog(){this.resetForm(),this.columnPermissions=window.sessionStorage.getItem("username"),this.$router.push("/caseNavigation")},submitData(){if(0!=this.addmultipleSelection.length||0!=this.labemultipleSelection.length){Object(c["c"])({name:"",caseid:this.sharecaseid,type:1,switch:!1,readwrite:this.readwrite,treename:"",beforeoperation:"",userlist:this.addmultipleSelection,labellist:this.labemultipleSelection}).then(e=>{e.success?(this.authdialogFormVisible=!1,this.$message.success({message:"添加成功~",type:"success",center:!0})):this.$message.error({message:e.msg,type:"success",center:!0})}).catch(e=>{this.$message.error({message:"添加失败，稍后再试~",type:"success",center:!0})})}else this.$message.error({message:"请勾选要添加数据",type:"success",center:!0})},handleSelectionChange_add(e){this.addmultipleSelection=e},handleSelectionChange_remove(e){this.form.usermultipleSelection=e},handleSelectionChange_label(e){this.labemultipleSelection=e},handleSelectionChange_label_romeve(e){this.form.labemultipleSelection=e},async getLabelList(){Object(d["d"])({page:this.currentPage,type:4,caseid:this.sharecaseid}).then(e=>{this.lableData=e})},getuserList(){this.lookcurrentPage=1,this.addcurrentPage=1,this.removecurrentPage=1;Object(u["d"])({page:this.addcurrentPage,type:3,caseid:this.sharecaseid,username:this.addSharedUsers}).then(e=>{this.membersData=e})},getuserList2(){this.lookcurrentPage=1,this.addcurrentPage=1,this.removecurrentPage=1;Object(u["d"])({page:this.addcurrentPage,type:4,caseid:this.sharecaseid,username:this.removeSharedUsers}).then(e=>{this.membersData=e})},async getLabelList2(){this.lookcurrentPage=1,this.addcurrentPage=1,this.removecurrentPage=1;Object(d["d"])({page:this.currentPage,type:5,caseid:this.sharecaseid}).then(e=>{this.lableData=e})},handleCurrentChange_label(e){Object(d["d"])({page:this.currentPage,type:4,caseid:this.sharecaseid}).then(e=>{this.lableData=e})},handleCurrentChange_label2(e){Object(d["d"])({page:this.currentPage,type:5,caseid:this.sharecaseid}).then(e=>{this.lableData=e})},handleCurrentChange3(e){Object(u["d"])({page:this.addcurrentPage,type:3,label:"",caseid:this.sharecaseid,username:this.addSharedUsers}).then(e=>{this.membersData=e})},handleCurrentChange4(e){Object(u["d"])({page:this.addcurrentPage,type:4,caseid:this.sharecaseid,username:this.removeSharedUsers}).then(e=>{this.membersData=e})},formatTime(e,t){let a=e[t.property];if(!a||isNaN(new Date(a)))return"";let s=new Date(a);const i=s.getFullYear();let n=s.getMonth()+1;n<10&&(n="0"+n);let r=s.getDate();r<10&&(r="0"+r);let o=s.getHours();o<10&&(o="0"+o);let l=s.getMinutes();l<10&&(l="0"+l);let c=s.getSeconds();return c<10&&(c="0"+c),i+"-"+n+"-"+r},formatTime2(e,t){let a=e[t.property];if(!a||isNaN(new Date(a)))return"";let s=new Date(a);const i=s.getFullYear();let n=s.getMonth()+1;n<10&&(n="0"+n);let r=s.getDate();r<10&&(r="0"+r);let o=s.getHours();o<10&&(o="0"+o);let l=s.getMinutes();l<10&&(l="0"+l);let c=s.getSeconds();return c<10&&(c="0"+c),i+"-"+n+"-"+r+" "+o+":"+l+":"+c},filterNode(e,t){return!e||-1!==t.name.indexOf(e)},async getCaseTree(){Object(l["b"])({}).then(e=>{this.setTree=e})},renderTipsHeader2(e,{column:t}){return e("div",[e("span",t.label),e("el-tooltip",{props:{effect:"dark",content:"读写:共享时内容读写不限制；仅读：共享时他人仅读不可修改内容~",placement:"top"}},[e("i",{class:"el-icon-question",style:"color:#409EFF;margin-left:5px;"})])])},updateAuth(e){this.currentPage=1,this.activeName="first",this.sharecaseid=e.caseid,this.authdialogFormVisible=!0,this.addSharedUsers="",this.removeSharedUsers="",this.getLabelList(),this.getuserList()},updateMimdMap(e){this.currentPage=1,this.activeName="first",this.sharecaseid=e.caseid,this.form.caseid=e.caseid,this.form.name=e.name,this.form.type=e.type,this.form.switch=e.switch,this.form.readwrite=e.switch,this.form.beforeoperation="",this.form.creter=e.creter,this.case_write_time=e.case_write_time,this.case_review_time=e.case_review_time,this.case_start_time=e.case_start_time,this.case_end_time=e.case_end_time,this.actual_testing_time=e.actual_testing_time,this.start_use_case_write_time=e.start_use_case_write_time,"True"==e.switch?this.readwrite=!0:this.readwrite=!1,this.dialogFormVisible=!0,this.getLabelList2(),this.getuserList2()},preview(e){this.previewauthdialogFormVisible=!0,this.currentPage=1,this.activeName="first",this.sharecaseid=e.caseid,this.form.caseid=e.caseid,this.form.name=e.name,this.form.type=e.type,this.form.switch=e.switch,this.form.beforeoperation="",this.getLabelList2(),this.getuserList2()},fromMimdMap(e){if(this.actual_testing_time){let e=new Date(this.actual_testing_time).getFullYear(),t=("0"+(new Date(this.actual_testing_time).getMonth()+1)).slice(-2),a=("0"+new Date(this.actual_testing_time).getDate()).slice(-2),s=`${e}-${t}-${a}`;this.actual_testing_time=s}else this.actual_testing_time=null;if(this.start_use_case_write_time){let e=new Date(this.start_use_case_write_time).getFullYear(),t=("0"+(new Date(this.start_use_case_write_time).getMonth()+1)).slice(-2),a=("0"+new Date(this.start_use_case_write_time).getDate()).slice(-2),s=`${e}-${t}-${a}`;this.start_use_case_write_time=s}else this.start_use_case_write_time=null;if(this.case_write_time){let e=new Date(this.case_write_time).getFullYear(),t=("0"+(new Date(this.case_write_time).getMonth()+1)).slice(-2),a=("0"+new Date(this.case_write_time).getDate()).slice(-2),s=`${e}-${t}-${a}`;this.case_write_time=s}else this.case_write_time=null;if(this.case_review_time){let e=new Date(this.case_review_time).getFullYear(),t=("0"+(new Date(this.case_review_time).getMonth()+1)).slice(-2),a=("0"+new Date(this.case_review_time).getDate()).slice(-2),s=`${e}-${t}-${a}`;this.case_review_time=s}else this.case_review_time=null;if(this.case_start_time){let e=new Date(this.case_start_time).getFullYear(),t=("0"+(new Date(this.case_start_time).getMonth()+1)).slice(-2),a=("0"+new Date(this.case_start_time).getDate()).slice(-2),s=`${e}-${t}-${a}`;this.case_start_time=s}else this.case_start_time=null;if(this.case_end_time){let e=new Date(this.case_end_time).getFullYear(),t=("0"+(new Date(this.case_end_time).getMonth()+1)).slice(-2),a=("0"+new Date(this.case_end_time).getDate()).slice(-2),s=`${e}-${t}-${a}`;this.case_end_time=s}else this.case_end_time=null;Object(c["o"])({name:this.form.name,caseid:this.form.caseid,type:this.form.type,switch:this.readwrite,treeid:"",treecase:"",treename:"",beforeoperation:"",labellist:this.form.labemultipleSelection,userlist:this.form.usermultipleSelection,case_write_time:this.case_write_time,case_review_time:this.case_review_time,case_start_time:this.case_start_time,case_end_time:this.case_end_time,actual_testing_time:this.actual_testing_time,start_use_case_write_time:this.start_use_case_write_time}).then(e=>{e.success?(this.$message.success({message:"编辑成功~",type:"success",center:!0}),this.dialogFormVisible=!1,this.form.type="",this.form.switch="",this.form.caseid==window.sessionStorage.getItem("caseid")&&(1==this.readwrite?(this.authority="读写",sessionStorage.setItem("switch","True")):(this.authority="仅读",sessionStorage.setItem("switch","False")),this.$emit("sendData",{caseid:this.form.caseid,name:this.form.name,authority:this.authority,creter:this.form.creter})),this.getCaseMindmapList()):this.$message.error(e.msg)}).catch(e=>{this.$message.error("编辑异常")})},handleSelectionChange_exportExcel(e){this.exportExcelSelection=e},reHome(){window.sessionStorage.setItem("rehome","rehome"),this.$router.replace("/")},deleteMimdMap(e){this.$confirm("此操作将会被监控，且永久删除该用例, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(c["h"])({caseid:e.caseid,name:e.name,content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA")}).then(t=>{t.success?(e.caseid==window.sessionStorage.getItem("caseid")&&(window.sessionStorage.setItem("switch","False"),window.sessionStorage.setItem("delete","delete")),this.getCaseMindmapList(),this.$message.warning(t.msg)):this.$message.error(t.msg)}).catch(e=>{this.$message.error("删除异常，请稍后删除。")})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},copyMimdMap(e){var t="TMIND"+Date.now();this.$confirm("复制后新ID:"+t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(c["g"])({copyid:t,caseid:e}).then(e=>{e.success?(this.getCaseMindmapList(),this.$message.success("复制成功，用例ID:"+t)):this.$message.error("复制失败。")}).catch(e=>{this.$message.error("复制异常，请稍后复制。")})}).catch(()=>{this.$message({type:"info",message:"已取消复制"})})},enterMimdMap(e){window.sessionStorage.setItem("caseid",e.caseid),window.sessionStorage.setItem("name",e.name),window.sessionStorage.setItem("creter",e.creter),window.sessionStorage.setItem("switch",e.switch),window.sessionStorage.removeItem("delete"),this.$emit("sendData",e),this.$router.push("/")},cellMouseEnter(e){this.currentRow=e},cellMouseLeave(e){this.currentRow=""},handleCurrentChange(e){Object(c["e"])({page:this.casecurrentPage,name:this.name,caseid:this.caseid,treeid:this.treeid,checked:this.checked,switch:this.form.switch,type:this.form.type,tc:this.treeidCase}).then(e=>{this.tableData=e})},async editCaseTree(e){Object(l["a"])({id:"3",content:this.setTree,treetype:this.treetype,beforeoperation:this.beforeoperation,operationContent:this.operationContent,caseid:sessionStorage.getItem("caseid")}).then(e=>{})},async getCaseMindmapList(){Object(c["j"])({name:this.name,treeid:"",caseid:this.caseid,checked:this.checked,page:this.casecurrentPage,switch:this.form.switch,type:""}).then(e=>{this.tableData=e}).catch(e=>{console.log("出错了")})},async getCaseMindmapListSelf(){this.casecurrentPage=1;Object(c["j"])({name:this.name,treeid:"",caseid:this.caseid,checked:this.checked,page:this.casecurrentPage,switch:this.form.switch,type:this.form.type}).then(e=>{this.tableData=e})},async getCaseMindmapListButton(){this.treeidCase="",this.casecurrentPage=1;Object(c["j"])({name:this.name,treeid:"",caseid:this.caseid,checked:this.checked,page:1,switch:this.form.switch,type:this.form.type}).then(e=>{this.tableData=e})},resetForm(){this.filterText="",this.caseid="",this.name="",this.checked=!1,this.casecurrentPage=1,this.form.switch="",this.form.type="",this.treeid="",this.treeidCase="";Object(c["j"])({name:this.name,treeid:"",caseid:this.caseid,checked:!1,page:1,switch:this.form.switch,type:this.form.type}).then(e=>{this.tableData=e})},initExpand(){this.setTree.map(e=>{this.defaultExpandKeys.push(e.id)}),this.isLoadingTree=!0},handleNodeClick(e,t,a){e.isEdit=!1;var s=[];s.push(e.id);for(let i=0;i<e.children.length;i++){s.push(e.children[i].id);for(let t=0;t<e.children[i].children.length;t++){s.push(e.children[i].children[t].id);for(let a=0;a<e.children[i].children[t].children.length;a++)s.push(e.children[i].children[t].children[a].id)}}console.log(s),this.treeidCase={node_id:s.join(",")},this.casecurrentPage=1;Object(c["n"])({name:"",treeid:s,caseid:"",checked:this.checked,switch:"",type:"",page:1}).then(e=>{this.tableData=e})},renderContent(e,{node:t,data:a,store:s}){let i=this;const n="el-icon-folder";return e("div",[e("i",{class:n}),e(o["a"],{props:{DATA:a,NODE:t,STORE:s,maxexpandId:i.non_maxexpandId},on:{nodeAdd:(e,t,a)=>i.handleAdd(e,t,a),nodeEdit:(e,t,a)=>i.handleEdit(e,t,a),nodeDel:(e,t,a)=>i.handleDelete(e,t,a)}})])},handleAddTop(){this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,20}$/,inputErrorMessage:"请输入1到20个字符"}).then(({value:e})=>{this.setTree.push({id:Date.now(),name:e,pid:"",isEdit:!1,children:[]}),this.editCaseTree(),this.$message.success({message:"添加成功~",type:"success",center:!0})}).catch(()=>{})},handleAdd(e,t,a){if(console.log(e,t,a),a.level>=4)return this.$message.error("最多只支持四级~"),!1;this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,20}$/,inputErrorMessage:"请输入1到20个字符"}).then(({value:e})=>{t.children.push({id:Date.now(),name:e,pid:t.id,isEdit:!1,children:[]}),this.editCaseTree(),this.$message.success({message:"添加成功~",type:"success",center:!0})}).catch(()=>{}),a.expanded||(a.expanded=!0)},handleEdit(e,t,a){t.isEdit=!1,this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.name,inputPattern:/^.{1,20}$/,inputErrorMessage:"请输入1到20个字符"}).then(({value:e})=>{t.name=e,t.isEdit=!1,this.treetype="编辑",this.beforeoperation=t.name,this.editCaseTree();Object(l["c"])({treeid:t.id,treename:e}).then(e=>{this.treeid=JSON.stringify(data.id)});this.$message.success({message:"编辑成功~",type:"success",center:!0})}).catch(()=>{})},handleDelete(e,t,a){console.log(e.name,t,a),console.log(e,t.name,a),console.log(e,t,a.name);let s=this;if(t.children&&0!==t.children.length)return this.$message.error("此节点有子级，不可删除！"),!1;Object(c["j"])({name:"",caseid:"",treeid:t.id,checked:"",switch:"",type:""}).then(e=>{if(0!=e.count)this.$message.error({message:"删除失败，目录下有关联用例~",type:"success",center:!0});else{let e=()=>{let e=a.parent.data.children||a.parent.data,s=999999;e.map((e,a)=>{t.id==e.id&&(s=a)});e.splice(s,1);this.treetype="删除",this.operationContent=t.name,this.editCaseTree(),this.$message.success({message:"删除成功~",type:"success",center:!0})},i=()=>{s.$confirm("名称：《"+t.name+"》，确定删除此目录？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{e()}).catch(()=>!1)};t.id==this.non_maxexpandId?e():i()}})}},mounted(){this.initExpand()}}),p=h,g=(a("7dd3"),a("2877")),f=Object(g["a"])(p,s,i,!1,null,null,null);t["default"]=f.exports}}]);
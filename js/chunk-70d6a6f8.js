(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70d6a6f8"],{"020e":function(e,t,s){"use strict";s("f1b8")},"080b":function(e,t,s){},"0fd4":function(e,t,s){},"162f":function(e,t,s){},"17a4":function(e,t,s){"use strict";s("3d24")},"19d3":function(e,t,s){},"200a":function(e,t,s){},"25fc":function(e,t,s){},"26db":function(e,t,s){"use strict";s("cbae")},2820:function(e,t,s){},"2ab1":function(e,t,s){},"2d86":function(e,t,s){},"2fe6":function(e,t,s){"use strict";s("3298")},3298:function(e,t,s){},"34cd":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return r}));var i=s("0d5e");function a(e){return Object(i["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(i["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function n(e){return Object(i["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function r(e){return Object(i["a"])({url:"label/?token="+sessionStorage.getItem("token"),method:"delete",data:e})}},3870:function(e,t,s){},"395e":function(e,t,s){"use strict";s("9c3c")},"3b05":function(e,t,s){},"3b78":function(e,t,s){},"3d24":function(e,t,s){},"40b0":function(e,t,s){},4744:function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"h",(function(){return o})),s.d(t,"b",(function(){return n})),s.d(t,"d",(function(){return r})),s.d(t,"f",(function(){return l})),s.d(t,"c",(function(){return c})),s.d(t,"g",(function(){return d})),s.d(t,"a",(function(){return h}));var i=s("0d5e");function a(e){return Object(i["a"])({url:"mindmaplog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(i["a"])({url:"mylog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function n(e){return Object(i["a"])({url:"alllog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function r(e){return Object(i["a"])({url:"dynamicsalog/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function l(e){return Object(i["a"])({url:"statistics/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function c(e){return Object(i["a"])({url:"allstatistics/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function d(e){return Object(i["a"])({url:"mycase/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function h(e){return Object(i["a"])({url:"allcase/?token="+sessionStorage.getItem("token"),method:"get",params:e})}},"482f":function(e,t,s){},"49df":function(e,t,s){},"49ec":function(e,t,s){},"4ba6":function(e,t,s){},"4ccd":function(e,t,s){"use strict";s("482f")},"4fc1":function(e,t,s){"use strict";s("49df")},"4fd8":function(e,t,s){},"518d":function(e,t,s){"use strict";s("2d86")},"57e0":function(e,t,s){},"5be0":function(e,t,s){},"5e0c":function(e,t,s){},"5ed8":function(e,t,s){"use strict";s("25fc")},"5fca":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container",class:{isDark:e.isDark,activeSidebar:e.activeSidebar}},[e.show?[e.isZenMode?e._e():t("Toolbar"),t("Edit")]:e._e()],2)},a=[],o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbarContainer",class:{isDark:e.isDark}},[t("div",{ref:"toolbarRef",staticClass:"toolbar"},[t("div",{staticClass:"toolbarBlock",staticStyle:{width:"168px"}},[t("div",{staticClass:"ellipsis"},[t("span",{staticStyle:{"font-size":"10px",color:"green"}},[e._v("名称:"),t("span",{staticStyle:{color:"green"}},[e._v(e._s(this.name))])]),t("br"),t("span",{staticStyle:{"font-size":"9px",color:"brown"}},[e._v("ID:"),t("span",{staticStyle:{color:"brown"}},[e._v(e._s(this.ID))])]),t("br"),t("span",{staticStyle:{"font-size":"10px",color:"royalblue"}},[e._v("创建人:"),t("span",{staticStyle:{color:"royalblue"}},[e._v(e._s(this.creter))])]),t("br"),t("span",{staticStyle:{"font-size":"10px",color:"cadetblue"}},[e._v("参与者权限: "),"读写"==this.authority?t("span",{staticStyle:{color:"green"}},[e._v(e._s(this.authority))]):"仅读"==this.authority?t("span",{staticStyle:{color:"red"}},[e._v(e._s(this.authority))]):e._e()])])]),t("div",{staticClass:"toolbarBlock"},[t("ToolbarNodeBtnList",{attrs:{list:e.horizontalList}}),e.showMoreBtn?t("el-popover",{style:{marginLeft:e.horizontalList.length>0?"20px":0},attrs:{placement:"bottom-end",width:"120",trigger:"hover"},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[t("ToolbarNodeBtnList",{attrs:{dir:"v",list:e.verticalList},nativeOn:{click:function(t){e.popoverShow=!1}}}),t("div",{staticClass:"toolbarBtn",attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"icon iconfont icongongshi"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.more")))])])],1):e._e()],1),t("div",{staticClass:"toolbarBlock"},[t("div",{staticClass:"toolbarBtn",staticStyle:{color:"#AB510D"},on:{click:e.caseT}},[t("span",{staticClass:"icon iconfont iconbiaoqian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.biaoti")))])]),t("div",{staticClass:"toolbarBtn",staticStyle:{color:"#009900"},on:{click:e.caseC}},[t("span",{staticClass:"icon iconfont iconbiaoqian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.yongli")))])]),t("div",{staticClass:"toolbarBtn",staticStyle:{color:"#0000FF"},on:{click:e.caseF}},[t("span",{staticClass:"icon iconfont iconbiaoqian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.qianzhi")))])]),t("div",{staticClass:"toolbarBtn",staticStyle:{color:"#FF9900"},on:{click:e.caseS}},[t("span",{staticClass:"icon iconfont iconbiaoqian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.buzhou")))])]),t("div",{staticClass:"toolbarBtn",staticStyle:{color:"#510DAB"},on:{click:e.caseE}},[t("span",{staticClass:"icon iconfont iconbiaoqian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.yuqi")))])])]),t("div",{staticClass:"toolbarBlock"},[t("div",{staticClass:"toolbarBtn",on:{click:function(t){return e.$bus.$emit("showAddcase")},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"s",void 0,t.key,void 0)?null:t.ctrlKey?(t.preventDefault(),e.handleSave.apply(null,arguments)):null}}},[t("span",{staticClass:"icon iconfont iconxinjian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.newFile")))])]),t("div",{staticClass:"toolbarBtn",staticStyle:{color:"royalblue"},on:{click:e.saveLocalFile}},[t("span",{staticClass:"icon iconfont iconbaocun"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.saveFile")))])]),t("div",{staticClass:"toolbarBtn",on:{click:e.saveAsLocalFile}},[t("span",{staticClass:"icon iconfont iconlingcunwei"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.saveAs")))])]),t("div",{staticClass:"toolbarBtn",on:{click:function(t){return e.$bus.$emit("showImport")}}},[t("span",{staticClass:"icon iconfont icondaoru"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.import")))])]),t("div",{staticClass:"toolbarBtn",staticStyle:{"margin-right":"0"},on:{click:function(t){return e.$bus.$emit("showExport")}}},[t("span",{staticClass:"icon iconfont iconexport"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.export")))])]),e.fileTreeVisible?t("div",{staticClass:"fileTreeBox",class:{expand:e.fileTreeExpand}},[t("div",{staticClass:"fileTreeToolbar"},[t("div",{staticClass:"fileTreeName"},[e._v(" "+e._s(e.rootDirName?"/"+e.rootDirName:window.externalPublicPath)+" ")]),t("div",{staticClass:"fileTreeActionList"},[t("div",{staticClass:"btn",class:[e.fileTreeExpand?"el-icon-arrow-up":"el-icon-arrow-down"],on:{click:function(t){e.fileTreeExpand=!e.fileTreeExpand}}}),t("div",{staticClass:"btn el-icon-close",on:{click:function(t){e.fileTreeVisible=!1}}})])]),t("div",{staticClass:"fileTreeWrap"},[t("el-tree",{attrs:{props:e.fileTreeProps,load:e.loadFileTreeNode,"expand-on-click-node":!1,"node-key":"id",lazy:""},scopedSlots:e._u([{key:"default",fn:function({node:s,data:i}){return t("span",{staticClass:"customTreeNode"},[t("div",{staticClass:"treeNodeInfo"},[t("span",{staticClass:"treeNodeIcon iconfont",class:["file"===i.type?"iconwenjian":"icondakai"]}),t("span",{staticClass:"treeNodeName"},[e._v(e._s(s.label))])]),"file"===i.type?t("div",{staticClass:"treeNodeBtnList"},[i.enableEdit?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.editLocalFile(i)}}},[e._v("编辑")]):t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.importLocalFile(i)}}},[e._v("导入")])],1):e._e()])}}],null,!1,1744182902)})],1)]):e._e()]),t("div",{staticClass:"toolbarBlock",staticStyle:{"background-color":"burlywood"}},[t("div",{staticClass:"toolbarBtn",staticStyle:{color:"green"},on:{click:function(t){return e.$bus.$emit("showCaseNavigation")}}},[t("span",{staticClass:"icon iconfont icondaohang"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.caseNavigation")))])]),t("div",{staticClass:"toolbarBtn",on:{click:function(t){return e.$bus.$emit("showLog")}}},[t("span",{staticClass:"icon iconfont iconrizhi"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.log")))])]),t("div",{staticClass:"toolbarBtn",on:{click:e.statisticsFile}},[t("span",{staticClass:"icon iconfont icontongji"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.statistics")))])]),t("div",{staticClass:"toolbarBtn",on:{click:function(t){return e.$bus.$emit("showCollaborate")}}},[t("span",{staticClass:"icon iconfont iconxiezuoren"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.collaborate")))])])])]),t("NodeImage"),t("NodeHyperlink"),t("NodeIcon"),t("NodeNote"),t("NodeTag"),t("Export"),t("Import",{ref:"ImportRef",on:{sendData:e.handleData}}),t("JumptoCaseNavigation",{on:{sendData:e.handleData}}),t("AddCase",{on:{sendData:e.handleData}}),t("SelectPanel",{on:{sendData:e.handleData}}),t("Login",{on:{sendData:e.handleData}}),t("Collaborate"),t("JumptoLog"),t("el-dialog",{attrs:{"close-on-click-modal":!1,title:"另存为",visible:e.addDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.addDialogVisible=t}}},[t("div",[t("el-container",{staticStyle:{height:"450px",border:"1px solid #eee"}},[t("el-aside",{attrs:{width:"100%"}},[t("el-input",{attrs:{size:"small",placeholder:"输入关键字查询~"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-tree",{ref:"tree",attrs:{data:e.setTree,"node-key":"id","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent,"default-expanded-keys":e.defaultExpandKeys,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],1)],1),t("div",{staticStyle:{height:"5px"}}),t("el-button",{staticStyle:{"margin-left":"75%"},attrs:{size:"small",type:"success"},on:{click:e.savaAs}},[e._v("保存")]),t("br"),t("el-link",{attrs:{type:"success"}},[e._v("当前选中："+e._s(this.xuanzhong))])],1)],1)},n=[],r=(s("d9e2"),s("14d9"),function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"nodeImageDialog",attrs:{title:e.$t("nodeImage.title"),visible:e.dialogVisible,width:e.isMobile?"90%":"50%",top:e.isMobile?"20px":"15vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"title"},[e._v("方式一")]),t("ImgUpload",{ref:"ImgUpload",staticStyle:{"margin-bottom":"12px"},model:{value:e.img,callback:function(t){e.img=t},expression:"img"}}),t("div",{staticClass:"title"},[e._v("方式二")]),t("div",{staticClass:"inputBox"},[t("span",{staticClass:"label"},[e._v("请输入图片地址")]),t("el-input",{attrs:{size:"mini",placeholder:"http://xxx.com/xx.jpg"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.imgUrl,callback:function(t){e.imgUrl=t},expression:"imgUrl"}})],1),t("div",{staticClass:"title"},[e._v("可选")]),t("div",{staticClass:"inputBox"},[t("span",{staticClass:"label"},[e._v(e._s(e.$t("nodeImage.imgTitle")))]),t("el-input",{attrs:{size:"mini"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.imgTitle,callback:function(t){e.imgTitle=t},expression:"imgTitle"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("dialog.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("dialog.confirm")))])],1)],1)}),l=[],c=s("5aa9"),d=s("1e42"),h={name:"NodeImage",components:{ImgUpload:c["a"]},data(){return{dialogVisible:!1,img:"",imgUrl:"",imgTitle:"",activeNodes:null,isMobile:Object(d["V"])()}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeImage",this.handleShowNodeImage)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeImage",this.handleShowNodeImage)},methods:{handleNodeActive(...e){this.activeNodes=[...e[1]]},handleShowNodeImage(){if(this.reset(),this.activeNodes.length>0){let e=this.activeNodes[0],t=e.getData("image")||"";t&&(/^https?:\/\//.test(t)?this.imgUrl=t:this.img=t),this.imgTitle=e.getData("imageTitle")||""}this.dialogVisible=!0},cancel(){this.dialogVisible=!1,this.reset()},reset(){this.img="",this.imgTitle="",this.imgUrl=""},async confirm(){try{if(!this.img&&!this.imgUrl)return this.cancel(),void this.activeNodes.forEach(e=>{e.setImage(null)});let e=null,t="";this.img?(t=this.img,e=await this.$refs.ImgUpload.getSize()):this.imgUrl&&(t=this.imgUrl,e=await Object(d["D"])(t)),this.activeNodes.forEach(s=>{s.setImage({url:t||"none",title:this.imgTitle,width:e.width,height:e.height})}),this.cancel()}catch(e){console.log(e)}}}},u=h,m=(s("020e"),s("2877")),p=Object(m["a"])(u,r,l,!1,null,"3c012322",null),g=p.exports,f=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"nodeHyperlinkDialog",attrs:{title:e.$t("nodeHyperlink.title"),visible:e.dialogVisible,width:e.isMobile?"90%":"50%",top:e.isMobile?"20px":"15vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"item"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("nodeHyperlink.link")))]),t("el-input",{attrs:{size:"mini",placeholder:"http://xxxx.com/"},on:{blur:function(t){return e.handleUrl()}},nativeOn:{keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()}},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}},[t("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.protocol,callback:function(t){e.protocol=t},expression:"protocol"}},[t("el-option",{attrs:{label:"https",value:"https"}}),t("el-option",{attrs:{label:"http",value:"http"}}),t("el-option",{attrs:{label:"无",value:"none"}})],1)],1)],1),t("div",{staticClass:"item"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("nodeHyperlink.name")))]),t("el-input",{attrs:{size:"mini"},nativeOn:{keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()}},model:{value:e.linkTitle,callback:function(t){e.linkTitle=t},expression:"linkTitle"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("dialog.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("dialog.confirm")))])],1)])},b=[],v={name:"NodeHyperlink",data(){return{dialogVisible:!1,link:"",linkTitle:"",activeNodes:[],protocol:"https",isMobile:Object(d["V"])()}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeLink",this.handleShowNodeLink)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeLink",this.handleShowNodeLink)},methods:{handleNodeActive(...e){if(this.activeNodes=[...e[1]],this.activeNodes.length>0){let e=this.activeNodes[0];this.link=e.getData("hyperlink")||"",this.handleUrl(!0),this.linkTitle=e.getData("hyperlinkTitle")||""}else this.link="",this.linkTitle=""},removeProtocol(e){return e.replace(/^https?:\/\//,"")},handleUrl(e){const t=this.link.match(/^(https?):\/\//);t&&t[1]?this.protocol=t[1]:this.link?e&&(this.protocol="none"):this.protocol="https",this.link=this.removeProtocol(this.link)},handleShowNodeLink(){this.dialogVisible=!0},cancel(){this.dialogVisible=!1},confirm(){this.activeNodes.forEach(e=>{e.setHyperlink(("none"===this.protocol?"":this.protocol+"://")+this.link,this.linkTitle),this.cancel()})}}},C=v,w=(s("aad6"),Object(m["a"])(C,f,b,!1,null,"535cc6ff",null)),y=w.exports,_=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"nodeIconDialog",attrs:{title:e.$t("nodeIcon.title"),visible:e.dialogVisible,width:"500"},on:{"update:visible":function(t){e.dialogVisible=t}}},e._l(e.nodeIconList,(function(s){return t("div",{key:s.name,staticClass:"item"},[t("div",{staticClass:"title"},[e._v(e._s(s.name))]),t("div",{staticClass:"list"},e._l(s.list,(function(i){return t("div",{key:i.name,staticClass:"icon",class:{selected:e.iconList.includes(s.type+"_"+i.name)},domProps:{innerHTML:e._s(e.getHtml(i.icon))},on:{click:function(t){return e.setIcon(s.type,i.name)}}})})),0)])})),0)},k=[],x=s("723f"),S=s("d1f7"),$={name:"NodeIcon",data(){return{nodeIconList:[...x["b"],...S["a"]],dialogVisible:!1,iconList:[],activeNodes:[]}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeIcon",this.handleShowNodeIcon)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeIcon",this.handleShowNodeIcon)},methods:{handleNodeActive(...e){if(this.activeNodes=[...e[1]],this.activeNodes.length>0){let e=this.activeNodes[0];this.iconList=e.getData("icon")||[]}else this.iconList=[]},handleShowNodeIcon(){this.dialogVisible=!0},getHtml(e){return/^<svg/.test(e)?e:`<img src="${e}" />`},setIcon(e,t){let s=e+"_"+t,i=this.iconList.findIndex(e=>e===s);if(-1!==i)this.iconList.splice(i,1);else{let t=this.iconList.findIndex(t=>t.split("_")[0]===e);-1!==t?this.iconList.splice(t,1,s):this.iconList.push(s)}this.activeNodes.forEach(e=>{e.setIcon([...this.iconList])})}}},D=$,T=(s("90a8"),Object(m["a"])(D,_,k,!1,null,"b03ded8a",null)),N=T.exports,I=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"nodeNoteDialog",attrs:{title:e.$t("nodeNote.title"),visible:e.dialogVisible,width:e.isMobile?"90%":"50%",top:e.isMobile?"20px":"15vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{ref:"noteEditor",staticClass:"noteEditor",on:{keyup:function(e){e.stopPropagation()},keydown:function(e){e.stopPropagation()}}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("dialog.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("dialog.confirm")))])],1)])},M=[],L=s("5865"),O=(s("f513"),{name:"NodeNote",data(){return{dialogVisible:!1,note:"",activeNodes:[],editor:null,isMobile:Object(d["V"])()}},watch:{dialogVisible(e,t){!e&&t&&this.$bus.$emit("endTextEdit")}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeNote",this.handleShowNodeNote)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeNote",this.handleShowNodeNote)},methods:{handleNodeActive(...e){if(this.activeNodes=[...e[1]],this.activeNodes.length>0){let e=this.activeNodes[0];this.note=e.getData("note")||""}else this.note=""},handleShowNodeNote(){this.$bus.$emit("startTextEdit"),this.dialogVisible=!0,this.$nextTick(()=>{this.initEditor()})},initEditor(){this.editor||(this.editor=new L["a"]({el:this.$refs.noteEditor,height:"500px",initialEditType:"markdown",previewStyle:"vertical"})),this.editor.setMarkdown(this.note)},cancel(){this.dialogVisible=!1},confirm(){this.note=this.editor.getMarkdown(),this.activeNodes.forEach(e=>{e.setNote(this.note)}),this.cancel()}}}),E=O,A=(s("cd04"),Object(m["a"])(E,I,M,!1,null,"5e071e1a",null)),P=A.exports,F=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"nodeTagDialog",attrs:{title:e.$t("nodeTag.title"),visible:e.dialogVisible,width:e.isMobile?"90%":"70%",top:e.isMobile?"20px":"15vh",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("el-radio",{style:{backgroundColor:e.radioColors[4],color:"#ffffff"},attrs:{label:5,border:""}},[e._v("标题（必填）")]),t("el-radio",{style:{backgroundColor:e.radioColors[0],color:"#ffffff"},attrs:{label:1,border:""}},[e._v("用例（必填）")]),t("el-radio",{style:{backgroundColor:e.radioColors[2],color:"#ffffff"},attrs:{label:3,border:""}},[e._v("步骤（必填）")]),t("el-radio",{style:{backgroundColor:e.radioColors[1],color:"#ffffff"},attrs:{label:2,border:""}},[e._v("前置条件（选填）")]),t("el-radio",{style:{backgroundColor:e.radioColors[3],color:"#ffffff"},attrs:{label:4,border:""}},[e._v("预期（选填）")]),t("el-radio",{style:{backgroundColor:e.radioColors[7]},attrs:{label:8,border:""}},[e._v("不选（默认）")])],1),t("div",{staticClass:"tagList"},e._l(e.tagArr,(function(s,i){return t("div",{key:i,staticClass:"tagItem",style:{backgroundColor:e.generateColorByContent(s)}},[e._v(" 当前标签："+e._s(s)+" ")])})),0),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("dialog.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("dialog.confirm")))])],1)],1)},j=[],R={name:"NodeTag",data(){return{radio:8,radioColors:["#009900","#0000FF","#FF9900","#510DAB","#663300","#CC0000","#B300FF","#ffffff"],dialogVisible:!1,tagArr:[],tag:"",activeNodes:[],max:5,isMobile:Object(d["V"])()}},watch:{dialogVisible(e,t){!e&&t&&this.$bus.$emit("endTextEdit")}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeTag",this.handleShowNodeTag)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeTag",this.handleShowNodeTag)},methods:{generateColorByContent:d["A"],handleNodeActive(...e){if(this.activeNodes=[...e[1]],this.activeNodes.length>0){let e=this.activeNodes[0];this.tagArr=e.getData("tag")||[],"用例"==this.tagArr[0]?this.radio=1:"前置"==this.tagArr[0]?this.radio=2:"步骤"==this.tagArr[0]?this.radio=3:"预期"==this.tagArr[0]?this.radio=4:"标题"==this.tagArr[0]?this.radio=5:"优先级"==this.tagArr[0]?this.radio=6:"试用阶段"==this.tagArr[0]?this.radio=7:this.tagArr[0]}else this.tagArr=[],this.tag=""},handleShowNodeTag(){this.$bus.$emit("startTextEdit"),this.dialogVisible=!0},add(){this.tagArr.push(this.tag),this.tag=""},del(e){this.tagArr.splice(e,1)},cancel(){this.dialogVisible=!1},confirm(){this.activeNodes.forEach(e=>{"1"==this.radio?e.setTag(["用例"]):"2"==this.radio?e.setTag(["前置"]):"3"==this.radio?e.setTag(["步骤"]):"4"==this.radio?e.setTag(["预期"]):"5"==this.radio?e.setTag(["标题"]):"6"==this.radio?e.setTag(["优先级"]):"7"==this.radio?e.setTag(["试用阶段"]):"8"==this.radio&&e.setTag([])}),this.cancel()}}},z=R,B=(s("fd68"),Object(m["a"])(z,F,j,!1,null,"aca96578",null)),V=B.exports,U=function(){var e=this,t=e._self._c;return t("el-dialog",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"nodeExportDialog",attrs:{title:e.$t("export.title"),visible:e.dialogVisible,"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",width:e.isMobile?"90%":"50%",top:e.isMobile?"20px":"15vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"exportContainer",class:{isDark:e.isDark}},[t("div",{staticClass:"nameInputBox"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("export.filename")))]),t("el-input",{staticStyle:{"max-width":"300px"},attrs:{size:"mini"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),t("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:["smm","json"].includes(e.exportType),expression:"['smm', 'json'].includes(exportType)"}],staticStyle:{"margin-left":"12px"},model:{value:e.widthConfig,callback:function(t){e.widthConfig=t},expression:"widthConfig"}},[e._v(e._s(e.$t("export.include")))])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:["svg","png","pdf"].includes(e.exportType),expression:"['svg', 'png', 'pdf'].includes(exportType)"}],staticClass:"paddingInputBox"},[t("div",{staticClass:"paddingInputGroup"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("export.paddingX")))]),t("el-input",{staticStyle:{"max-width":"100px"},attrs:{size:"mini"},on:{change:e.onPaddingChange},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.paddingX,callback:function(t){e.paddingX=t},expression:"paddingX"}})],1),t("div",{staticClass:"paddingInputGroup"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("export.paddingY")))]),t("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini"},on:{change:e.onPaddingChange},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.paddingY,callback:function(t){e.paddingY=t},expression:"paddingY"}})],1),t("div",{staticClass:"paddingInputGroup"},[t("span",{staticClass:"name"},[e._v(e._s(this.$t("export.addFooterText")))]),t("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:e.$t("export.addFooterTextPlaceholder")},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.extraText,callback:function(t){e.extraText=t},expression:"extraText"}})],1),t("div",{staticClass:"paddingInputGroup"},[t("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:["png","pdf"].includes(e.exportType),expression:"['png', 'pdf'].includes(exportType)"}],model:{value:e.isTransparent,callback:function(t){e.isTransparent=t},expression:"isTransparent"}},[e._v(e._s(e.$t("export.isTransparent")))])],1)]),t("div",{staticClass:"downloadTypeList"},e._l(e.downTypeList,(function(s){return t("div",{key:s.type,staticClass:"downloadTypeItem",class:{active:e.exportType===s.type},on:{click:function(t){e.exportType=s.type}}},[t("div",{staticClass:"icon iconfont",class:[s.icon,s.type]}),t("div",{staticClass:"info"},[t("div",{staticClass:"name"},[e._v(e._s(s.name))]),t("div",{staticClass:"desc"},[e._v(e._s(s.desc))])])])})),0),t("div",{staticClass:"tip"},[e._v(e._s(e.$t("export.tips")))])]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("dialog.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("dialog.confirm")))])],1)])},H=[],W=s("2f62"),K=s("f121"),Y={name:"Export",data(){return{dialogVisible:!1,exportType:"smm",fileName:this.$t("export.defaultFileName"),widthConfig:!0,isTransparent:!1,loading:!1,loadingText:"",paddingX:10,paddingY:10,extraText:"",isMobile:Object(d["V"])()}},computed:{...Object(W["d"])({openNodeRichText:e=>e.localConfig.openNodeRichText,isDark:e=>e.localConfig.isDark}),downTypeList(){return K["h"][this.$i18n.locale]||K["h"].zh}},created(){this.$bus.$on("showExport",this.handleShowExport)},beforeDestroy(){this.$bus.$off("showExport",this.handleShowExport)},methods:{...Object(W["c"])(["setExtraTextOnExport"]),handleShowExport(){this.dialogVisible=!0},onPaddingChange(){this.$bus.$emit("paddingChange",{exportPaddingX:Number(this.paddingX),exportPaddingY:Number(this.paddingY)})},cancel(){this.dialogVisible=!1},confirm(){this.setExtraTextOnExport(this.extraText),"svg"===this.exportType?this.$bus.$emit("export",this.exportType,!0,this.fileName,"* {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n          }"):["smm","json"].includes(this.exportType)?this.$bus.$emit("export",this.exportType,!0,this.fileName,this.widthConfig):"png"===this.exportType||"pdf"===this.exportType?this.$bus.$emit("export",this.exportType,!0,this.fileName,this.isTransparent):this.$bus.$emit("export",this.exportType,!0,this.fileName),this.$notify.info({title:this.$t("export.notifyTitle"),message:this.$t("export.notifyMessage")}),this.cancel()}}},G=Y,X=(s("f0de"),Object(m["a"])(G,U,H,!1,null,"40a14c1f",null)),Z=X.exports,q=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"nodeImportDialog",attrs:{title:e.$t("import.title"),visible:e.dialogVisible,width:"450px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-upload",{ref:"upload",attrs:{action:"x","file-list":e.fileList,"auto-upload":!1,multiple:!1,"on-change":e.onChange,limit:1,"on-exceed":e.onExceed}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("import.selectFile")))]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" "+e._s(e.$t("import.supportFile"))+" ")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v(e._s(e.$t("dialog.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.$t("dialog.confirm")))])],1)],1)},J=[],Q=s("ad8c"),ee=s("0908"),te=s("ed08"),se=s("25ca"),ie=(s("4744"),s("7fbf")),ae={inject:["reload"],name:"Import",data(){return{dialogVisible:!1,fileList:[],exportFrom:{}}},watch:{dialogVisible(e,t){!e&&t&&(this.fileList=[])}},created(){this.$bus.$on("showImport",this.handleShowImport),this.$bus.$on("handle_file_url",this.handleFileURL)},beforeDestroy(){this.$bus.$off("showImport",this.handleShowImport),this.$bus.$off("handle_file_url",this.handleFileURL)},methods:{saveLocalFile(){Object(ie["m"])({content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA"),caseid:window.sessionStorage.getItem("caseid"),name:window.sessionStorage.getItem("name"),switch:!0}).then(e=>{}).catch(e=>{})},handleShowImport(){this.dialogVisible=!0},async handleFileURL(){try{const e=this.$route.query.fileURL;if(!e)return;const t=/\.(smm|json|xmind|md|xlsx)$/.exec(e);if(!t)return;const s=t[1],i=await fetch(e),a=await i.blob(),o={raw:a};"smm"===s||"json"===s?this.handleSmm(o):"xmind"===s?this.handleXmind(o):"xlsx"===s?this.handleExcel(o):"md"===s&&this.handleMd(o)}catch(e){console.log(e)}},onChange(e){let t=/\.(smm|xmind|json|xlsx|md)$/;t.test(e.name)?this.fileList.push(e):(this.$message.error("请选择.smm、.json、.xmind、.xlsx、.md文件"),this.fileList=[])},onExceed(){this.$message.error("最多只能选择一个文件")},cancel(){this.dialogVisible=!1},confirm(){if(this.fileList.length<=0)return this.$message.error("请选择要导入的文件");this.$store.commit("setIsHandleLocalFile",!1);let e=this.fileList[0];/\.(smm|json)$/.test(e.name)?this.handleSmm(e):/\.xmind$/.test(e.name)?this.handleXmind(e):/\.xlsx$/.test(e.name)?this.handleExcel(e):/\.md$/.test(e.name)&&this.handleMd(e),this.cancel()},handleSmm(e){let t=new FileReader;t.readAsText(e.raw),t.onload=e=>{try{let t=JSON.parse(e.target.result);if("object"!==typeof t)throw new Error(this.$t("import.fileContentError"));this.$bus.$emit("setData",t),this.$message.success(this.$t("import.importSuccess")),this.reload()}catch(t){console.log(t),this.$message.error(this.$t("import.fileParsingFailed"))}},window.sessionStorage.setItem("import","import"),window.sessionStorage.removeItem("caseid");var s="TMIND"+Date.now();sessionStorage.setItem("caseid",s),sessionStorage.setItem("name",e.raw.name),sessionStorage.setItem("switch",!0),sessionStorage.setItem("switch","True"),window.sessionStorage.removeItem("delete"),this.$emit("sendData",{caseid:s,name:e.raw.name,authority:"读取",creter:window.sessionStorage.getItem("username")}),this.$bus.$emit("closePanelDialog"),window.sessionStorage.setItem("closePanelDialog","false"),this.saveLocalFile()},async handleXmind(e){try{let t=await Q["a"].parseXmindFile(e.raw);this.$bus.$emit("setData",t),this.$message.success(this.$t("import.importSuccess"))}catch(s){console.log(s),this.$message.error(this.$t("import.fileParsingFailed"))}window.sessionStorage.setItem("import","import"),window.sessionStorage.removeItem("caseid");var t="TMIND"+Date.now();sessionStorage.setItem("caseid",t),sessionStorage.setItem("name",e.raw.name),sessionStorage.setItem("switch",!0),window.sessionStorage.removeItem("delete"),sessionStorage.setItem("switch","True"),this.$emit("sendData",{caseid:t,name:e.raw.name,authority:"读取",creter:window.sessionStorage.getItem("username")}),this.$bus.$emit("closePanelDialog"),window.sessionStorage.setItem("closePanelDialog","false"),this.saveLocalFile(),this.reload()},async handleExcel(e){try{const t=Object(se["a"])(await Object(te["b"])(e.raw)),s=se["b"].sheet_to_json(t.Sheets[t.SheetNames[0]],{header:1});if(s.length<=0)return;let i=0;s.forEach(e=>{e.length>i&&(i=e.length)});let a=[],o=e=>{a[e]||(a[e]=[]);for(let t=0;t<s.length;t++)if(s[t][e]){let i={data:{text:s[t][e]},children:[],_row:t};a[e].push(i)}e<i-1&&o(e+1)};o(0);let n=(e,t)=>{for(let s=e.length-1;s>=0;s--)if(t>=e[s]._row)return e[s]};for(let e=1;e<a.length;e++){let t=a[e];for(let s=0;s<t.length;s++){let i=t[s],o=n(a[e-1],i._row);o&&o.children.push(i)}}this.$bus.$emit("setData",a[0][0]),this.$message.success(this.$t("import.importSuccess"))}catch(s){console.log(s),this.$message.error(this.$t("import.fileParsingFailed"))}window.sessionStorage.setItem("import","import"),window.sessionStorage.removeItem("caseid");var t="TMIND"+Date.now();sessionStorage.setItem("caseid",t),sessionStorage.setItem("name",e.raw.name),sessionStorage.setItem("switch",!0),window.sessionStorage.removeItem("delete"),sessionStorage.setItem("switch","True"),this.$emit("sendData",{caseid:t,name:e.raw.name,authority:"读取",creter:window.sessionStorage.getItem("username")}),this.$bus.$emit("closePanelDialog"),window.sessionStorage.setItem("closePanelDialog","false"),this.saveLocalFile(),this.reload()},async handleMd(e){let t=new FileReader;t.readAsText(e.raw),t.onload=async e=>{try{let t=await ee["a"].transformMarkdownTo(e.target.result);this.$bus.$emit("setData",t),this.$message.success(this.$t("import.importSuccess"))}catch(t){console.log(t),this.$message.error(this.$t("import.fileParsingFailed"))}},window.sessionStorage.setItem("import","import"),window.sessionStorage.removeItem("caseid");var s="TMIND"+Date.now();sessionStorage.setItem("caseid",s),sessionStorage.setItem("name",e.raw.name),sessionStorage.setItem("switch",!0),window.sessionStorage.removeItem("delete"),sessionStorage.setItem("switch","True"),this.$emit("sendData",{caseid:s,name:e.raw.name,authority:"读取",creter:window.sessionStorage.getItem("username")}),this.$bus.$emit("closePanelDialog"),window.sessionStorage.setItem("closePanelDialog","false"),this.saveLocalFile(),this.reload()}}},oe=ae,ne=(s("7d00"),Object(m["a"])(oe,q,J,!1,null,"61ee1e92",null)),re=ne.exports,le=s("5c96"),ce=s("5848"),de=s("365c"),he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"toolbarNodeBtnList",class:[e.dir,{isDark:e.isDark}]},[e._l(e.list,(function(s){return["back"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.readonly||e.backEnd},on:{click:function(t){return e.$bus.$emit("execCommand","BACK")}}},[t("span",{staticClass:"icon iconfont iconhoutui-shi"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.undo")))])]):e._e(),"forward"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.readonly||e.forwardEnd},on:{click:function(t){return e.$bus.$emit("execCommand","FORWARD")}}},[t("span",{staticClass:"icon iconfont iconqianjin1"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.redo")))])]):e._e(),"siblingNode"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasRoot||e.hasGeneralization},on:{click:function(t){return e.$bus.$emit("execCommand","INSERT_NODE")}}},[t("span",{staticClass:"icon iconfont iconjiedian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.insertSiblingNode")))])]):e._e(),"childNode"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasGeneralization},on:{click:function(t){return e.$bus.$emit("execCommand","INSERT_CHILD_NODE")}}},[t("span",{staticClass:"icon iconfont icontianjiazijiedian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.insertChildNode")))])]):e._e(),"deleteNode"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0},on:{click:function(t){return e.$bus.$emit("execCommand","REMOVE_NODE")}}},[t("span",{staticClass:"icon iconfont iconshanchu"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.deleteNode")))])]):e._e(),"image"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0},on:{click:function(t){return e.$bus.$emit("showNodeImage")}}},[t("span",{staticClass:"icon iconfont iconimage"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.image")))])]):e._e(),"icon"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0},on:{click:e.showNodeIcon}},[t("span",{staticClass:"icon iconfont iconxiaolian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.icon")))])]):e._e(),"link"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0},on:{click:function(t){return e.$bus.$emit("showNodeLink")}}},[t("span",{staticClass:"icon iconfont iconchaolianjie"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.link")))])]):e._e(),"note"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0},on:{click:function(t){return e.$bus.$emit("showNodeNote")}}},[t("span",{staticClass:"icon iconfont iconflow-Mark"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.note")))])]):e._e(),"summary"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasRoot||e.hasGeneralization},on:{click:function(t){return e.$bus.$emit("execCommand","ADD_GENERALIZATION")}}},[t("span",{staticClass:"icon iconfont icongaikuozonglan"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.summary")))])]):e._e(),"associativeLine"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasGeneralization},on:{click:function(t){return e.$bus.$emit("createAssociativeLine")}}},[t("span",{staticClass:"icon iconfont iconlianjiexian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.associativeLine")))])]):e._e(),"attachment"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasGeneralization},on:{click:e.selectAttachmentFile}},[t("span",{staticClass:"icon iconfont iconfujian"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.attachment")))])]):e._e(),"outerFrame"===s?t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasGeneralization},on:{click:function(t){return e.$bus.$emit("execCommand","ADD_OUTER_FRAME")}}},[t("span",{staticClass:"icon iconfont iconwaikuang"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("toolbar.outerFrame")))])]):e._e(),"annotation"===s&&e.supportMark?t("NodeAnnotationBtn",{attrs:{isDark:e.isDark,dir:e.dir},on:{setAnnotation:e.onSetAnnotation}}):e._e()]}))],2)},ue=[],me=function(){var e=this,t=e._self._c;return t("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click"}},[t("div",{staticClass:"annotationConfigBox",class:{isDark:e.isDark}},[t("div",{staticClass:"annotationConfigItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("annotation.show")))]),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.onChange},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1),e.show?[t("div",{staticClass:"annotationConfigItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("annotation.type")))]),t("el-select",{attrs:{size:"mini"},on:{change:e.onChange},model:{value:e.annotationConfig.type,callback:function(t){e.$set(e.annotationConfig,"type",t)},expression:"annotationConfig.type"}},e._l(e.annotationTypeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"annotationConfigItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("annotation.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"block",style:{backgroundColor:e.annotationConfig.color}}),t("el-popover",{ref:"popover",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.annotationConfig.color},on:{change:e.onColorChange}})],1)],1),t("div",{staticClass:"annotationConfigItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("annotation.lineWidth")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:e.onChange},model:{value:e.annotationConfig.strokeWidth,callback:function(t){e.$set(e.annotationConfig,"strokeWidth",t)},expression:"annotationConfig.strokeWidth"}},e._l(e.lineWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1),t("div",{staticClass:"annotationConfigItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("annotation.padding")))]),t("el-input-number",{attrs:{step:5,size:"mini"},on:{change:e.onChange},model:{value:e.annotationConfig.padding,callback:function(t){e.$set(e.annotationConfig,"padding",t)},expression:"annotationConfig.padding"}})],1),t("div",{staticClass:"annotationConfigItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("annotation.animate")))]),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.onChange},model:{value:e.annotationConfig.animate,callback:function(t){e.$set(e.annotationConfig,"animate",t)},expression:"annotationConfig.animate"}})],1)]:e._e()],2),t("div",{staticClass:"toolbarBtn",class:{disabled:e.activeNodes.length<=0||e.hasGeneralization},style:{marginLeft:"v"===e.dir?"0px":"20px",marginTop:"v"===e.dir?"10px":"0px"},attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"icon iconfont iconhighlight"}),t("span",{staticClass:"text"},[e._v(e._s(e.$t("annotation.mark")))])])])},pe=[],ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"colorContainer",class:{isDark:e.isDark}},[t("div",{staticClass:"colorList"},e._l(e.colorList,(function(s){return t("span",{key:s,staticClass:"colorItem iconfont",class:{icontouming:"transparent"===s},style:{backgroundColor:s},on:{click:function(t){return e.clickColorItem(s)}}})})),0),t("div",{staticClass:"moreColor"},[t("span",[e._v(e._s(e.$t("color.moreColor")))]),t("el-color-picker",{attrs:{size:"mini","show-alpha":""},on:{change:e.changeColor},model:{value:e.selectColor,callback:function(t){e.selectColor=t},expression:"selectColor"}})],1)])},fe=[],be={name:"Color",props:{color:{type:String,default:""}},data(){return{colorList:K["g"],selectColor:""}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark})},watch:{color(){this.selectColor=this.color}},created(){this.selectColor=this.color},methods:{clickColorItem(e){this.$emit("change",e)},changeColor(){this.$emit("change",this.selectColor)}}},ve=be,Ce=(s("d4bd"),Object(m["a"])(ve,ge,fe,!1,null,"2f2ebad6",null)),we=Ce.exports;const ye={type:"circle",color:"",strokeWidth:1,animate:!0,padding:20};var _e={components:{Color:we},props:{isDark:{type:Boolean,default:!1},dir:{type:String,default:""}},data(){return{lineWidthList:K["o"].slice(1),activeNodes:[],show:!1,annotationConfig:{...ye},annotationTypeList:[{label:"圆",value:"circle"},{label:"边框",value:"box"},{label:"高亮",value:"highlight"},{label:"下划线",value:"underline"},{label:"删除线",value:"strike-through"},{label:"叉",value:"crossed-off"}]}},computed:{hasGeneralization(){return-1!==this.activeNodes.findIndex(e=>e.isGeneralization)}},mounted(){this.$bus.$on("node_active",this.onNodeActive)},beforeDestroy(){this.$bus.$off("node_active",this.onNodeActive)},methods:{onNodeActive(...e){this.activeNodes=[...e[1]];const t=this.activeNodes[0];if(t){const e=t.getData("notation");if(e){const{show:t,config:s}=e;this.show=t,this.annotationConfig={...ye,...s}}else this.reset()}else this.reset()},reset(){this.show=!1,this.annotationConfig={...ye}},onChange(){this.$emit("setAnnotation",this.show,{...this.annotationConfig})},onColorChange(e){this.annotationConfig.color=e,this.onChange()}}},ke=_e,xe=(s("8179"),Object(m["a"])(ke,me,pe,!1,null,"58049480",null)),Se=xe.exports,$e={components:{NodeAnnotationBtn:Se},props:{dir:{type:String,default:"h"},list:{type:Array,default(){return[]}}},data(){return{activeNodes:[],backEnd:!0,forwardEnd:!0,readonly:!1,isFullDataFile:!1,timer:null,isInPainter:!1}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,supportMark:e=>e.supportMark}),hasRoot(){return-1!==this.activeNodes.findIndex(e=>e.isRoot)},hasGeneralization(){return-1!==this.activeNodes.findIndex(e=>e.isGeneralization)}},created(){this.$bus.$on("mode_change",this.onModeChange),this.$bus.$on("node_active",this.onNodeActive),this.$bus.$on("back_forward",this.onBackForward),this.$bus.$on("painter_start",this.onPainterStart),this.$bus.$on("painter_end",this.onPainterEnd)},beforeDestroy(){this.$bus.$off("mode_change",this.onModeChange),this.$bus.$off("node_active",this.onNodeActive),this.$bus.$off("back_forward",this.onBackForward),this.$bus.$off("painter_start",this.onPainterStart),this.$bus.$off("painter_end",this.onPainterEnd)},methods:{...Object(W["c"])(["setActiveSidebar"]),onModeChange(e){this.readonly="readonly"===e},onNodeActive(...e){this.activeNodes=[...e[1]]},onBackForward(e,t){this.backEnd=e<=0,this.forwardEnd=e>=t-1},onPainterStart(){this.isInPainter=!0},onPainterEnd(){this.isInPainter=!1},showNodeIcon(){this.$bus.$emit("close_node_icon_toolbar"),this.setActiveSidebar("nodeIconSidebar")},showFormula(){this.setActiveSidebar("formulaSidebar")},selectAttachmentFile(){this.$bus.$emit("selectAttachment",this.activeNodes)},onSetAnnotation(...e){this.$bus.$emit("execCommand","SET_NOTATION",this.activeNodes,...e)}}},De=$e,Te=(s("395e"),Object(m["a"])(De,he,ue,!1,null,null,null)),Ne=Te.exports,Ie=function(){var e=this,t=e._self._c;return t("div")},Me=[],Le={data(){return{}},beforeDestroy(){this.$bus.$off("showLog",this.handleOpenPanelDialog)},created(){this.$bus.$on("showLog",this.handleOpenPanelDialog),this.$bus.$on("show-login-dialog",()=>{this.logDialogVisible=!1})},watch:{},methods:{handleOpenPanelDialog(){this.currentPage=1,this.caseid="",this.$router.push("/logs")}},mounted(){}},Oe=Le,Ee=Object(m["a"])(Oe,Ie,Me,!1,null,null,null),Ae=Ee.exports,Pe=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"最近用例文件","close-on-click-modal":!1,visible:e.centerDialogVisible,width:"60%",center:"","show-close":!1},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[t("el-input",{staticStyle:{width:"50%","margin-left":"15%"},attrs:{placeholder:"请输入用例名称查找",clearable:""},on:{clear:function(t){return e.getRecentUseCasesList()}},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.getRecentUseCasesList()}}},[e._v("查找")]),t("div",{staticClass:"home"},[e._l(e.files,(function(s,i){return t("div",{key:i,staticClass:"file-item"},[t("div",{staticClass:"item",on:{click:function(t){return e.clickToPage(s)}}},[t("div",{staticClass:"card-panel-icon-wrapper",style:{backgroundColor:e.getRandomColor(),borderRadius:"14px"}},[t("span",{staticClass:"icon iconfont icondaohang"})]),t("div",{staticClass:"item__content"},[t("span",{staticClass:"title"},[e._v("用例名称："+e._s(s.name))]),t("span",{staticClass:"caseid"},[e._v("用例ID："+e._s(s.caseid))]),t("span",{staticClass:"creter"},[e._v("创建人："+e._s(s.creter))]),t("span",{class:["switch",{red:"False"===s.switch,green:"True"===s.switch}]},[e._v(" 权限："+e._s("True"===s.switch?"读写":"仅读")+" ")]),t("span",{staticClass:"create_time"},[e._v("更新时间："+e._s(e.formatTime(s.create_time)))])])])])})),t("div",{staticClass:"file-item"},[t("div",{staticClass:"item",on:{click:function(t){return e.newCase()}}},[t("i",{staticClass:"el-icon-plus avatar-uploader-icon"},[e._v("新增用例")])])]),t("div",{staticClass:"file-item"},[t("div",{staticClass:"item",on:{click:function(t){return e.importCase()}}},[t("div",{staticClass:"item__content"},[t("i",{staticClass:"icon iconfont icondaoru avatar-uploader-icon"},[e._v("导入用例")])])])])],2)],1)],1)},Fe=[],je=s("6a66"),Re={inject:["reload"],name:"Home",data(){return{authority:"",name:"",url:"",centerDialogVisible:!1,files:[]}},created(){this.$bus.$on("closePanelDialog",()=>{this.centerDialogVisible=!1}),this.$bus.$on("openPanelDialog",this.handleOpenPanelDialog),this.$bus.$on("show-login-dialog",()=>{this.centerDialogVisible=!1}),"false"==window.sessionStorage.getItem("closePanelDialog")?this.centerDialogVisible=!1:"true"==window.sessionStorage.getItem("closePanelDialog")?(this.getRecentUseCasesList(),this.centerDialogVisible=!0):this.centerDialogVisible=!1},beforeDestroy(){this.$bus.$off("openPanelDialog",this.handleOpenPanelDialog)},methods:{handleOpenPanelDialog(){this.getRecentUseCasesList(),this.centerDialogVisible=!0},formatTime(e){let t=new Date(e),s=t.getFullYear(),i=("0"+(t.getMonth()+1)).slice(-2),a=("0"+t.getDate()).slice(-2),o=("0"+t.getHours()).slice(-2),n=("0"+t.getMinutes()).slice(-2),r=("0"+t.getSeconds()).slice(-2);return`${s}-${i}-${a} ${o}:${n}:${r}`},getRecentUseCasesList(){Object(ie["l"])({page:this.currentPage,type:4,name:this.name}).then(e=>{this.files=e.results})},clickToPage(e){Object(ie["d"])({caseid:e.caseid,latest:!0}).then(t=>{t.success?(this.$router.push("/?caseid="+e.caseid),this.mindMapData=JSON.parse(t.content),this.centerDialogVisible=!1,"True"==e.switch?(this.authority="读写",sessionStorage.setItem("switch","True")):(this.authority="仅读",sessionStorage.setItem("switch","False")),this.$emit("sendData",{caseid:e.caseid,name:e.name,authority:"读写",creter:e.creter}),sessionStorage.setItem("caseid",e.caseid),sessionStorage.setItem("creter",e.creter),this.$bus.$emit("setData",JSON.parse(t.content)),window.sessionStorage.setItem("closePanelDialog","false"),window.sessionStorage.removeItem("delete"),this.reload()):this.$message.error("打开失败，请稍后再试~")}).catch(e=>{})},getRandomColor(){return"#"+Math.floor(16777215*Math.random()).toString(16)},newCase(){this.$bus.$emit("showAddcase")},importCase(){this.$bus.$emit("showImport")},getEventDay(){window.open("https://www.baidu.com/","_blank")}}},ze=Re,Be=(s("e3a0"),Object(m["a"])(ze,Pe,Fe,!1,null,"2b91ea1c",null)),Ve=Be.exports,Ue=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,visible:e.loginDialogVisible,center:""},on:{"update:visible":function(t){e.loginDialogVisible=t}}},[t("div",{staticClass:"transparent-background"},[t("div",{staticClass:"main-box"},[t("div",{class:["container","container-login",{"is-txl is-z200":e.isLogin}]},[t("form",{attrs:{model:e.loginForm}},[t("h2",{staticClass:"title"},[e._v("欢迎登录")]),t("span",{staticClass:"text",staticStyle:{color:"black"}},[e._v("请输入用户和密码登录~")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.username,expression:"loginForm.username"}],staticClass:"form__input",attrs:{type:"text",placeholder:"用户"},domProps:{value:e.loginForm.username},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"username",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],staticClass:"form__input",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}}),t("div",{staticClass:"primary-btn",on:{click:e.login}},[e._v("立即登录")])])]),t("div",{class:["container","container-register",{"is-txl":e.isLogin}]},[t("form",[t("h2",{staticClass:"title"},[e._v("创建账号")]),t("span",{staticClass:"text",staticStyle:{color:"black"}},[e._v("用户建议使用工号注册~")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.username,expression:"registerForm.username"}],staticClass:"form__input",attrs:{maxlength:"10",type:"text",placeholder:"用户"},domProps:{value:e.registerForm.username},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"username",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.password,expression:"registerForm.password"}],staticClass:"form__input",attrs:{maxlength:"20",type:"password",placeholder:"密码"},domProps:{value:e.registerForm.password},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"password",t.target.value)}}}),t("div",{staticClass:"primary-btn",on:{click:e.register}},[e._v("立即注册")])])]),t("div",{class:["switch",{login:e.isLogin}]},[t("div",{staticClass:"switch__circle"}),t("div",{staticClass:"switch__circle switch__circle_top"}),t("div",{staticClass:"switch__container"},[t("h2",[e._v(e._s(e.isLogin?"注册账号 ":"Tmind欢迎你~"))]),t("p",{staticStyle:{color:"black"}},[e._v(" "+e._s(e.isLogin?"若还没账号，下面按钮快速注册~":"格力电商测试用例管理系统~")+" ")]),t("div",{staticClass:"primary-btn",on:{click:function(t){e.isLogin=!e.isLogin}}},[e._v(" "+e._s(e.isLogin?"立即注册":"立即登录")+" ")])])])])])])],1)},He=[],We=s("c24f"),Ke={components:{},data(){return{loginDialogVisible:!1,isLogin:!0,loginForm:{username:"",password:""},registerForm:{username:"",email:"",password:""}}},created(){"false"!=sessionStorage.getItem("loginDialogVisible")?this.loginDialogVisible=!0:this.loginDialogVisible=!1,this.$bus.$on("show-login-dialog",()=>{this.loginDialogVisible=!0,sessionStorage.clear()})},watch:{filterText(e){this.$refs.tree.filter(e)}},methods:{login(){if(""==this.loginForm.username)this.$message.error({message:"请输入用户~",center:!0});else if(""==this.loginForm.password)this.$message.error({message:"请输入密码~",center:!0});else{Object(We["e"])(this.loginForm).then(e=>{e.success?(sessionStorage.setItem("username",this.loginForm.username),sessionStorage.setItem("token",e.token),sessionStorage.setItem("loginDialogVisible",!1),this.loginDialogVisible=!1,this.$bus.$emit("openPanelDialog"),window.sessionStorage.setItem("closePanelDialog","true"),this.$router.push("/?selectPanel")):this.$message.error({message:"抱歉，账号或密码错误~",center:!0})})}},register(){if(""==this.registerForm.username||void 0==this.registerForm.username)this.$message.error({message:"请输入用户~",center:!0});else if(""==this.registerForm.password||void 0==this.registerForm.password)this.$message.error({message:"请输入密码~",center:!0});else{Object(We["f"])(this.registerForm).then(e=>{if(e.success){Object(We["e"])(this.registerForm).then(e=>{sessionStorage.setItem("username",this.registerForm.username),sessionStorage.setItem("token",e.token),sessionStorage.setItem("loginDialogVisible",!1),this.loginDialogVisible=!1,this.$bus.$emit("openPanelDialog"),window.sessionStorage.setItem("closePanelDialog","true"),this.$router.push("/?selectPanel")})}else this.$message.error({message:e.msg,center:!0})})}}},mounted(){}},Ye=Ke,Ge=(s("efd7"),Object(m["a"])(Ye,Ue,He,!1,null,"2ec4bcb0",null)),Xe=Ge.exports,Ze=function(){var e=this,t=e._self._c;return t("div",[t("el-drawer",{attrs:{"with-header":!1,visible:e.personalcenter,direction:"ltr",size:"25%"},on:{"update:visible":function(t){e.personalcenter=t}}},[t("el-divider",[t("i",{staticClass:"el-icon-user"})]),t("el-descriptions",{staticStyle:{"margin-left":"5%"},attrs:{title:"个人基础信息"}},[t("template",{slot:"extra"},[t("el-button",{attrs:{type:"warning",size:"small"},on:{click:e.logout}},[e._v("退出")])],1),t("el-descriptions-item",{attrs:{label:"用户名",span:2}},[e._v(e._s(this.username))]),t("el-descriptions-item",{attrs:{label:"密码"}},[t("el-tag",{attrs:{size:"small"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("修改")])],1)],2),t("el-button",{staticStyle:{width:"100%"},attrs:{plain:"",icon:"el-icon-circle-plus",type:"success"},on:{click:function(t){e.AddLabelDialogVisible=!0}}},[e._v("新建分组")]),t("el-table",{attrs:{data:e.lableData.results,border:""}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{property:"name",label:"名称"}}),t("el-table-column",{attrs:{property:"num",label:"人数数量",width:"80",align:"center"}}),t("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"danger",size:"mini",circle:""},on:{click:function(t){return e.remove(s.row)}}},[e._v("移除")]),t("el-button",{attrs:{type:"success",size:"mini",circle:""},on:{click:function(t){return e.addMembers(s.row)}}},[e._v("添加")]),t("el-button",{attrs:{type:"primary",size:"mini",circle:""},on:{click:function(t){return e.lookMembers(s.row)}}},[e._v("查看")])]}}])})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.lableData.count,expression:"lableData.count !== 0"}],attrs:{"page-size":20,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.lableData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}})],1),t("el-dialog",{attrs:{title:"新建分组",visible:e.AddLabelDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.AddLabelDialogVisible=t}}},[t("el-input",{attrs:{placeholder:"请输入分组名称",maxlength:"20"},on:{input:e.labelhandleInput},model:{value:e.labelname,callback:function(t){e.labelname=t},expression:"labelname"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.AddLabelDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:!e.isButtonEnabled},on:{click:e.addLabel}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"添加人员",visible:e.AddMembersDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.AddMembersDialogVisible=t}}},[t("el-input",{staticStyle:{width:"50%","margin-left":"1px"},attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:function(t){return e.serchAddUser()}},model:{value:e.addSharedUsers,callback:function(t){e.addSharedUsers="string"===typeof t?t.trim():t},expression:"addSharedUsers"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.serchAddUser()}}},[e._v("查询")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData.results},on:{"selection-change":e.handleSelectionChange_add}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"id",label:"ID"}}),t("el-table-column",{attrs:{prop:"username",label:"姓名",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.membersData.count,expression:"membersData.count !== 0"}],attrs:{"page-size":20,background:"","current-page":e.addcurrentPage,layout:"total, prev, pager, next, jumper",total:e.membersData.count},on:{"current-change":e.handleCurrentChange3,"update:currentPage":function(t){e.addcurrentPage=t},"update:current-page":function(t){e.addcurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.AddMembersDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitData}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"移除人员",visible:e.RemoveMembersDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.RemoveMembersDialogVisible=t}}},[t("el-input",{staticStyle:{width:"50%","margin-left":"1px"},attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:function(t){return e.serchremoveUser()}},model:{value:e.removeSharedUsers,callback:function(t){e.removeSharedUsers="string"===typeof t?t.trim():t},expression:"removeSharedUsers"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.serchremoveUser()}}},[e._v("查询")]),t("br"),t("el-link",{attrs:{type:"danger"},on:{click:e.removeMembers}},[e._v("批量移除")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData.results},on:{"selection-change":e.handleSelectionChange_remove}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{prop:"id",label:"ID"}}),t("el-table-column",{attrs:{prop:"username",label:"姓名",align:"center"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.removeMembersId(s.row)}}},[e._v("移除")])]}}])})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.membersData.count,expression:"membersData.count !== 0"}],attrs:{"page-size":20,background:"","current-page":e.removecurrentPage,layout:"total, prev, pager, next, jumper",total:e.membersData.count},on:{"current-change":e.handleCurrentChange4,"update:currentPage":function(t){e.removecurrentPage=t},"update:current-page":function(t){e.removecurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.RemoveMembersDialogVisible=!1}}},[e._v("取 消")])],1)],1),t("el-dialog",{attrs:{title:"查看分组人员",visible:e.LookMembersDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.LookMembersDialogVisible=t}}},[t("el-input",{staticStyle:{width:"50%","margin-left":"1px"},attrs:{placeholder:"请输入姓名",clearable:""},on:{clear:function(t){return e.serchremoveUser()}},model:{value:e.removeSharedUsers,callback:function(t){e.removeSharedUsers="string"===typeof t?t.trim():t},expression:"removeSharedUsers"}}),t("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-search",type:"success",plain:""},on:{click:function(t){return e.serchremoveUser()}}},[e._v("查询")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData.results}},[t("el-table-column",{attrs:{prop:"id",label:"ID"}}),t("el-table-column",{staticStyle:{width:"100%"},attrs:{prop:"username",label:"姓名",align:"center"}})],1),t("div",{staticStyle:{height:"25px"}}),t("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:7}},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.membersData.count,expression:"membersData.count !== 0"}],attrs:{"page-size":20,background:"","current-page":e.lookcurrentPage,layout:"total, prev, pager, next, jumper",total:e.membersData.count},on:{"current-change":e.handleCurrentChange2,"update:currentPage":function(t){e.lookcurrentPage=t},"update:current-page":function(t){e.lookcurrentPage=t}}})],1),t("div",{staticStyle:{height:"50px"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.LookMembersDialogVisible=!1}}},[e._v("取 消")])],1)],1),t("el-dialog",{attrs:{title:"修改密码",visible:e.centerDialogVisible,width:"20%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[t("el-input",{attrs:{type:"password",placeholder:"请输入新密码",maxlength:"20"},on:{input:e.handleInput},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("div",{staticStyle:{height:"5px"}}),t("el-input",{attrs:{type:"password",placeholder:"请输入确定密码",maxlength:"20"},on:{input:e.handleInput},model:{value:e.repassword,callback:function(t){e.repassword=t},expression:"repassword"}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",disabled:!e.isButtonEnabled},on:{click:e.editMembers}},[e._v("确 定")])],1)],1)],1)},qe=[],Je=s("34cd"),Qe={inject:["reload"],components:{},data(){return{addSharedUsers:"",removeSharedUsers:"",centerDialogVisible:!1,password:"",repassword:"",isButtonEnabled:!1,AddMembersDialogVisible:!1,RemoveMembersDialogVisible:!1,LookMembersDialogVisible:!1,AddLabelDialogVisible:!1,adduser:"",username:sessionStorage.getItem("username"),personalcenter:!1,dialog:!1,loading:!1,lableData:[],currentPage:1,addcurrentPage:1,lookcurrentPage:1,removecurrentPage:1,labelname:"",membersData:[],userid:"",addmultipleSelection:[],removemultipleSelection:[],labelid:""}},beforeDestroy(){this.$bus.$off("showCollaborate",this.handleOpenPanelDialog)},created(){this.$bus.$on("showCollaborate",this.handleOpenPanelDialog),this.$bus.$on("show-login-dialog",()=>{this.personalcenter=!1})},watch:{},methods:{handleOpenPanelDialog(){je["a"].$emit("demo","readonly"),je["a"].$emit("demo","edit"),this.personalcenter=!0,this.username=sessionStorage.getItem("username"),this.getLabelList()},handleSelectionChange_add(e){this.addmultipleSelection=e},handleSelectionChange_remove(e){this.removemultipleSelection=e},submitData(){if(""!=this.addmultipleSelection){Object(Je["b"])({userid:this.userid,userdata:this.addmultipleSelection}).then(e=>{e.success?(this.getLabelList(),this.AddMembersDialogVisible=!1,this.$message.success({message:"添加成功~",type:"success",center:!0})):this.$message.error({message:e.msg,type:"success",center:!0})}).catch(e=>{this.$message.error({message:"添加失败，稍后再试~",type:"success",center:!0})})}else this.$message.error({message:"请勾选添加人员",type:"success",center:!0})},removeMembersId(e){Object(Je["c"])({userid:e.id,labelid:this.userid,userdata:this.removemultipleSelection}).then(e=>{if(e.success){this.getLabelList(),this.AddMembersDialogVisible=!1,this.$message.success({message:"移除成功~",type:"success",center:!0}),this.removecurrentPage=1;Object(We["d"])({page:this.removecurrentPage,type:1,label:this.userid,username:""}).then(e=>{this.membersData=e})}else this.$message.error({message:e.msg,type:"success",center:!0})}).catch(e=>{this.$message.error({message:"移除失败，稍后再试~",type:"success",center:!0})})},removeMembers(e){if(""!=this.removemultipleSelection){Object(Je["c"])({userid:"",labelid:this.userid,userdata:this.removemultipleSelection}).then(e=>{e.success?(this.getLabelList(),this.RemoveMembersDialogVisible=!1,this.$message.success({message:"移除成功~",type:"success",center:!0})):this.$message.error({message:e.msg,type:"success",center:!0})}).catch(e=>{this.$message.error({message:"移除失败，稍后再试~",type:"success",center:!0})})}else this.$message.error({message:"请勾选移除人员",type:"success",center:!0})},async getLabelList(){Object(Je["d"])({page:this.currentPage,type:"",caseid:""}).then(e=>{this.lableData=e})},formatTime(e,t){let s=e[t.property],i=new Date(s);const a=i.getFullYear();let o=i.getMonth()+1;o<10&&(o="0"+o);let n=i.getDate();return n<10&&(n="0"+n),a+"-"+o+"-"+n},handleInput(){this.isButtonEnabled=this.password.length>0},labelhandleInput(){this.isButtonEnabled=this.labelname.length>0},addMembers(e){this.userid=e.id,this.AddMembersDialogVisible=!0,this.lookcurrentPage=1,this.addcurrentPage=1,this.removecurrentPage=1,this.labelid=e.id,this.addSharedUsers="";Object(We["d"])({page:this.addcurrentPage,type:2,label:e.id,username:""}).then(e=>{this.membersData=e})},serchAddUser(){Object(We["d"])({page:1,type:2,label:this.labelid,username:this.addSharedUsers}).then(e=>{this.membersData=e})},serchremoveUser(){Object(We["d"])({page:1,type:1,label:this.labelid,username:this.removeSharedUsers}).then(e=>{this.membersData=e})},addLabel(){if(""!=this.labelname){Object(Je["a"])({name:this.labelname}).then(e=>{e.success?(this.getLabelList(),this.AddLabelDialogVisible=!1,this.$message.success({message:"添加成功~",type:"success",center:!0})):this.$message.error({message:e.msg,type:"success",center:!0})}).catch(e=>{this.$message.error({message:"添加失败，稍后再试~",type:"success",center:!0})})}else this.$message.error({message:"请输入分组名称",type:"success",center:!0})},editMembers(){if(this.password!=this.repassword)return void this.$message.error({message:"密码不一致，请重新输入~",type:"success",center:!0});Object(We["b"])({password:this.password}).then(e=>{this.centerDialogVisible=!1,this.$message.success({message:"修改成功，重新登录后生效~",type:"success",center:!0})}).catch(e=>{this.$message.error({message:"修改失败，稍后再试~",type:"success",center:!0})})},remove(e){this.userid=e.id,this.RemoveMembersDialogVisible=!0,this.lookcurrentPage=1,this.addcurrentPage=1,this.removecurrentPage=1,this.removeSharedUsers="",this.labelid=e.id;Object(We["d"])({page:this.removecurrentPage,type:1,label:e.id,username:""}).then(e=>{this.membersData=e,0==e.results.length&&this.$message.error({message:"该组暂无数据~",type:"success",center:!0})})},lookMembers(e){this.userid=e.id,this.LookMembersDialogVisible=!0,this.lookcurrentPage=1,this.addcurrentPage=1,this.removecurrentPage=1;Object(We["d"])({page:this.lookcurrentPage,type:1,label:e.id,username:""}).then(e=>{this.membersData=e,0==e.results.length&&this.$message.error({message:"该组暂无数据~",type:"success",center:!0})})},logout(){sessionStorage.clear(),this.$bus.$emit("show-login-dialog"),this.$router.push("/"),this.reload()},handleCurrentChange(e){Object(Je["d"])({page:this.currentPage,type:"",caseid:""}).then(e=>{this.lableData=e})},handleCurrentChange2(e){Object(We["d"])({page:this.lookcurrentPage,type:1,label:this.userid,username:""}).then(e=>{this.membersData=e})},handleCurrentChange3(e){Object(We["d"])({page:this.addcurrentPage,type:2,label:this.userid,username:this.addSharedUsers}).then(e=>{this.membersData=e})},handleCurrentChange4(e){Object(We["d"])({page:this.removecurrentPage,type:1,label:this.userid,username:this.removeSharedUsers}).then(e=>{this.membersData=e})}},mounted(){}},et=Qe,tt=(s("9147"),Object(m["a"])(et,Ze,qe,!1,null,null,null)),st=tt.exports,it=function(){var e=this,t=e._self._c;return t("div")},at=[],ot={data(){return{}},computed:{shouldShowDateColumn(){return this.tableData.results.some(e=>this.showDateArray.includes(e.creter))}},beforeDestroy(){this.$bus.$off("showCaseNavigation",this.handleOpenPanelDialog)},created(){this.$bus.$on("showCaseNavigation",this.handleOpenPanelDialog),this.$bus.$on("show-login-dialog",()=>{this.centerDialogVisible=!1})},methods:{handleOpenPanelDialog(){this.saveLocalFile(),this.columnPermissions=window.sessionStorage.getItem("username"),this.$router.push("/caseNavigation")},saveLocalFile(){Object(ie["m"])({content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA"),caseid:window.sessionStorage.getItem("caseid"),name:window.sessionStorage.getItem("name"),switch:!0}).then(e=>{}).catch(e=>{})}},mounted(){}},nt=ot,rt=(s("9566"),Object(m["a"])(nt,it,at,!1,null,null,null)),lt=rt.exports,ct=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新建",visible:e.addDialogVisible,width:"25%",center:"","show-close":!1},on:{"update:visible":function(t){e.addDialogVisible=t}}},[t("div",[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用例名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入用例名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"用例目录",prop:"selectTreeName"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-append-to-body":!1},model:{value:e.ruleForm.selectTreeName,callback:function(t){e.$set(e.ruleForm,"selectTreeName",t)},expression:"ruleForm.selectTreeName"}},[t("el-option",{staticClass:"setstyle",staticStyle:{overflow:"auto",height:"100%",width:"100%"},attrs:{value:e.selectTree,disabled:""}},[t("div",{staticStyle:{height:"15px"}}),t("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("div",{staticStyle:{height:"15px"}}),t("el-tree",{ref:"tree",attrs:{data:e.setTree,"node-key":"id","highlight-current":"",props:e.defaultProps,"expand-on-click-node":!1,"render-content":e.renderContent,"default-expanded-keys":e.defaultExpandKeys},on:{"node-click":e.handleNodeClick}})],1)],1)],1),t("el-form-item",[t("el-button",{staticStyle:{"margin-left":"15%"},on:{click:function(t){return e.resetForm()}}},[e._v("关闭")]),t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("新增")])],1)],1)],1)])],1)},dt=[],ht=s("89c2"),ut=s("6a87"),mt=s("d72f"),pt={inject:["reload"],components:{},data(){return{maxexpandId:ht["a"].maxexpandId,non_maxexpandId:ht["a"].maxexpandId,isLoadingTree:!1,setTree:ht["a"].treelist,defaultProps:{children:"children",label:"name"},defaultExpandKeys:[],filterText:"",addFrom:{name:"",caseid:"",treename:"",treeid:"",type:"1",switch:!0,content:""},selectTreeName:"",selectTree:"",addDialogVisible:!1,ruleForm:{name:"",selectTreeName:""},rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],selectTreeName:[{required:!0,message:"请选中目录",trigger:"blur"}]}}},beforeDestroy(){this.$bus.$off("showAddcase",this.handleOpenPanelDialog)},created(){this.$bus.$on("showAddcase",this.handleOpenPanelDialog),this.$bus.$on("show-login-dialog",()=>{this.centerDialogVisible=!1,this.addDialogVisible=!1})},watch:{filterText(e){this.$refs.tree.filter(e)}},methods:{handleOpenPanelDialog(){je["a"].$emit("demo","readonly"),this.addDialogVisible=!0,this.getCaseTree(),this.ruleForm.name="",this.ruleForm.selectTreeName="导图目录",this.addFrom.treeid="",this.addFrom.treename=""},initExpand(){this.setTree.map(e=>{this.defaultExpandKeys.push(e.id)}),this.isLoadingTree=!0},handleNodeClick(e,t,s){console.log(e.id),e.isEdit=!1,this.ruleForm.selectTreeName=e.name,this.addFrom.treeid=e.id,this.addFrom.treename=e.name,sessionStorage.setItem("treename",e.name)},renderContent(e,{node:t,data:s,store:i}){let a=this;const o="el-icon-folder";return e("div",[e("i",{class:o},[" "])," ",e(ut["a"],{props:{DATA:s,NODE:t,STORE:i,maxexpandId:a.non_maxexpandId},on:{nodeAdd:(e,t,s)=>a.handleAdd(e,t,s),nodeEdit:(e,t,s)=>a.handleEdit(e,t,s),nodeDel:(e,t,s)=>a.handleDelete(e,t,s)}})," "])},async getCaseTree(){Object(mt["b"])({}).then(e=>{this.setTree=e}).catch(e=>{this.$message.error("获取组织用例树失败，联系管理员检查~")})},submitForm(e){this.$refs[e].validate(e=>{if(!e)return je["a"].$emit("demo","edit"),console.log("新建发生了错误!!"),!1;{let e=Object(de["b"])(this.ruleForm.name);this.addFrom.name=this.ruleForm.name,this.addFrom.content=e,sessionStorage.setItem("name",this.ruleForm.name);Object(ie["a"])(this.addFrom).then(t=>{t.success?(this.addFrom.caseid=t.caseid,window.sessionStorage.setItem("switch","True"),window.sessionStorage.setItem("creter",window.sessionStorage.getItem("username")),this.$emit("sendData",{caseid:t.caseid,name:this.addFrom.name,authority:"读写",creter:window.sessionStorage.getItem("username")}),window.sessionStorage.setItem("caseid",t.caseid),je["a"].$emit("demo","edit"),this.$bus.$emit("setData",e),this.$notify({title:"新建",message:"新建成功",type:"success",position:"top-left"}),window.sessionStorage.removeItem("delete"),this.addDialogVisible=!1,this.$bus.$emit("closePanelDialog"),window.sessionStorage.setItem("closePanelDialog","false"),this.reload()):this.$message.error("新建用例失败~")})}})},resetForm(){this.addDialogVisible=!1,je["a"].$emit("demo","edit")}},mounted(){this.initExpand()}},gt=pt,ft=(s("75a1"),Object(m["a"])(gt,ct,dt,!1,null,"4294e072",null)),bt=ft.exports;let vt=null;var Ct={name:"Toolbar",components:{NodeImage:g,NodeHyperlink:y,NodeIcon:N,NodeNote:P,NodeTag:V,Export:Z,Import:re,ToolbarNodeBtnList:Ne,AddCase:bt,JumptoLog:Ae,JumptoCaseNavigation:lt,SelectPanel:Ve,Login:Xe,Collaborate:st},data(){return{ID:"",name:"",creter:"",authority:"",xuanzhong:"",activeNodes:[],backEnd:!1,forwardEnd:!0,readonly:!1,isFullDataFile:!1,timer:null,addDialogVisible:!1,filterText:"",maxexpandId:ht["a"].maxexpandId,non_maxexpandId:ht["a"].maxexpandId,isLoadingTree:!1,setTree:ht["a"].treelist,defaultProps:{children:"children",label:"name"},defaultExpandKeys:[],list:["back","forward","painter","siblingNode","childNode","deleteNode","image","icon","link","note","tag","summary","associativeLine","formula","outerFrame","annotation"],horizontalList:[],verticalList:[],showMoreBtn:!0,popoverShow:!1,fileTreeProps:{label:"name",children:"children",isLeaf:"leaf"},fileTreeVisible:!1,rootDirName:"",fileTreeExpand:!0,caseTag:"",radioColors:["#009900","#0000FF","#FF9900","#510DAB","#663300","#CC0000","#B300FF","#ffffff"],dialogVisible:!1,tagArr:[],tag:"",activeNodes:[],max:5,isMobile:Object(d["V"])()}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,isHandleLocalFile:e=>e.isHandleLocalFile}),hasRoot(){return-1!==this.activeNodes.findIndex(e=>e.isRoot)},hasGeneralization(){return-1!==this.activeNodes.findIndex(e=>e.isGeneralization)}},watch:{isHandleLocalFile(e){e||le["Notification"].closeAll()}},created(){this.$bus.$on("write_local_file",this.onWriteLocalFile),this.ID=window.sessionStorage.getItem("caseid"),this.name=window.sessionStorage.getItem("name"),this.creter=window.sessionStorage.getItem("creter"),"True"==window.sessionStorage.getItem("switch")?this.authority="读写":"False"==window.sessionStorage.getItem("switch")&&(this.authority="仅读"),this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeTag",this.handleShowNodeTag)},mounted(){this.computeToolbarShow(),this.computeToolbarShowThrottle=Object(d["tb"])(this.computeToolbarShow,300),window.addEventListener("resize",this.computeToolbarShowThrottle),this.$bus.$on("lang_change",this.computeToolbarShowThrottle),this.initExpand()},beforeDestroy(){this.$bus.$off("write_local_file",this.onWriteLocalFile),window.removeEventListener("resize",this.computeToolbarShowThrottle),this.$bus.$off("lang_change",this.computeToolbarShowThrottle),this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeTag",this.handleShowNodeTag)},methods:{generateColorByContent:d["A"],handleNodeActive(...e){if(this.activeNodes=[...e[1]],this.activeNodes.length>0){let e=this.activeNodes[0];this.tagArr=e.getData("tag")||[],"标题"==this.tagArr[0]||"前置"==this.tagArr[0]||"用例"==this.tagArr[0]||"步骤"==this.tagArr[0]||"预期"==this.tagArr[0]?this.caseTag="1":this.caseTag="0"}else this.tagArr=[],this.tag=""},handleShowNodeTag(){this.$bus.$emit("startTextEdit")},add(){this.tagArr.push(this.tag),this.tag=""},del(e){this.tagArr.splice(e,1)},cancel(){this.dialogVisible=!1},caseT(){"1"==this.caseTag?"标题"!=this.tagArr[0]?this.activeNodes.forEach(e=>{e.setTag(["标题"]),this.tagArr=["标题"],this.caseTag="1"}):"标题"==this.tagArr[0]&&this.activeNodes.forEach(e=>{e.setTag([]),this.caseTag="0"}):this.activeNodes.forEach(e=>{e.setTag(["标题"]),this.caseTag="1",this.tagArr=["标题"]})},caseF(){"1"==this.caseTag?"前置"!=this.tagArr[0]?this.activeNodes.forEach(e=>{e.setTag(["前置"]),this.tagArr=["前置"],this.caseTag="1"}):"前置"==this.tagArr[0]&&this.activeNodes.forEach(e=>{e.setTag([]),this.caseTag="0"}):this.activeNodes.forEach(e=>{e.setTag(["前置"]),this.caseTag="1",this.tagArr=["前置"]})},caseC(){"1"==this.caseTag?"用例"!=this.tagArr[0]?this.activeNodes.forEach(e=>{e.setTag(["用例"]),this.tagArr=["用例"],this.caseTag="1"}):"用例"==this.tagArr[0]&&this.activeNodes.forEach(e=>{e.setTag([]),this.caseTag="0"}):this.activeNodes.forEach(e=>{e.setTag(["用例"]),this.caseTag="1",this.tagArr=["用例"]})},caseS(){"1"==this.caseTag?"步骤"!=this.tagArr[0]?this.activeNodes.forEach(e=>{e.setTag(["步骤"]),this.tagArr=["步骤"],this.caseTag="1"}):"步骤"==this.tagArr[0]&&this.activeNodes.forEach(e=>{e.setTag([]),this.caseTag="0"}):this.activeNodes.forEach(e=>{e.setTag(["步骤"]),this.caseTag="1",this.tagArr=["步骤"]})},caseE(){"1"==this.caseTag?"预期"!=this.tagArr[0]?this.activeNodes.forEach(e=>{e.setTag(["预期"]),this.tagArr=["预期"],this.caseTag="1"}):"预期"==this.tagArr[0]&&this.activeNodes.forEach(e=>{e.setTag([]),this.caseTag="0"}):this.activeNodes.forEach(e=>{e.setTag(["预期"]),this.caseTag="1",this.tagArr=["预期"]})},handleData(e){console.log(e),this.ID=e.caseid,this.name=e.name,this.creter=e.creter,this.authority=e.authority,sessionStorage.setItem("name",e.name)},initExpand(){this.setTree.map(e=>{this.defaultExpandKeys.push(e.id)}),this.isLoadingTree=!0},handleNodeClick(e,t,s){e.isEdit=!1,this.xuanzhong=e.name,this.selectTreeId=e.id,this.selectTreeName=e.name},renderContent(e,{node:t,data:s,store:i}){let a=this;const o="el-icon-folder";return e("div",[e("i",{class:o},[" "])," ",e(ut["a"],{props:{DATA:s,NODE:t,STORE:i,maxexpandId:a.non_maxexpandId},on:{nodeAdd:(e,t,s)=>a.handleAdd(e,t,s),nodeEdit:(e,t,s)=>a.handleEdit(e,t,s),nodeDel:(e,t,s)=>a.handleDelete(e,t,s)}})," "])},async getCaseTree(){Object(mt["b"])({}).then(e=>{this.setTree=e})},filterNode(e,t){return!e||-1!==t.name.indexOf(e)},computeToolbarShow(){const e=window.innerWidth-40,t=[...this.list];let s=1;const i=()=>{if(s>t.length)return a();this.horizontalList=t.slice(0,s),this.$nextTick(()=>{const o=this.$refs.toolbarRef.getBoundingClientRect().width;o<e?(s++,i()):s>0&&o>e&&(s--,this.horizontalList=t.slice(0,s),a())})},a=()=>{this.verticalList=t.slice(s),this.showMoreBtn=this.verticalList.length>0};i()},onWriteLocalFile(e){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.writeLocalFile(e)},1e3)},async loadFileTreeNode(e,t){try{let s;0===e.level?(s=await window.showDirectoryPicker(),this.rootDirName=s.name):s=e.data.handle;const i=[],a=[];for await(const[e,t]of s.entries()){const s="file"===t.kind;if(s&&!/\.(smm|xmind|md|json)$/.test(t.name))continue;const o=s&&/\.smm$/.test(t.name),n={id:e,name:t.name,type:t.kind,handle:t,leaf:s,enableEdit:o};s?a.push(n):i.push(n)}t([...i,...a])}catch(s){if(console.log(s),this.fileTreeVisible=!1,t([]),s.toString().includes("aborted"))return;this.$message.warning(this.$t("toolbar.notSupportTip"))}},openDirectory(){this.fileTreeVisible=!1,this.fileTreeExpand=!0,this.rootDirName="",this.$nextTick(()=>{this.fileTreeVisible=!0})},editLocalFile(e){e.handle&&(vt=e.handle,this.readFile())},async importLocalFile(e){try{const t=await e.handle.getFile();this.$refs.ImportRef.onChange({raw:t,name:t.name}),this.$refs.ImportRef.confirm()}catch(t){console.log(t)}},async openLocalFile(){try{let[e]=await window.showOpenFilePicker({types:[{description:"",accept:{"application/json":[".smm"]}}],excludeAcceptAllOption:!0,multiple:!1});if(!e)return;if(vt=e,"directory"===vt.kind)return void this.$message.warning(this.$t("toolbar.selectFileTip"));this.readFile()}catch(e){if(console.log(e),e.toString().includes("aborted"))return;this.$message.warning(this.$t("toolbar.notSupportTip"))}},async readFile(){let e=await vt.getFile(),t=new FileReader;t.onload=async()=>{this.$store.commit("setIsHandleLocalFile",!0),this.setData(t.result),le["Notification"].closeAll(),Object(le["Notification"])({title:this.$t("toolbar.tip"),message:`${this.$t("toolbar.editingLocalFileTipFront")}${e.name}${this.$t("toolbar.editingLocalFileTipEnd")}`,duration:0,showClose:!0})},t.readAsText(e)},setData(e){try{let t=JSON.parse(e);if("object"!==typeof t)throw new Error(this.$t("toolbar.fileContentError"));t.root?this.isFullDataFile=!0:(this.isFullDataFile=!1,t={...ce["a"],root:t}),this.$bus.$emit("setData",t)}catch(t){console.log(t),this.$message.error(this.$t("toolbar.fileOpenFailed"))}},async writeLocalFile(e){if(!vt||!this.isHandleLocalFile)return;this.isFullDataFile||(e=e.root);let t=JSON.stringify(e);const s=await vt.createWritable();await s.write(t),await s.close()},async createNewLocalFile(){await this.createLocalFile(ce["a"])},async createLocalFile(e){try{let t=await window.showSaveFilePicker({types:[{description:"",accept:{"application/json":[".smm"]}}],suggestedName:this.$t("toolbar.defaultFileName")});if(!t)return;const s=this.$loading({lock:!0,text:this.$t("toolbar.creatingTip"),spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});vt=t,this.$store.commit("setIsHandleLocalFile",!0),this.isFullDataFile=!0,await this.writeLocalFile(e),await this.readFile(),s.close()}catch(t){if(console.log(t),t.toString().includes("aborted"))return;this.$message.warning(this.$t("toolbar.notSupportTip"))}},async statisticsFile(){this.$router.push("/statistics")},async refreshLocalFile(){Object(ie["d"])({caseid:sessionStorage.getItem("caseid"),latest:!0}).then(e=>{e.success?(this.mindMapData=JSON.parse(e.content),this.$bus.$emit("setData",JSON.parse(e.content)),this.$message.success({message:"数据同步成功~",type:"success",center:!0})):this.$message.error("没有同步数据，请稍后再试~")}).catch(e=>{})},async copyLocalFile(){var e="TMIND"+Date.now();Object(ie["f"])({copyid:e,caseid:window.sessionStorage.getItem("caseid"),content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA")}).then(e=>{this.$message.success("复制成功，请在用例管理打开~")}).catch(e=>{})},async saveLocalFile(){Object(ie["m"])({content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA"),caseid:window.sessionStorage.getItem("caseid"),name:window.sessionStorage.getItem("name")}).then(e=>{e.success?this.$notify({title:"成功",message:"保存成功",type:"success",position:"top-left"}):"9900"==e.code?(window.sessionStorage.setItem("delete","delete"),this.$confirm("该用例已被删除！！！，不可读写，请建新用例，是否新建？","温馨提示",{distinguishCancelAndClose:!0,confirmButtonText:"新建",cancelButtonText:"关闭",type:"error"}).then(()=>{this.$bus.$emit("showAddcase")}).catch(e=>{this.$message({type:"info",message:"关闭新建"})})):this.$confirm("该用例创建人设置仅读，不可读写，你可以在该基础上点击复制，系统则为你复制一份属于你修改后的用例，是否复制？","温馨提示",{distinguishCancelAndClose:!0,confirmButtonText:"复制",cancelButtonText:"放弃复制",type:"success"}).then(()=>{this.copyLocalFile()}).catch(e=>{this.$message({type:"info",message:"放弃复制"})})}).catch(e=>{this.$message.error("保存失败")})},async saveAsLocalFile(){this.filterText="",this.xuanzhong="",this.selectTreeId="",this.addDialogVisible=!0,this.getCaseTree()},async savaAs(){if(""==this.selectTreeId)this.$message.error({message:"请先选中目录再保存~",center:!0});else{Object(ie["o"])({name:"",caseid:window.sessionStorage.getItem("caseid"),type:"",switch:window.sessionStorage.getItem("switch"),treeid:this.selectTreeId,treename:this.selectTreeName,beforeoperation:window.sessionStorage.getItem("treename"),userlist:[],labellist:[],case_write_time:null,case_review_time:null,case_start_time:null,case_end_time:null,actual_testing_time:null,start_use_case_write_time:null}).then(e=>{e.success?(this.addDialogVisible=!1,this.$message.success("另存为成功~")):this.$message.error(e.msg)}).catch(e=>{this.$message.error("另存为成功失败~")})}}}},wt=Ct,yt=(s("80dc"),Object(m["a"])(wt,o,n,!1,null,"c5de3f4a",null)),_t=yt.exports,kt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editContainer",on:{dragenter:function(t){return t.stopPropagation(),t.preventDefault(),e.onDragenter.apply(null,arguments)},dragleave:function(e){e.stopPropagation(),e.preventDefault()},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(e){e.stopPropagation(),e.preventDefault()}}},[t("div",{ref:"mindMapContainer",staticClass:"mindMapContainer",attrs:{id:"mindMapContainer"}}),e.isZenMode?e._e():t("Count",{attrs:{mindMap:e.mindMap}}),e.mindMap?t("Navigator",{attrs:{mindMap:e.mindMap}}):e._e(),e.isZenMode?e._e():t("NavigatorToolbar",{attrs:{mindMap:e.mindMap}}),t("OutlineSidebar",{attrs:{mindMap:e.mindMap}}),e.isZenMode?e._e():t("Style"),t("BaseStyle",{attrs:{data:e.mindMapData,mindMap:e.mindMap}}),e.mindMap?t("Theme",{attrs:{mindMap:e.mindMap}}):e._e(),t("Structure",{attrs:{mindMap:e.mindMap}}),t("ShortcutKey"),e.mindMap?t("Contextmenu",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("RichTextToolbar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeNoteContentShow",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeAttachment",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeImgPreview",{attrs:{mindMap:e.mindMap}}):e._e(),e.isZenMode?e._e():t("SidebarTrigger"),e.mindMap?t("Search",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeIconSidebar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeIconToolbar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("OutlineEdit",{attrs:{mindMap:e.mindMap}}):e._e(),e.isShowScrollbar&&e.mindMap?t("Scrollbar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("FormulaSidebar",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("SourceCodeEdit",{attrs:{mindMap:e.mindMap}}):e._e(),e.mindMap?t("NodeOuterFrame",{attrs:{mindMap:e.mindMap}}):e._e(),e.showDragMask?t("div",{staticClass:"dragMask",on:{dragleave:function(t){return t.stopPropagation(),t.preventDefault(),e.onDragleave.apply(null,arguments)},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(t){return t.stopPropagation(),t.preventDefault(),e.onDrop.apply(null,arguments)}}},[t("div",{staticClass:"dragTip"},[e._v(e._s(e.$t("edit.dragTip")))])]):e._e()],1)},xt=[],St=s("7145"),$t=s("4db5"),Dt=s("43cc"),Tt=s("a832"),Nt=s("364c"),It=s("3041"),Mt=s("67c2"),Lt=s("99e0"),Ot=s("cbc1"),Et=s("8dfd"),At=s("5d70"),Pt=s("a87c"),Ft=s("fa22"),jt=s("73c1"),Rt=s("49ee"),zt=s("ee73"),Bt=s("f904"),Vt=s("f136"),Ut=s("1e64"),Ht=s("3b44"),Wt=s("9d5a"),Kt=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("outline.title")}},[t("div",{staticClass:"changeBtn",class:{isDark:e.isDark},on:{click:e.onChangeToOutlineEdit}},[t("span",{staticClass:"icon iconfont iconquanping1"})]),"outline"===e.activeSidebar?t("Outline",{attrs:{mindMap:e.mindMap},on:{scrollTo:e.onScrollTo}}):e._e()],1)},Yt=[],Gt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebarContainer",class:{show:e.show,isDark:e.isDark},style:{zIndex:e.zIndex},on:{click:function(e){e.stopPropagation()}}},[t("span",{staticClass:"closeBtn el-icon-close",on:{click:e.close}}),e.title?t("div",{staticClass:"sidebarHeader"},[e._v(" "+e._s(e.title)+" ")]):e._e(),t("div",{ref:"sidebarContent",staticClass:"sidebarContent"},[e._t("default")],2)])},Xt=[],Zt={name:"Sidebar",props:{title:{type:String,default:""}},data(){return{show:!1,zIndex:0}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark})},watch:{show(e,t){e&&!t&&(this.zIndex=K["u"].sidebarZIndex++)}},created(){this.$bus.$on("closeSideBar",this.handleCloseSidebar)},beforeDestroy(){this.$bus.$off("closeSideBar",this.handleCloseSidebar)},methods:{...Object(W["c"])(["setActiveSidebar"]),handleCloseSidebar(){this.close()},close(){this.show=!1,this.setActiveSidebar("")},getEl(){return this.$refs.sidebarContent}}},qt=Zt,Jt=(s("dfc2"),Object(m["a"])(qt,Gt,Xt,!1,null,"d2080ccc",null)),Qt=Jt.exports,es=function(){var e=this,t=e._self._c;return t("el-tree",{ref:"tree",staticClass:"outlineTree",class:{isDark:e.isDark},attrs:{"node-key":"uid",draggable:"","default-expand-all":"",data:e.data,props:e.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"allow-drag":e.checkAllowDrag},on:{"node-drop":e.onNodeDrop,"current-change":e.onCurrentChange},nativeOn:{mouseenter:function(t){e.isInTreArea=!0},mouseleave:function(t){e.isInTreArea=!1}},scopedSlots:e._u([{key:"default",fn:function({node:s,data:i}){return t("span",{staticClass:"customNode",attrs:{"data-id":i.uid},on:{click:function(t){return e.onClick(i)}}},[t("span",{key:e.getKey(),staticClass:"nodeEdit",attrs:{contenteditable:!e.isReadonly},domProps:{innerHTML:e._s(s.label)},on:{keydown:function(t){return t.stopPropagation(),e.onNodeInputKeydown(t,s)},keyup:function(e){e.stopPropagation()},blur:function(t){return e.onBlur(t,s)},paste:function(t){return e.onPaste(t,s)}}})])}}])})},ts=[],ss=(s("5b81"),{name:"Outline",props:{mindMap:{type:Object}},data(){return{data:[],defaultProps:{label:"label"},currentData:null,notHandleDataChange:!1,isHandleNodeTreeRenderEnd:!1,beInsertNodeUid:"",insertType:"",isInTreArea:!1,isAfterCreateNewNode:!1}},computed:{...Object(W["d"])({isReadonly:e=>e.isReadonly,isDark:e=>e.localConfig.isDark})},created(){window.addEventListener("keydown",this.onKeyDown),this.$bus.$on("data_change",this.handleDataChange),this.$bus.$on("node_tree_render_end",this.handleNodeTreeRenderEnd),this.$bus.$on("hide_text_edit",this.handleHideTextEdit)},mounted(){this.refresh()},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),this.$bus.$off("data_change",this.handleDataChange),this.$bus.$off("node_tree_render_end",this.handleNodeTreeRenderEnd),this.$bus.$off("hide_text_edit",this.handleHideTextEdit)},methods:{handleHideTextEdit(){this.notHandleDataChange&&(this.notHandleDataChange=!1,this.refresh())},handleDataChange(){if(this.notHandleDataChange)return this.notHandleDataChange=!1,void(this.isAfterCreateNewNode=!1);this.isAfterCreateNewNode?this.isAfterCreateNewNode=!1:this.refresh()},handleNodeTreeRenderEnd(){if(this.insertType)return this[this.insertType](),void(this.insertType="");this.isHandleNodeTreeRenderEnd&&(this.isHandleNodeTreeRenderEnd=!1,this.refresh(),this.$nextTick(()=>{this.afterCreateNewNode()}))},refresh(){let e=this.mindMap.getData();e.root=!0;let t=e=>{let s=e.data.richText?Object(d["eb"])(e.data.text):e.data.text;s=Object(d["T"])(s),s=s.replaceAll(/\n/g,"<br>"),e.textCache=s,e.label=s,e.uid=e.data.uid,e.children&&e.children.length>0&&e.children.forEach(e=>{t(e)})};t(e),this.data=[e]},afterCreateNewNode(){let e=this.beInsertNodeUid;if(e&&this.$refs.tree)try{this.isAfterCreateNewNode=!0,this.$refs.tree.setCurrentKey(e);let t=this.$refs.tree.getNode(e);this.onCurrentChange(t.data),this.onClick(t.data);const s=document.querySelector(`.customNode[data-id="${e}"] .nodeEdit`);if(s){let e=window.getSelection(),t=document.createRange();t.selectNodeContents(s),e.removeAllRanges(),e.addRange(t);let i=s.offsetTop;this.$emit("scrollTo",i)}}catch(t){console.log(t)}this.beInsertNodeUid=""},checkAllowDrag(e){return!e.data.root},onBlur(e,t){if(t.data.textCache===e.target.innerHTML)return void(this.insertType&&(this[this.insertType](),this.insertType=""));const s=t.data.data.richText,i=s?e.target.innerHTML:e.target.innerText,a=this.mindMap.renderer.findNodeByUid(t.data.uid);a&&(this.notHandleDataChange=!0,s?a.setText(Object(d["sb"])(i),!0,!0):a.setText(i))},onPaste(e){Object(d["R"])(e)},getKey(){return Math.random()},onNodeInputKeydown(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),this.insertType="insertNode",e.target.blur()),9===e.keyCode&&(e.preventDefault(),e.shiftKey?(this.insertType="moveUp",e.target.blur()):(this.insertType="insertChildNode",e.target.blur()))},moveUp(){this.mindMap.execCommand("MOVE_UP_ONE_LEVEL")},insertNode(){this.notHandleDataChange=!0,this.isHandleNodeTreeRenderEnd=!0,this.beInsertNodeUid=Object(d["q"])(),this.mindMap.execCommand("INSERT_NODE",!1,[],{uid:this.beInsertNodeUid})},insertChildNode(){this.notHandleDataChange=!0,this.isHandleNodeTreeRenderEnd=!0,this.beInsertNodeUid=Object(d["q"])(),this.mindMap.execCommand("INSERT_CHILD_NODE",!1,[],{uid:this.beInsertNodeUid})},onClick(e){this.notHandleDataChange=!0;const t=this.mindMap.renderer.findNodeByUid(e.uid);t&&t.nodeData.data.isActive||this.mindMap.execCommand("GO_TARGET_NODE",e.uid,()=>{this.notHandleDataChange=!1})},onNodeDrop(e,t,s){this.notHandleDataChange=!0;const i=this.mindMap.renderer.findNodeByUid(e.data.uid),a=this.mindMap.renderer.findNodeByUid(t.data.uid);if(i&&a)switch(s){case"before":this.mindMap.execCommand("INSERT_BEFORE",i,a);break;case"after":this.mindMap.execCommand("INSERT_AFTER",i,a);break;case"inner":this.mindMap.execCommand("MOVE_NODE_TO",i,a);break;default:break}},onCurrentChange(e){this.currentData=e},onKeyDown(e){if(this.isInTreArea&&[46,8].includes(e.keyCode)&&this.currentData){e.stopPropagation(),this.mindMap.renderer.textEdit.hideEditTextBox();const t=this.mindMap.renderer.findNodeByUid(this.currentData.uid);t&&!t.isRoot&&(this.notHandleDataChange=!0,this.$refs.tree.remove(this.currentData),this.mindMap.execCommand("REMOVE_NODE",[t]))}}}}),is=ss,as=(s("5ed8"),Object(m["a"])(is,es,ts,!1,null,"bdfd8c98",null)),os=as.exports,ns={name:"OutlineSidebar",components:{Sidebar:Qt,Outline:os},props:{mindMap:{type:Object}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar})},watch:{activeSidebar(e){this.$refs.sidebar.show="outline"===e}},methods:{...Object(W["c"])(["setIsOutlineEdit","setActiveSidebar"]),onChangeToOutlineEdit(){this.setActiveSidebar(""),this.setIsOutlineEdit(!0)},onScrollTo(e){let t=this.$refs.sidebar.getEl(),s=t.offsetHeight,i=t.scrollTop;e>i+s&&t.scrollTo(0,e-s/2)}}},rs=ns,ls=(s("d513"),Object(m["a"])(rs,Kt,Yt,!1,null,"c20f9926",null)),cs=ls.exports,ds=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("style.title")}},[e.activeNodes.length>0?t("div",{staticClass:"styleBox",class:{isDark:e.isDark}},[t("div",{staticClass:"sidebarContent"},[t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("style.text")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.fontFamily")))]),t("el-select",{attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("fontFamily")}},model:{value:e.style.fontFamily,callback:function(t){e.$set(e.style,"fontFamily",t)},expression:"style.fontFamily"}},e._l(e.fontFamilyList,(function(e){return t("el-option",{key:e.value,style:{fontFamily:e.value},attrs:{label:e.name,value:e.value}})})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.fontSize")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("fontSize")}},model:{value:e.style.fontSize,callback:function(t){e.$set(e.style,"fontSize",t)},expression:"style.fontSize"}},e._l(e.fontSizeList,(function(e){return t("el-option",{key:e,style:{fontSize:e+"px"},attrs:{label:e,value:e}})})),1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.lineHeight")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("lineHeight")}},model:{value:e.style.lineHeight,callback:function(t){e.$set(e.style,"lineHeight",t)},expression:"style.lineHeight"}},e._l(e.lineHeightList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"btnGroup"},[t("el-tooltip",{attrs:{content:e.$t("style.color"),placement:"bottom"}},[t("div",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"styleBtn"},[e._v(" A "),t("span",{staticClass:"colorShow",style:{backgroundColor:e.style.color||"#eee"}})])]),t("el-tooltip",{attrs:{content:e.$t("style.addFontWeight"),placement:"bottom"}},[t("div",{staticClass:"styleBtn",class:{actived:"bold"===e.style.fontWeight},on:{click:e.toggleFontWeight}},[e._v(" B ")])]),t("el-tooltip",{attrs:{content:e.$t("style.italic"),placement:"bottom"}},[t("div",{staticClass:"styleBtn i",class:{actived:"italic"===e.style.fontStyle},on:{click:e.toggleFontStyle}},[e._v(" I ")])]),t("el-tooltip",{attrs:{content:e.$t("style.textDecoration"),placement:"bottom"}},[t("div",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"styleBtn u",style:{textDecoration:e.style.textDecoration||"none"}},[e._v(" U ")])])],1),t("el-popover",{ref:"popover",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.style.color},on:{change:e.changeFontColor}})],1),t("el-popover",{ref:"popover2",attrs:{placement:"bottom",trigger:"hover"}},[t("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){return e.update("textDecoration")}},model:{value:e.style.textDecoration,callback:function(t){e.$set(e.style,"textDecoration",t)},expression:"style.textDecoration"}},[t("el-radio-button",{attrs:{label:"none"}},[e._v(e._s(e.$t("style.none")))]),t("el-radio-button",{attrs:{label:"underline"}},[e._v(e._s(e.$t("style.underline")))]),t("el-radio-button",{attrs:{label:"line-through"}},[e._v(e._s(e.$t("style.lineThrough")))]),t("el-radio-button",{attrs:{label:"overline"}},[e._v(e._s(e.$t("style.overline")))])],1)],1)],1),t("div",{staticClass:"title"},[e._v(e._s(e.$t("style.border")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"block",style:{width:"80px",backgroundColor:e.style.borderColor}}),t("el-popover",{ref:"popover3",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.style.borderColor},on:{change:e.changeBorderColor}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.style")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("borderDasharray")}},model:{value:e.style.borderDasharray,callback:function(t){e.$set(e.style,"borderDasharray",t)},expression:"style.borderDasharray"}},e._l(e.borderDasharrayList,(function(s){return t("el-option",{key:s.value,attrs:{label:s.name,value:s.value}},[t("svg",{attrs:{width:"120",height:"34"}},[t("line",{attrs:{x1:"10",y1:"17",x2:"110",y2:"17","stroke-width":"2",stroke:e.style.borderDasharray===s.value?"#409eff":e.isDark?"#fff":"#000","stroke-dasharray":s.value}})])])})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.width")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("borderWidth")}},model:{value:e.style.borderWidth,callback:function(t){e.$set(e.style,"borderWidth",t)},expression:"style.borderWidth"}},e._l(e.borderWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"rectangle"===e.style.shape,expression:"style.shape === 'rectangle'"}],staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.borderRadius")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("borderRadius")}},model:{value:e.style.borderRadius,callback:function(t){e.$set(e.style,"borderRadius",t)},expression:"style.borderRadius"}},e._l(e.borderRadiusList,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),t("div",{staticClass:"title"},[e._v(e._s(e.$t("style.background")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"block",style:{backgroundColor:e.style.fillColor}}),t("el-popover",{ref:"popover4",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.style.fillColor},on:{change:e.changeFillColor}})],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.gradientStyle")))]),t("el-checkbox",{on:{change:function(t){return e.update("gradientStyle")}},model:{value:e.style.gradientStyle,callback:function(t){e.$set(e.style,"gradientStyle",t)},expression:"style.gradientStyle"}})],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.startColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover6",arg:"popover6"}],staticClass:"block",style:{backgroundColor:e.style.startColor}}),t("el-popover",{ref:"popover6",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.style.startColor},on:{change:e.changeStartColor}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.endColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover7",arg:"popover7"}],staticClass:"block",style:{backgroundColor:e.style.endColor}}),t("el-popover",{ref:"popover7",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.style.endColor},on:{change:e.changeEndColor}})],1)],1)]),t("div",{staticClass:"title"},[e._v(e._s(e.$t("style.shape")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.shape")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("shape")}},model:{value:e.style.shape,callback:function(t){e.$set(e.style,"shape",t)},expression:"style.shape"}},e._l(e.shapeList,(function(s){return t("el-option",{key:s.value,attrs:{label:s.name,value:s.value}},[t("svg",{staticStyle:{"margin-top":"5px"},attrs:{width:"60",height:"26"}},[t("path",{attrs:{d:e.shapeListMap[s.value],fill:"none",stroke:e.style.shape===s.value?"#409eff":e.isDark?"#fff":"#000","stroke-width":"2"}})])])})),1)],1)]),t("div",{staticClass:"title"},[e._v(e._s(e.$t("style.line")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],staticClass:"block",style:{width:"80px",backgroundColor:e.style.lineColor}}),t("el-popover",{ref:"popover5",attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.style.lineColor},on:{change:e.changeLineColor}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.style")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("lineDasharray")}},model:{value:e.style.lineDasharray,callback:function(t){e.$set(e.style,"lineDasharray",t)},expression:"style.lineDasharray"}},e._l(e.borderDasharrayList,(function(s){return t("el-option",{key:s.value,attrs:{label:s.name,value:s.value}},[t("svg",{attrs:{width:"120",height:"34"}},[t("line",{attrs:{x1:"10",y1:"17",x2:"110",y2:"17","stroke-width":"2",stroke:e.style.lineDasharray===s.value?"#409eff":e.isDark?"#fff":"#000","stroke-dasharray":s.value}})])])})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.width")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("lineWidth")}},model:{value:e.style.lineWidth,callback:function(t){e.$set(e.style,"lineWidth",t)},expression:"style.lineWidth"}},e._l(e.borderWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.arrowDir")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("lineMarkerDir")}},model:{value:e.style.lineMarkerDir,callback:function(t){e.$set(e.style,"lineMarkerDir",t)},expression:"style.lineMarkerDir"}},[t("el-option",{key:"start",attrs:{label:e.$t("style.arrowDirStart"),value:"start"}}),t("el-option",{key:"end",attrs:{label:e.$t("style.arrowDirEnd"),value:"end"}})],1)],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("style.nodePadding")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.horizontal")))]),t("el-slider",{staticStyle:{width:"200px"},on:{change:function(t){return e.update("paddingX")}},model:{value:e.style.paddingX,callback:function(t){e.$set(e.style,"paddingX",t)},expression:"style.paddingX"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("style.vertical")))]),t("el-slider",{staticStyle:{width:"200px"},on:{change:function(t){return e.update("paddingY")}},model:{value:e.style.paddingY,callback:function(t){e.$set(e.style,"paddingY",t)},expression:"style.paddingY"}})],1)])])]):t("div",{staticClass:"tipBox"},[t("div",{staticClass:"tipIcon iconfont icontianjiazijiedian"}),t("div",{staticClass:"tipText"},[e._v("请选择一个节点")])])])},hs=[],us={name:"Style",components:{Sidebar:Qt,Color:we},data(){return{fontSizeList:K["j"],borderWidthList:K["f"],borderRadiusList:K["e"],lineHeightList:K["l"],activeNodes:[],style:{shape:"",paddingX:0,paddingY:0,color:"",fontFamily:"",fontSize:"",lineHeight:"",textDecoration:"",fontWeight:"",fontStyle:"",borderWidth:"",borderColor:"",fillColor:"",borderDasharray:"",borderRadius:"",lineColor:"",lineDasharray:"",lineWidth:"",lineMarkerDir:"",gradientStyle:!1,startColor:"",endColor:""}}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar}),fontFamilyList(){return K["i"][this.$i18n.locale]||K["i"].zh},borderDasharrayList(){return K["d"][this.$i18n.locale]||K["d"].zh},shapeList(){return K["q"][this.$i18n.locale]||K["q"].zh},shapeListMap(){return K["r"][this.$i18n.locale]||K["r"].zh}},watch:{activeSidebar(e){this.$refs.sidebar.show="nodeStyle"===e}},created(){this.$bus.$on("node_active",this.onNodeActive)},beforeDestroy(){this.$bus.$off("node_active",this.onNodeActive)},methods:{onNodeActive(...e){this.$nextTick(()=>{this.activeNodes=[...e[1]],this.initNodeStyle()})},initNodeStyle(){this.activeNodes.length<=0||["shape","paddingX","paddingY","color","fontFamily","fontSize","lineHeight","textDecoration","fontWeight","fontStyle","borderWidth","borderColor","fillColor","borderDasharray","borderRadius","lineColor","lineDasharray","lineWidth","lineMarkerDir","gradientStyle","startColor","endColor"].forEach(e=>{this.style[e]=this.activeNodes[0].getStyle(e,!1)})},update(e){this.activeNodes.forEach(t=>{t.setStyle(e,this.style[e])})},toggleFontWeight(){"bold"===this.style.fontWeight?this.style.fontWeight="normal":this.style.fontWeight="bold",this.update("fontWeight")},toggleFontStyle(){"italic"===this.style.fontStyle?this.style.fontStyle="normal":this.style.fontStyle="italic",this.update("fontStyle")},changeFontColor(e){this.style.color=e,this.update("color")},changeBorderColor(e){this.style.borderColor=e,this.update("borderColor")},changeLineColor(e){this.style.lineColor=e,this.update("lineColor")},changeFillColor(e){this.style.fillColor=e,this.update("fillColor")},changeStartColor(e){this.style.startColor=e,this.update("startColor")},changeEndColor(e){this.style.endColor=e,this.update("endColor")}}},ms=us,ps=(s("93e1"),s("b0ae"),Object(m["a"])(ms,ds,hs,!1,null,"4614cd53",null)),gs=ps.exports,fs=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("baseStyle.title")}},[e.data?t("div",{staticClass:"sidebarContent",class:{isDark:e.isDark}},[t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.background")))]),t("div",{staticClass:"row"},[t("el-tabs",{staticClass:"tab",model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:e.$t("baseStyle.color"),name:"color"}},[t("Color",{attrs:{color:e.style.backgroundColor},on:{change:t=>{e.update("backgroundColor",t)}}})],1),t("el-tab-pane",{attrs:{label:e.$t("baseStyle.image"),name:"image"}},[t("ImgUpload",{staticClass:"imgUpload",on:{change:t=>{e.update("backgroundImage",t)}},model:{value:e.style.backgroundImage,callback:function(t){e.$set(e.style,"backgroundImage",t)},expression:"style.backgroundImage"}}),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.imageRepeat")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("backgroundRepeat",t)}},model:{value:e.style.backgroundRepeat,callback:function(t){e.$set(e.style,"backgroundRepeat",t)},expression:"style.backgroundRepeat"}},e._l(e.backgroundRepeatList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.imagePosition")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("backgroundPosition",t)}},model:{value:e.style.backgroundPosition,callback:function(t){e.$set(e.style,"backgroundPosition",t)},expression:"style.backgroundPosition"}},e._l(e.backgroundPositionList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.imageSize")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("backgroundSize",t)}},model:{value:e.style.backgroundSize,callback:function(t){e.$set(e.style,"backgroundSize",t)},expression:"style.backgroundSize"}},e._l(e.backgroundSizeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)],1),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.line")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"block",style:{backgroundColor:e.style.lineColor}}),t("el-popover",{ref:"popover",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.style.lineColor},on:{change:t=>{e.update("lineColor",t)}}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.width")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("lineWidth",t)}},model:{value:e.style.lineWidth,callback:function(t){e.$set(e.style,"lineWidth",t)},expression:"style.lineWidth"}},e._l(e.lineWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1)]),t("div",{staticClass:"row"},[e.lineStyleListShow.length>1?t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.style")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("lineStyle",t)}},model:{value:e.style.lineStyle,callback:function(t){e.$set(e.style,"lineStyle",t)},expression:"style.lineStyle"}},e._l(e.lineStyleListShow,(function(s){return t("el-option",{key:s.value,staticClass:"lineStyleOption",class:{isDark:e.isDark,isSelected:e.style.lineStyle===s.value},attrs:{label:s.name,value:s.value},domProps:{innerHTML:e._s(e.lineStyleMap[s.value])}})})),1)],1):e._e(),"curve"===e.style.lineStyle&&e.showRootLineKeepSameInCurveLayouts?t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.rootStyle")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("rootLineKeepSameInCurve",t)}},model:{value:e.style.rootLineKeepSameInCurve,callback:function(t){e.$set(e.style,"rootLineKeepSameInCurve",t)},expression:"style.rootLineKeepSameInCurve"}},e._l(e.rootLineKeepSameInCurveList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),e.showLineRadius?t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.lineRadius")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("lineRadius",t)}},model:{value:e.style.lineRadius,callback:function(t){e.$set(e.style,"lineRadius",t)},expression:"style.lineRadius"}},e._l([0,2,5,7,10,12,15],(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1):e._e()]),t("div",{staticClass:"row"},["curve"===e.style.lineStyle&&e.showRootLineKeepSameInCurveLayouts?t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.rootLineStartPos")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("rootLineStartPositionKeepSameInCurve",t)}},model:{value:e.style.rootLineStartPositionKeepSameInCurve,callback:function(t){e.$set(e.style,"rootLineStartPositionKeepSameInCurve",t)},expression:"style.rootLineStartPositionKeepSameInCurve"}},[t("el-option",{key:"center",attrs:{label:e.$t("baseStyle.center"),value:!1}}),t("el-option",{key:"right",attrs:{label:e.$t("baseStyle.edge"),value:!0}})],1)],1):e._e()]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:t=>{e.update("showLineMarker",t)}},model:{value:e.style.showLineMarker,callback:function(t){e.$set(e.style,"showLineMarker",t)},expression:"style.showLineMarker"}},[e._v(e._s(e.$t("baseStyle.showArrow")))])],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.rainbowLines")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-popover",{attrs:{placement:"right",trigger:"click"},model:{value:e.rainbowLinesPopoverVisible,callback:function(t){e.rainbowLinesPopoverVisible=t},expression:"rainbowLinesPopoverVisible"}},[t("div",{staticClass:"rainbowLinesOptionsBox",class:{isDark:e.isDark}},e._l(e.rainbowLinesOptions,(function(s){return t("div",{key:s.value,staticClass:"optionItem"},[s.list?t("div",{staticClass:"colorsBar",on:{click:function(t){return e.updateRainbowLinesConfig(s)}}},e._l(s.list,(function(e){return t("span",{staticClass:"colorItem",style:{backgroundColor:e}})})),0):t("span",{on:{click:function(t){return e.updateRainbowLinesConfig(s)}}},[e._v(e._s(e.$t("baseStyle.notUseRainbowLines")))])])})),0),t("div",{staticClass:"curRainbowLine",attrs:{slot:"reference"},slot:"reference"},[e.curRainbowLineColorList?t("div",{staticClass:"colorsBar"},e._l(e.curRainbowLineColorList,(function(e){return t("span",{staticClass:"colorItem",style:{backgroundColor:e}})})),0):t("span",[e._v(e._s(e.$t("baseStyle.notUseRainbowLines")))])])])],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.lineOfOutline")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"block",style:{backgroundColor:e.style.generalizationLineColor}}),t("el-popover",{ref:"popover2",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.style.generalizationLineColor},on:{change:t=>{e.update("generalizationLineColor",t)}}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.width")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("generalizationLineWidth",t)}},model:{value:e.style.generalizationLineWidth,callback:function(t){e.$set(e.style,"generalizationLineWidth",t)},expression:"style.generalizationLineWidth"}},e._l(e.lineWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.associativeLine")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.associativeLineColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover4",arg:"popover4"}],staticClass:"block",style:{backgroundColor:e.style.associativeLineColor}}),t("el-popover",{ref:"popover4",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.style.associativeLineColor},on:{change:t=>{e.update("associativeLineColor",t)}}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.associativeLineWidth")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("associativeLineWidth",t)}},model:{value:e.style.associativeLineWidth,callback:function(t){e.$set(e.style,"associativeLineWidth",t)},expression:"style.associativeLineWidth"}},e._l(e.lineWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.associativeLineActiveColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],staticClass:"block",style:{backgroundColor:e.style.associativeLineActiveColor}}),t("el-popover",{ref:"popover5",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.style.associativeLineActiveColor},on:{change:t=>{e.update("associativeLineActiveColor",t)}}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.associativeLineActiveWidth")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.update("associativeLineActiveWidth",t)}},model:{value:e.style.associativeLineActiveWidth,callback:function(t){e.$set(e.style,"associativeLineActiveWidth",t)},expression:"style.associativeLineActiveWidth"}},e._l(e.lineWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1)],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.associativeLineText")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.fontFamily")))]),t("el-select",{attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("associativeLineTextFontFamily",t)}},model:{value:e.style.associativeLineTextFontFamily,callback:function(t){e.$set(e.style,"associativeLineTextFontFamily",t)},expression:"style.associativeLineTextFontFamily"}},e._l(e.fontFamilyList,(function(e){return t("el-option",{key:e.value,style:{fontFamily:e.value},attrs:{label:e.name,value:e.value}})})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.color")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover6",arg:"popover6"}],staticClass:"block",style:{backgroundColor:e.style.associativeLineTextColor}}),t("el-popover",{ref:"popover6",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.style.associativeLineTextColor},on:{change:t=>{e.update("associativeLineTextColor",t)}}})],1)],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.fontSize")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:function(t){return e.update("associativeLineTextFontSize",t)}},model:{value:e.style.associativeLineTextFontSize,callback:function(t){e.$set(e.style,"associativeLineTextFontSize",t)},expression:"style.associativeLineTextFontSize"}},e._l(e.fontSizeList,(function(e){return t("el-option",{key:e,style:{fontSize:e+"px"},attrs:{label:e,value:e}})})),1)],1)]),e.showNodeUseLineStyle?[t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.nodeBorderType")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:t=>{e.update("nodeUseLineStyle",t)}},model:{value:e.style.nodeUseLineStyle,callback:function(t){e.$set(e.style,"nodeUseLineStyle",t)},expression:"style.nodeUseLineStyle"}},[e._v(e._s(e.$t("baseStyle.nodeUseLineStyle")))])],1)])]:e._e(),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.nodePadding")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.horizontal")))]),t("el-slider",{staticStyle:{width:"200px"},on:{change:t=>{e.update("paddingX",t)}},model:{value:e.style.paddingX,callback:function(t){e.$set(e.style,"paddingX",t)},expression:"style.paddingX"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.vertical")))]),t("el-slider",{staticStyle:{width:"200px"},on:{change:t=>{e.update("paddingY",t)}},model:{value:e.style.paddingY,callback:function(t){e.$set(e.style,"paddingY",t)},expression:"style.paddingY"}})],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.image")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.maximumWidth")))]),t("el-slider",{staticStyle:{width:"140px"},attrs:{min:10,max:300},on:{change:t=>{e.update("imgMaxWidth",t)}},model:{value:e.style.imgMaxWidth,callback:function(t){e.$set(e.style,"imgMaxWidth",t)},expression:"style.imgMaxWidth"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.maximumHeight")))]),t("el-slider",{staticStyle:{width:"140px"},attrs:{min:10,max:300},on:{change:t=>{e.update("imgMaxHeight",t)}},model:{value:e.style.imgMaxHeight,callback:function(t){e.$set(e.style,"imgMaxHeight",t)},expression:"style.imgMaxHeight"}})],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.icon")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.size")))]),t("el-slider",{staticStyle:{width:"200px"},attrs:{min:12,max:50},on:{change:t=>{e.update("iconSize",t)}},model:{value:e.style.iconSize,callback:function(t){e.$set(e.style,"iconSize",t)},expression:"style.iconSize"}})],1)]),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.nodeMargin")))]),t("div",{staticClass:"row column"},[t("el-tabs",{staticClass:"tab",on:{"tab-click":e.initMarginStyle},model:{value:e.marginActiveTab,callback:function(t){e.marginActiveTab=t},expression:"marginActiveTab"}},[t("el-tab-pane",{attrs:{label:e.$t("baseStyle.level2Node"),name:"second"}}),t("el-tab-pane",{attrs:{label:e.$t("baseStyle.belowLevel2Node"),name:"node"}})],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.horizontal")))]),t("el-slider",{staticStyle:{width:"200px"},attrs:{max:200},on:{change:t=>{e.updateMargin("marginX",t)}},model:{value:e.style.marginX,callback:function(t){e.$set(e.style,"marginX",t)},expression:"style.marginX"}})],1),t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.vertical")))]),t("el-slider",{staticStyle:{width:"200px"},attrs:{max:200},on:{change:t=>{e.updateMargin("marginY",t)}},model:{value:e.style.marginY,callback:function(t){e.$set(e.style,"marginY",t)},expression:"style.marginY"}})],1)],1),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.watermark")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:e.watermarkShowChange},model:{value:e.watermarkConfig.show,callback:function(t){e.$set(e.watermarkConfig,"show",t)},expression:"watermarkConfig.show"}},[e._v(e._s(e.$t("baseStyle.showWatermark")))])],1)]),e.watermarkConfig.show?[t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:e.updateWatermarkConfig},model:{value:e.watermarkConfig.onlyExport,callback:function(t){e.$set(e.watermarkConfig,"onlyExport",t)},expression:"watermarkConfig.onlyExport"}},[e._v(e._s(e.$t("baseStyle.onlyExport")))])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:e.updateWatermarkConfig},model:{value:e.watermarkConfig.belowNode,callback:function(t){e.$set(e.watermarkConfig,"belowNode",t)},expression:"watermarkConfig.belowNode"}},[e._v(e._s(e.$t("baseStyle.belowNode")))])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkText")))]),t("el-input",{attrs:{size:"small"},on:{change:e.updateWatermarkConfig},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.watermarkConfig.text,callback:function(t){e.$set(e.watermarkConfig,"text",t)},expression:"watermarkConfig.text"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkTextColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover3",arg:"popover3"}],staticClass:"block",style:{backgroundColor:e.watermarkConfig.textStyle.color}}),t("el-popover",{ref:"popover3",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.watermarkConfig.textStyle.color},on:{change:t=>{e.watermarkConfig.textStyle.color=t,e.updateWatermarkConfig()}}})],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkTextOpacity")))]),t("el-slider",{staticStyle:{width:"170px"},attrs:{min:0,max:1,step:.1},on:{change:e.updateWatermarkConfig},model:{value:e.watermarkConfig.textStyle.opacity,callback:function(t){e.$set(e.watermarkConfig.textStyle,"opacity",t)},expression:"watermarkConfig.textStyle.opacity"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkTextFontSize")))]),t("el-input-number",{attrs:{size:"small",min:0,max:50,step:1},on:{change:e.updateWatermarkConfig},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.watermarkConfig.textStyle.fontSize,callback:function(t){e.$set(e.watermarkConfig.textStyle,"fontSize",t)},expression:"watermarkConfig.textStyle.fontSize"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkAngle")))]),t("el-input-number",{attrs:{size:"small",min:0,max:90,step:10},on:{change:e.updateWatermarkConfig},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.watermarkConfig.angle,callback:function(t){e.$set(e.watermarkConfig,"angle",t)},expression:"watermarkConfig.angle"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkLineSpacing")))]),t("el-input-number",{attrs:{size:"small",step:10},on:{change:e.updateWatermarkConfig},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.watermarkConfig.lineSpacing,callback:function(t){e.$set(e.watermarkConfig,"lineSpacing",t)},expression:"watermarkConfig.lineSpacing"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.watermarkTextSpacing")))]),t("el-input-number",{attrs:{size:"small",step:10},on:{change:e.updateWatermarkConfig},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.watermarkConfig.textSpacing,callback:function(t){e.$set(e.watermarkConfig,"textSpacing",t)},expression:"watermarkConfig.textSpacing"}})],1)])]:e._e(),t("div",{staticClass:"title noTop"},[e._v(e._s(e.$t("baseStyle.otherConfig")))]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:t=>{e.updateOtherConfig("enableFreeDrag",t)}},model:{value:e.config.enableFreeDrag,callback:function(t){e.$set(e.config,"enableFreeDrag",t)},expression:"config.enableFreeDrag"}},[e._v(e._s(e.$t("baseStyle.enableFreeDrag")))])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:e.enableNodeRichTextChange},model:{value:e.enableNodeRichText,callback:function(t){e.enableNodeRichText=t},expression:"enableNodeRichText"}},[e._v(e._s(e.$t("baseStyle.isEnableNodeRichText")))])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.mousewheelAction")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.updateOtherConfig("mousewheelAction",t)}},model:{value:e.config.mousewheelAction,callback:function(t){e.$set(e.config,"mousewheelAction",t)},expression:"config.mousewheelAction"}},[t("el-option",{attrs:{label:e.$t("baseStyle.zoomView"),value:"zoom"}}),t("el-option",{attrs:{label:e.$t("baseStyle.moveViewUpDown"),value:"move"}})],1)],1)]),"zoom"===e.config.mousewheelAction?t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.mousewheelZoomActionReverse")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.updateOtherConfig("mousewheelZoomActionReverse",t)}},model:{value:e.config.mousewheelZoomActionReverse,callback:function(t){e.$set(e.config,"mousewheelZoomActionReverse",t)},expression:"config.mousewheelZoomActionReverse"}},[t("el-option",{attrs:{label:e.$t("baseStyle.mousewheelZoomActionReverse1"),value:!1}}),t("el-option",{attrs:{label:e.$t("baseStyle.mousewheelZoomActionReverse2"),value:!0}})],1)],1)]):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("baseStyle.createNewNodeBehavior")))]),t("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.updateOtherConfig("createNewNodeBehavior",t)}},model:{value:e.config.createNewNodeBehavior,callback:function(t){e.$set(e.config,"createNewNodeBehavior",t)},expression:"config.createNewNodeBehavior"}},[t("el-option",{attrs:{label:e.$t("baseStyle.default"),value:"default"}}),t("el-option",{attrs:{label:e.$t("baseStyle.notActive"),value:"notActive"}}),t("el-option",{attrs:{label:e.$t("baseStyle.activeOnly"),value:"activeOnly"}})],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:function(t){return e.updateLocalConfig("isShowScrollbar",t)}},model:{value:e.localConfigs.isShowScrollbar,callback:function(t){e.$set(e.localConfigs,"isShowScrollbar",t)},expression:"localConfigs.isShowScrollbar"}},[e._v(e._s(e.$t("baseStyle.isShowScrollbar")))])],1)]),e.supportHandDrawnLikeStyle?t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("el-checkbox",{on:{change:function(t){return e.updateLocalConfig("isUseHandDrawnLikeStyle",t)}},model:{value:e.localConfigs.isUseHandDrawnLikeStyle,callback:function(t){e.$set(e.localConfigs,"isUseHandDrawnLikeStyle",t)},expression:"localConfigs.isUseHandDrawnLikeStyle"}},[e._v(e._s(e.$t("baseStyle.isUseHandDrawnLikeStyle")))])],1)]):e._e()],2):e._e()])},bs=[],vs=s("358c"),Cs={name:"BaseStyle",components:{Sidebar:Qt,Color:we,ImgUpload:c["a"]},props:{data:{type:[Object,null],default:null},mindMap:{type:Object}},data(){return{rainbowLinesOptions:vs["c"],lineWidthList:K["o"],fontSizeList:K["j"],activeTab:"color",marginActiveTab:"second",style:{backgroundColor:"",lineColor:"",lineWidth:"",lineStyle:"",showLineMarker:"",rootLineKeepSameInCurve:"",rootLineStartPositionKeepSameInCurve:"",lineRadius:0,generalizationLineWidth:"",generalizationLineColor:"",associativeLineColor:"",associativeLineWidth:0,associativeLineActiveWidth:0,associativeLineActiveColor:"",associativeLineTextFontSize:0,associativeLineTextColor:"",associativeLineTextFontFamily:"",paddingX:0,paddingY:0,imgMaxWidth:0,imgMaxHeight:0,iconSize:0,backgroundImage:"",backgroundRepeat:"no-repeat",backgroundPosition:"",backgroundSize:"",marginX:0,marginY:0,nodeUseLineStyle:!1},config:{enableFreeDrag:!1,mousewheelAction:"zoom",mousewheelZoomActionReverse:!1,createNewNodeBehavior:"default"},watermarkConfig:{show:!1,onlyExport:!1,text:"",lineSpacing:100,textSpacing:100,angle:30,textStyle:{color:"",opacity:0,fontSize:1}},rainbowLinesPopoverVisible:!1,curRainbowLineColorList:null,updateWatermarkTimer:null,enableNodeRichText:!0,localConfigs:{isShowScrollbar:!1,isUseHandDrawnLikeStyle:!1},currentLayout:""}},computed:{...Object(W["d"])({activeSidebar:e=>e.activeSidebar,localConfig:e=>e.localConfig,isDark:e=>e.localConfig.isDark,supportHandDrawnLikeStyle:e=>e.supportHandDrawnLikeStyle}),lineStyleList(){return K["m"][this.$i18n.locale]||K["m"].zh},rootLineKeepSameInCurveList(){return K["p"][this.$i18n.locale]||K["p"].zh},backgroundRepeatList(){return K["b"][this.$i18n.locale]||K["b"].zh},backgroundPositionList(){return K["a"][this.$i18n.locale]||K["a"].zh},backgroundSizeList(){return K["c"][this.$i18n.locale]||K["c"].zh},fontFamilyList(){return K["i"][this.$i18n.locale]||K["i"].zh},lineStyleMap(){return K["n"][this.$i18n.locale]||K["n"].zh},showNodeUseLineStyle(){return vs["f"].includes(this.currentLayout)},showLineRadius(){return"straight"===this.style.lineStyle&&vs["d"].includes(this.currentLayout)},lineStyleListShow(){const e=[];return this.lineStyleList.forEach(t=>{const s=vs["e"][t.value];s?s.includes(this.currentLayout)&&e.push(t):e.push(t)}),e},showRootLineKeepSameInCurveLayouts(){return vs["g"].includes(this.currentLayout)}},watch:{activeSidebar(e){"baseStyle"===e?(this.$refs.sidebar.show=!0,this.initStyle(),this.initConfig(),this.initWatermark(),this.initRainbowLines(),this.currentLayout=this.mindMap.getLayout()):this.$refs.sidebar.show=!1},lineStyleListShow:{deep:!0,handler(){const e=this.lineStyleListShow.find(e=>e.value===this.style.lineStyle);e||(this.style.lineStyle=this.lineStyleListShow[0].value)}}},created(){this.initLoacalConfig(),this.$bus.$on("setData",this.onSetData)},beforeDestroy(){this.$bus.$off("setData",this.onSetData)},methods:{...Object(W["c"])(["setLocalConfig"]),onSetData(){"baseStyle"===this.activeSidebar&&setTimeout(()=>{this.initStyle()},0)},initStyle(){["backgroundColor","lineWidth","lineStyle","showLineMarker","rootLineKeepSameInCurve","rootLineStartPositionKeepSameInCurve","lineRadius","lineColor","generalizationLineWidth","generalizationLineColor","associativeLineColor","associativeLineWidth","associativeLineActiveWidth","associativeLineActiveColor","associativeLineTextFontSize","associativeLineTextColor","associativeLineTextFontFamily","paddingX","paddingY","imgMaxWidth","imgMaxHeight","iconSize","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","nodeUseLineStyle"].forEach(e=>{this.style[e]=this.mindMap.getThemeConfig(e),"backgroundImage"===e&&"none"===this.style[e]&&(this.style[e]="")}),this.initMarginStyle()},initConfig(){["enableFreeDrag","mousewheelAction","mousewheelZoomActionReverse","createNewNodeBehavior"].forEach(e=>{this.config[e]=this.mindMap.getConfig(e)})},initLoacalConfig(){this.enableNodeRichText=this.localConfig.openNodeRichText,this.mousewheelAction=this.localConfig.mousewheelAction,this.mousewheelZoomActionReverse=this.localConfig.mousewheelZoomActionReverse,["isShowScrollbar","isUseHandDrawnLikeStyle"].forEach(e=>{this.localConfigs[e]=this.localConfig[e]})},initWatermark(){let e=this.mindMap.getConfig("watermarkConfig");["text","lineSpacing","textSpacing","angle","onlyExport"].forEach(t=>{this.watermarkConfig[t]=e[t]}),this.watermarkConfig.show=!!e.text,this.watermarkConfig.textStyle={...e.textStyle}},initRainbowLines(){const e=this.mindMap.getConfig("rainbowLinesConfig")||{};this.curRainbowLineColorList=e.open&&this.mindMap.rainbowLines?this.mindMap.rainbowLines.getColorsList():null},initMarginStyle(){["marginX","marginY"].forEach(e=>{this.style[e]=this.mindMap.getThemeConfig()[this.marginActiveTab][e]})},update(e,t){this.style[e]="backgroundImage"===e&&"none"===t?"":t,this.data.theme.config[e]=t,this.$bus.$emit("showLoading"),this.mindMap.setThemeConfig(this.data.theme.config),Object(de["e"])({theme:{template:this.mindMap.getTheme(),config:this.data.theme.config}})},updateOtherConfig(e,t){this.mindMap.updateConfig({[e]:t}),this.data.config=this.data.config||{},this.data.config[e]=t,Object(de["e"])({config:this.data.config})},updateWatermarkConfig(){clearTimeout(this.updateWatermarkTimer),this.updateWatermarkTimer=setTimeout(()=>{let{show:e,...t}=this.watermarkConfig;this.mindMap.watermark.updateWatermark({...t}),this.data.config=this.data.config||{},this.data.config.watermarkConfig=this.mindMap.getConfig("watermarkConfig"),Object(de["e"])({config:this.data.config})},300)},updateRainbowLinesConfig(e){this.rainbowLinesPopoverVisible=!1,this.curRainbowLineColorList=e.list||null,this.data.config=this.data.config||{};let t=null;t=e.list?{open:!0,colorsList:e.list}:{open:!1},this.data.config.rainbowLinesConfig=t,this.mindMap.rainbowLines.updateRainLinesConfig(t),Object(de["e"])({config:this.data.config})},updateMargin(e,t){this.style[e]=t,this.data.theme.config[this.marginActiveTab]||(this.data.theme.config[this.marginActiveTab]={}),this.data.theme.config[this.marginActiveTab][e]=t,this.mindMap.setThemeConfig(this.data.theme.config),Object(de["e"])({theme:{template:this.mindMap.getTheme(),config:this.data.theme.config}})},watermarkShowChange(e){if(e){let e=this.watermarkConfig.text||this.$t("baseStyle.watermarkDefaultText");this.watermarkConfig.text=e}else this.watermarkConfig.text="";this.updateWatermarkConfig()},enableNodeRichTextChange(e){this.mindMap.renderer.textEdit.hideEditTextBox(),this.setLocalConfig({openNodeRichText:e})},updateLocalConfig(e,t){this.setLocalConfig({[e]:t})}}},ws=Cs,ys=(s("bbc4"),s("a9d3"),Object(m["a"])(ws,fs,bs,!1,null,"18377410",null)),_s=ys.exports,ks=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("theme.title")}},[t("div",{staticClass:"themeList",class:{isDark:e.isDark}},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.groupList,(function(e){return t("el-tab-pane",{key:e.name,attrs:{label:e.name,name:e.name}})})),1),e._l(e.currentList,(function(s){return t("div",{key:s.value,staticClass:"themeItem",class:{active:s.value===e.theme},on:{click:function(t){return e.useTheme(s)}}},[t("div",{staticClass:"imgBox"},[t("img",{attrs:{src:e.themeMap[s.value],alt:""}})]),t("div",{staticClass:"name"},[e._v(e._s(s.name))])])}))],2)])},xs=[],Ss=s("4013"),$s=s("e7f4"),Ds={name:"Theme",components:{Sidebar:Qt},props:{mindMap:{type:Object}},data(){return{themeList:[...Ss["i"],...$s["a"]].reverse(),themeMap:vs["h"],theme:"",activeName:"",groupList:[]}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar}),currentList(){return this.groupList.find(e=>e.name===this.activeName).list}},watch:{activeSidebar(e){"theme"===e?(this.theme=this.mindMap.getTheme(),this.$refs.sidebar.show=!0):this.$refs.sidebar.show=!1}},created(){this.initGroup(),this.theme=this.mindMap.getTheme(),this.mindMap.on("view_theme_change",this.handleViewThemeChange)},beforeDestroy(){this.mindMap.off("view_theme_change",this.handleViewThemeChange)},methods:{...Object(W["c"])(["setLocalConfig"]),handleViewThemeChange(){this.theme=this.mindMap.getTheme(),this.handleDark()},initGroup(){let e=["default","skyGreen","classic2","classic3","classicGreen","classicBlue","blueSky","brainImpairedPink","earthYellow","freshGreen","freshRed","romanticPurple","pinkGrape","mint"],t=[],s=[];this.themeList.forEach(i=>{e.includes(i.value)?t.push(i):i.dark||s.push(i)}),this.groupList=[{name:this.$t("theme.classics"),list:s},{name:this.$t("theme.dark"),list:this.themeList.filter(e=>e.dark)},{name:this.$t("theme.simple"),list:t}],this.activeName=this.groupList[0].name},useTheme(e){if(e.value===this.theme)return;this.theme=e.value,this.handleDark();const t=this.mindMap.getCustomThemeConfig(),s=Object.keys(t).length>0;s?this.$confirm(this.$t("theme.coverTip"),this.$t("theme.tip"),{confirmButtonText:this.$t("theme.cover"),cancelButtonText:this.$t("theme.reserve"),type:"warning",distinguishCancelAndClose:!0,callback:s=>{"confirm"===s?(this.mindMap.setThemeConfig({},!0),this.changeTheme(e,{})):"cancel"===s&&this.changeTheme(e,t)}}):this.changeTheme(e,t)},changeTheme(e,t){this.$bus.$emit("showLoading"),this.mindMap.setTheme(e.value),Object(de["e"])({theme:{template:e.value,config:t}})},handleDark(){let e=this.themeList.find(e=>e.value===this.theme);this.setLocalConfig({isDark:e.dark})}}},Ts=Ds,Ns=(s("beaa"),Object(m["a"])(Ts,ks,xs,!1,null,"9ea13d56",null)),Is=Ns.exports,Ms=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("strusture.title")}},[t("div",{staticClass:"layoutList",class:{isDark:e.isDark}},e._l(e.layoutList,(function(s){return t("div",{key:s.value,staticClass:"layoutItem",class:{active:s.value===e.layout},on:{click:function(t){return e.useLayout(s)}}},[t("div",{staticClass:"imgBox"},[t("img",{attrs:{src:e.layoutImgMap[s.value],alt:""}})]),t("div",{staticClass:"name"},[e._v(e._s(s.name))])])})),0)])},Ls=[],Os={name:"Structure",components:{Sidebar:Qt},props:{mindMap:{type:Object}},data(){return{layoutList:Ss["e"],layoutImgMap:vs["b"],layout:""}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar})},watch:{activeSidebar(e){"structure"===e?(this.layout=this.mindMap.getLayout(),this.$refs.sidebar.show=!0):this.$refs.sidebar.show=!1}},methods:{useLayout(e){this.layout=e.value,this.mindMap.setLayout(e.value),Object(de["e"])({layout:e.value})}}},Es=Os,As=(s("88d4"),Object(m["a"])(Es,Ms,Ls,!1,null,"161dbd7f",null)),Ps=As.exports,Fs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"countContainer",class:{isDark:e.isDark}},[t("div",{staticClass:"item"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("count.words")))]),t("span",{staticClass:"value"},[e._v(e._s(e.words))])]),t("div",{staticClass:"item"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("count.nodes")))]),t("span",{staticClass:"value"},[e._v(e._s(e.num))])])])},js=[];let Rs=document.createElement("div");var zs={name:"Count",props:{mindMap:{type:Object}},data(){return{textStr:"",words:0,num:0}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark})},created(){this.$bus.$on("data_change",this.onDataChange),this.mindMap&&this.onDataChange(this.mindMap.getData())},beforeDestroy(){this.$bus.$off("data_change",this.onDataChange)},methods:{onDataChange(e){this.textStr="",this.words=0,this.num=0,this.walk(e),Rs.innerHTML=this.textStr,this.words=Rs.textContent.length},walk(e){e&&(this.num++,this.textStr+=String(e.data.text)||"",e.children&&e.children.length>0&&e.children.forEach(e=>{this.walk(e)}))}}},Bs=zs,Vs=(s("b4f6"),Object(m["a"])(Bs,Fs,js,!1,null,"93b6f346",null)),Us=Vs.exports,Hs=function(){var e=this,t=e._self._c;return t("div",{staticClass:"navigatorContainer",class:{isDark:e.isDark}},[t("div",{staticClass:"item"},[t("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:e.onLangChange},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}},e._l(e.langList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),t("div",{staticClass:"item"},[t("el-tooltip",{attrs:{effect:"dark",content:e.$t("navigatorToolbar.backToRoot"),placement:"top"}},[t("div",{staticClass:"btn iconfont icondingwei",on:{click:e.backToRoot}})])],1),t("div",{staticClass:"item"},[t("div",{staticClass:"btn iconfont iconsousuo",on:{click:e.showSearch}})]),t("div",{staticClass:"item"},[t("MouseAction",{attrs:{isDark:e.isDark,mindMap:e.mindMap}})],1),t("div",{staticClass:"item"},[t("el-tooltip",{attrs:{effect:"dark",content:e.openMiniMap?e.$t("navigatorToolbar.closeMiniMap"):e.$t("navigatorToolbar.openMiniMap"),placement:"top"}},[t("div",{staticClass:"btn iconfont icondaohang1",on:{click:e.toggleMiniMap}})])],1),t("div",{staticClass:"item"},[t("Fullscreen",{attrs:{isDark:e.isDark,mindMap:e.mindMap}})],1),t("div",{staticClass:"item"},[t("Scale",{attrs:{isDark:e.isDark,mindMap:e.mindMap}})],1),t("div",{staticClass:"item"},[t("div",{staticClass:"btn iconfont",class:[e.isDark?"iconmoon_line":"iconlieri"],on:{click:e.toggleDark}})]),t("div",{staticClass:"item"},[t("Demonstrate",{attrs:{isDark:e.isDark,mindMap:e.mindMap}})],1),t("div",{staticClass:"item"},[t("el-dropdown",{on:{command:e.handleCommand}},[t("div",{staticClass:"btn iconfont iconbangzhu"}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"helpDoc"}},[e._v("使用文档")]),t("el-dropdown-item",{attrs:{command:"devDoc"}},[e._v("问题反馈")]),t("el-dropdown-item",{attrs:{disabled:""}},[e._v("当前：v"+e._s(e.version))])],1)],1)],1)])},Ws=[],Ks=function(){var e=this,t=e._self._c;return t("div",{staticClass:"scaleContainer",class:{isDark:e.isDark}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("scale.zoomOut"),placement:"top"}},[t("div",{staticClass:"btn el-icon-minus",on:{click:e.narrow}})]),t("div",{staticClass:"scaleInfo"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.scaleNum,expression:"scaleNum"}],attrs:{type:"text"},domProps:{value:e.scaleNum},on:{change:e.onScaleNumChange,focus:e.onScaleNumInputFocus,input:function(t){t.target.composing||(e.scaleNum=t.target.value)}}}),e._v("% ")]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("scale.zoomIn"),placement:"top"}},[t("div",{staticClass:"btn el-icon-plus",on:{click:e.enlarge}})])],1)},Ys=[],Gs={name:"Scale",props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{scaleNum:100,cacheScaleNum:0}},watch:{mindMap(e,t){e&&!t&&(this.mindMap.on("scale",e=>{this.scaleNum=this.toPer(e)}),this.scaleNum=this.toPer(this.mindMap.view.scale))}},methods:{toPer(e){return(100*e).toFixed(0)},narrow(){this.mindMap.view.narrow()},enlarge(){this.mindMap.view.enlarge()},onScaleNumInputFocus(){this.cacheScaleNum=this.scaleNum},onScaleNumChange(){const e=Number(this.scaleNum);if(Number.isNaN(e)||e<=0)this.scaleNum=this.cacheScaleNum;else{const e=this.mindMap.width/2,t=this.mindMap.height/2;this.mindMap.view.setScale(this.scaleNum/100,e,t)}}}},Xs=Gs,Zs=(s("f716"),Object(m["a"])(Xs,Ks,Ys,!1,null,"ddd661dc",null)),qs=Zs.exports,Js=function(){var e=this,t=e._self._c;return t("div",{staticClass:"fullscreenContainer",class:{isDark:e.isDark}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("fullscreen.fullscreenShow"),placement:"top"}},[t("div",{staticClass:"btn iconfont iconquanping",on:{click:e.toFullscreenShow}})]),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("fullscreen.fullscreenEdit"),placement:"top"}},[t("div",{staticClass:"btn iconfont iconquanping1",on:{click:e.toFullscreenEdit}})])],1)},Qs=[],ei={name:"Fullscreen",props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{}},created(){document[te["d"]]=()=>{setTimeout(()=>{this.mindMap.resize()},1e3)}},methods:{toFullscreenShow(){Object(te["c"])(this.mindMap.el)},toFullscreenEdit(){Object(te["c"])(document.body)}}},ti=ei,si=(s("4ccd"),Object(m["a"])(ti,Js,Qs,!1,null,"714078de",null)),ii=si.exports,ai=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mouseActionContainer",class:{isDark:e.isDark}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.useLeftKeySelectionRightKeyDrag?e.$t("mouseAction.tip2"):e.$t("mouseAction.tip1"),placement:"top"}},[t("div",{staticClass:"btn iconfont",class:[e.useLeftKeySelectionRightKeyDrag?"iconmouseR":"iconmouseL"],on:{click:e.toggleAction}})])],1)},oi=[],ni={name:"MouseAction",props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{}},computed:{...Object(W["d"])({useLeftKeySelectionRightKeyDrag:e=>e.localConfig.useLeftKeySelectionRightKeyDrag})},methods:{...Object(W["c"])(["setLocalConfig"]),toggleAction(){let e=!this.useLeftKeySelectionRightKeyDrag;this.mindMap.updateConfig({useLeftKeySelectionRightKeyDrag:e}),this.setLocalConfig({useLeftKeySelectionRightKeyDrag:e})}}},ri=ni,li=(s("db39"),Object(m["a"])(ri,ai,oi,!1,null,"331c7fa9",null)),ci=li.exports,di=s("9225"),hi=(s("a06c"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"demonstrateContainer",class:{isDark:e.isDark}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.$t("demonstrate.demonstrate"),placement:"top"}},[t("div",{staticClass:"btn iconfont iconyanshibofang",on:{click:e.enterDemoMode}})]),e.isEnterDemonstrate?t("div",{ref:"exitDemonstrateBtnRef",staticClass:"exitDemonstrateBtn",on:{click:e.exit,mousedown:function(e){e.stopPropagation()},mousemove:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()}}},[t("span",{staticClass:"icon iconfont iconguanbi"})]):e._e(),e.isEnterDemonstrate?t("div",{ref:"stepBoxRef",staticClass:"stepBox",on:{mousedown:function(e){e.stopPropagation()},mousemove:function(e){e.stopPropagation()},mouseup:function(e){e.stopPropagation()}}},[t("div",{staticClass:"jump",class:{disabled:e.curStepIndex<=0},on:{click:e.prev}},[t("span",{staticClass:"icon el-icon-back"})]),t("div",{staticClass:"step"},[e._v(e._s(e.curStepIndex+1)+" / "+e._s(e.totalStep))]),t("div",{staticClass:"jump",class:{disabled:e.curStepIndex>=e.totalStep-1},on:{click:e.next}},[t("span",{staticClass:"icon el-icon-right"})]),t("div",{staticClass:"input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputStep,expression:"inputStep"}],attrs:{type:"text"},domProps:{value:e.inputStep},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.onEnter.apply(null,arguments))},keydown:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.inputStep=t.target.value)}}})])]):e._e()],1)}),ui=[],mi={props:{mindMap:{type:Object},isDark:{type:Boolean}},data(){return{isEnterDemonstrate:!1,curStepIndex:0,totalStep:0,inputStep:""}},created(){this.$bus.$on("demonstrate_jump",this.onJump),this.$bus.$on("exit_demonstrate",this.onExit)},methods:{enterDemoMode(){this.isEnterDemonstrate=!0,this.$nextTick(()=>{const e=document.querySelector("#mindMapContainer");e.appendChild(this.$refs.exitDemonstrateBtnRef),e.appendChild(this.$refs.stepBoxRef)}),this.mindMap.demonstrate.enter()},exit(){this.mindMap.demonstrate.exit()},onExit(){this.isEnterDemonstrate=!1,this.curStepIndex=0,this.totalStep=0},onJump(e,t){this.curStepIndex=e,this.totalStep=t},prev(){this.mindMap.demonstrate.prev()},next(){this.mindMap.demonstrate.next()},onEnter(){const e=Number(this.inputStep);Number.isNaN(e)?this.inputStep="":e>=1&&e<=this.totalStep&&this.mindMap.demonstrate.jump(e-1)}}},pi=mi,gi=(s("8b93"),Object(m["a"])(pi,hi,ui,!1,null,"10de3df2",null)),fi=gi.exports,bi={name:"NavigatorToolbar",components:{Scale:qs,Fullscreen:ii,MouseAction:ci,Demonstrate:fi},props:{mindMap:{type:Object}},data(){return{version:"1.1.9",langList:K["k"],lang:"",openMiniMap:!1}},computed:{...Object(W["d"])({isReadonly:e=>e.isReadonly,isDark:e=>e.localConfig.isDark})},created(){this.lang=Object(de["c"])()},methods:{...Object(W["c"])(["setLocalConfig","setIsReadonly","setIsSourceCodeEdit"]),readonlyChange(){this.setIsReadonly(!this.isReadonly),this.mindMap.setMode(this.isReadonly?"readonly":"edit")},toggleMiniMap(){this.openMiniMap=!this.openMiniMap,this.$bus.$emit("toggle_mini_map",this.openMiniMap)},onLangChange(e){di["a"].locale=e,Object(de["g"])(e),this.$bus.$emit("lang_change")},showSearch(){this.$bus.$emit("show_search")},toggleDark(){this.setLocalConfig({isDark:!this.isDark})},handleCommand(e){let t="";switch(e){case"github":t="https://github.com/wanglin2/mind-map";break;case"helpDoc":t="https://docs.qq.com/doc/DYkNiekxtV3BwaW9m?u=2755f280259642feae5f6c877b6c5187/";break;case"devDoc":t="https://docs.qq.com/sheet/DYmhpWGRVVGFqWmZw?tab=BB08J2&_t=1715851815954";break;case"site":t="https://wanglin2.github.io/mind-map/#/index";break;case"issue":t="https://github.com/wanglin2/mind-map/issues/new";break;default:break}const s=document.createElement("a");s.href=t,s.target="_blank",s.click()},backToRoot(){this.mindMap.renderer.setRootNodeCenter()},openSourceCodeEdit(){this.setIsSourceCodeEdit(!0)}}},vi=bi,Ci=(s("9fb9"),Object(m["a"])(vi,Hs,Ws,!1,null,"2b5417a4",null)),wi=Ci.exports,yi=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("shortcutKey.title")}},[t("div",{staticClass:"box",class:{isDark:e.isDark}},e._l(e.shortcutKeyList,(function(s){return t("div",{key:s.type},[t("div",{staticClass:"title"},[e._v(e._s(s.type))]),e._l(s.list,(function(s){return t("div",{key:s.value,staticClass:"list"},[t("div",{staticClass:"item"},[s.icon?t("span",{staticClass:"icon iconfont",class:[s.icon]}):e._e(),t("span",{staticClass:"name",attrs:{title:s.name}},[e._v(e._s(s.name))]),t("div",{staticClass:"value",attrs:{title:s.value}},[e._v(e._s(s.value))])])])}))],2)})),0)])},_i=[],ki={name:"ShortcutKey",components:{Sidebar:Qt},data(){return{}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar}),shortcutKeyList(){return K["s"][this.$i18n.locale]||K["s"].zh}},watch:{activeSidebar(e){this.$refs.sidebar.show="shortcutKey"===e}}},xi=ki,Si=(s("91b9"),Object(m["a"])(xi,yi,_i,!1,null,"3047a982",null)),$i=Si.exports,Di=function(){var e=this,t=e._self._c;return e.isShow?t("div",{ref:"contextmenuRef",staticClass:"contextmenuContainer listBox",class:{isDark:e.isDark},style:{left:e.left+"px",top:e.top+"px"}},["node"===e.type?[t("div",{staticClass:"item",class:{disabled:e.insertNodeBtnDisabled},on:{click:function(t){return e.exec("INSERT_NODE",e.insertNodeBtnDisabled)}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.insertSiblingNode")))]),t("span",{staticClass:"desc"},[e._v("Enter")])]),t("div",{staticClass:"item",class:{disabled:e.isGeneralization},on:{click:function(t){return e.exec("INSERT_CHILD_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.insertChildNode")))]),t("span",{staticClass:"desc"},[e._v("Tab")])]),t("div",{staticClass:"item",class:{disabled:e.insertNodeBtnDisabled},on:{click:function(t){return e.exec("INSERT_PARENT_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.insertParentNode")))]),t("span",{staticClass:"desc"},[e._v("Shift + Tab")])]),t("div",{staticClass:"item",class:{disabled:e.insertNodeBtnDisabled},on:{click:function(t){return e.exec("ADD_GENERALIZATION")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.insertSummary")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + G")])]),t("div",{staticClass:"item",class:{disabled:e.upNodeBtnDisabled},on:{click:function(t){return e.exec("UP_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.moveUpNode")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + ↑")])]),t("div",{staticClass:"item",class:{disabled:e.downNodeBtnDisabled},on:{click:function(t){return e.exec("DOWN_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.moveDownNode")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + ↓")])]),t("div",{staticClass:"item danger",on:{click:function(t){return e.exec("REMOVE_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.deleteNode")))]),t("span",{staticClass:"desc"},[e._v("Delete")])]),t("div",{staticClass:"item danger",on:{click:function(t){return e.exec("REMOVE_CURRENT_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.deleteCurrentNode")))]),t("span",{staticClass:"desc"},[e._v("Shift + Backspace")])]),t("div",{staticClass:"item",class:{disabled:e.isGeneralization},on:{click:function(t){return e.exec("COPY_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.copyNode")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + C")])]),t("div",{staticClass:"item",class:{disabled:e.isGeneralization},on:{click:function(t){return e.exec("CUT_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.cutNode")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + X")])]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("PASTE_NODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.pasteNode")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + V")])]),e.hasHyperlink?t("div",{staticClass:"item",on:{click:function(t){return e.exec("REMOVE_HYPERLINK")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.removeHyperlink")))])]):e._e(),e.hasNote?t("div",{staticClass:"item",on:{click:function(t){return e.exec("REMOVE_NOTE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.removeNote")))])]):e._e(),t("div",{staticClass:"item",on:{click:function(t){return e.exec("REMOVE_CUSTOM_STYLES")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.removeCustomStyles")))])]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("EXPORT_CUR_NODE_TO_PNG")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.exportNodeToPng")))])])]:e._e(),"svg"===e.type?[t("div",{staticClass:"item",on:{click:function(t){return e.exec("RETURN_CENTER")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.backCenter")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + Enter")])]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("EXPAND_ALL")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.expandAll")))])]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("UNEXPAND_ALL")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.unExpandAll")))])]),t("div",{staticClass:"item"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.expandTo")))]),t("span",{staticClass:"el-icon-arrow-right"}),t("div",{staticClass:"subItems listBox",class:{isDark:e.isDark}},e._l(e.expandList,(function(s,i){return t("div",{key:s,staticClass:"item",on:{click:function(t){return e.exec("UNEXPAND_TO_LEVEL",!1,i+1)}}},[e._v(" "+e._s(s)+" ")])})),0)]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("RESET_LAYOUT")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.arrangeLayout")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + L")])]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("FIT_CANVAS")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.fitCanvas")))]),t("span",{staticClass:"desc"},[e._v("Ctrl + i")])]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("TOGGLE_ZEN_MODE")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.zenMode")))]),e._v(" "+e._s(e.isZenMode?"√":"")+" ")]),t("div",{staticClass:"item",on:{click:function(t){return e.exec("REMOVE_ALL_NODE_CUSTOM_STYLES")}}},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.removeAllNodeCustomStyles")))])]),t("div",{staticClass:"item"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("contextmenu.copyToClipboard")))]),t("span",{staticClass:"el-icon-arrow-right"}),t("div",{staticClass:"subItems listBox",class:{isDark:e.isDark}},e._l(e.copyList,(function(s){return t("div",{key:s.value,staticClass:"item",on:{click:function(t){return e.copyToClipboard(s.value)}}},[e._v(" "+e._s(s.name)+" ")])})),0)])]:e._e()],2):e._e()},Ti=[],Ni=s("08af"),Ii=s("de81"),Mi={name:"Contextmenu",props:{mindMap:{type:Object}},data(){return{isShow:!1,left:0,top:0,node:null,type:"",isMousedown:!1,mosuedownX:0,mosuedownY:0,enableCopyToClipboardApi:navigator.clipboard}},computed:{...Object(W["d"])({isZenMode:e=>e.localConfig.isZenMode,isDark:e=>e.localConfig.isDark}),expandList(){return[this.$t("contextmenu.level1"),this.$t("contextmenu.level2"),this.$t("contextmenu.level3"),this.$t("contextmenu.level4"),this.$t("contextmenu.level5"),this.$t("contextmenu.level6")]},copyList(){const e=[{name:this.$t("contextmenu.copyToSmm"),value:"smm"},{name:this.$t("contextmenu.copyToJson"),value:"json"},{name:this.$t("contextmenu.copyToMarkdown"),value:"md"},{name:this.$t("contextmenu.copyToTxt"),value:"txt"}];return this.enableCopyToClipboardApi&&e.push({name:this.$t("contextmenu.copyToPng"),value:"png"}),e},insertNodeBtnDisabled(){return!this.node||this.node.isRoot||this.node.isGeneralization},upNodeBtnDisabled(){if(!this.node||this.node.isRoot||this.node.isGeneralization)return!0;let e=0===this.node.parent.children.findIndex(e=>e===this.node);return e},downNodeBtnDisabled(){if(!this.node||this.node.isRoot||this.node.isGeneralization)return!0;let e=this.node.parent.children,t=e.findIndex(e=>e===this.node)===e.length-1;return t},isGeneralization(){return this.node.isGeneralization},hasHyperlink(){return!!this.node.getData("hyperlink")},hasNote(){return!!this.node.getData("note")}},created(){this.$bus.$on("node_contextmenu",this.show),this.$bus.$on("node_click",this.hide),this.$bus.$on("draw_click",this.hide),this.$bus.$on("expand_btn_click",this.hide),this.$bus.$on("svg_mousedown",this.onMousedown),this.$bus.$on("mouseup",this.onMouseup),this.$bus.$on("translate",this.hide)},beforeDestroy(){this.$bus.$off("node_contextmenu",this.show),this.$bus.$off("node_click",this.hide),this.$bus.$off("draw_click",this.hide),this.$bus.$off("expand_btn_click",this.hide),this.$bus.$off("svg_mousedown",this.onMousedown),this.$bus.$off("mouseup",this.onMouseup),this.$bus.$off("translate",this.hide)},methods:{...Object(W["c"])(["setLocalConfig"]),getShowPosition(e,t){const s=this.$refs.contextmenuRef.getBoundingClientRect();return e+s.width>window.innerWidth&&(e=e-s.width-20),t+s.height>window.innerHeight&&(t=window.innerHeight-s.height-10),{x:e,y:t}},show(e,t){this.type="node",this.isShow=!0,this.node=t,this.$nextTick(()=>{const{x:t,y:s}=this.getShowPosition(e.clientX+10,e.clientY+10);this.left=t,this.top=s})},onMousedown(e){3===e.which&&(this.mosuedownX=e.clientX,this.mosuedownY=e.clientY,this.isMousedown=!0)},onMouseup(e){this.isMousedown&&(this.isMousedown=!1,Math.abs(this.mosuedownX-e.clientX)>3||Math.abs(this.mosuedownY-e.clientY)>3?this.hide():this.show2(e))},show2(e){this.type="svg",this.isShow=!0,this.$nextTick(()=>{const{x:t,y:s}=this.getShowPosition(e.clientX+10,e.clientY+10);this.left=t,this.top=s})},hide(){this.isShow=!1,this.left=-9999,this.top=-9999,this.type=""},exec(e,t,...s){if(!t){switch(e){case"COPY_NODE":this.mindMap.renderer.copy();break;case"CUT_NODE":this.mindMap.renderer.cut();break;case"PASTE_NODE":this.mindMap.renderer.paste();break;case"RETURN_CENTER":this.mindMap.renderer.setRootNodeCenter();break;case"TOGGLE_ZEN_MODE":this.setLocalConfig({isZenMode:!this.isZenMode});break;case"FIT_CANVAS":this.mindMap.view.fit();break;case"REMOVE_HYPERLINK":this.node.setHyperlink("","");break;case"REMOVE_NOTE":this.node.setNote("");break;case"EXPORT_CUR_NODE_TO_PNG":this.mindMap.export("png",!0,Object(d["L"])(this.node.getData("text")),!1,this.node);break;default:this.$bus.$emit("execCommand",e,...s);break}this.hide()}},async copyToClipboard(e){try{let t,s;switch(this.hide(),e){case"smm":case"json":t=this.mindMap.getData(!0),s=JSON.stringify(t);break;case"md":t=this.mindMap.getData(),s=Object(Ni["a"])(t);break;case"txt":t=this.mindMap.getData(),s=Object(Ii["a"])(t);break;case"png":const e=await this.mindMap.export("png",!1),i=await Object(d["U"])(e,!0);Object(te["setImgToClipboard"])(i);break;default:break}s&&(this.enableCopyToClipboardApi?Object(te["setDataToClipboard"])(s):Object(te["a"])(s)),this.$message.success(this.$t("contextmenu.copySuccess"))}catch(t){console.log(t),this.$message.error(this.$t("contextmenu.copyFail"))}}}},Li=Mi,Oi=(s("17a4"),Object(m["a"])(Li,Di,Ti,!1,null,"1dc4c6aa",null)),Ei=Oi.exports,Ai=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showRichTextToolbar,expression:"showRichTextToolbar"}],ref:"richTextToolbar",staticClass:"richTextToolbar",class:{isDark:e.isDark},style:e.style,on:{"&click":function(e){e.stopPropagation()}}},[t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.bold"),placement:"top"}},[t("div",{staticClass:"btn",class:{active:e.formatInfo.bold},on:{click:e.toggleBold}},[t("span",{staticClass:"icon iconfont iconzitijiacu"})])]),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.italic"),placement:"top"}},[t("div",{staticClass:"btn",class:{active:e.formatInfo.italic},on:{click:e.toggleItalic}},[t("span",{staticClass:"icon iconfont iconzitixieti"})])]),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.underline"),placement:"top"}},[t("div",{staticClass:"btn",class:{active:e.formatInfo.underline},on:{click:e.toggleUnderline}},[t("span",{staticClass:"icon iconfont iconzitixiahuaxian"})])]),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.strike"),placement:"top"}},[t("div",{staticClass:"btn",class:{active:e.formatInfo.strike},on:{click:e.toggleStrike}},[t("span",{staticClass:"icon iconfont iconshanchuxian"})])]),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.fontFamily"),placement:"top"}},[t("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[t("div",{staticClass:"fontOptionsList",class:{isDark:e.isDark}},e._l(e.fontFamilyList,(function(s){return t("div",{key:s.value,staticClass:"fontOptionItem",class:{active:e.formatInfo.font===s.value},style:{fontFamily:s.value},on:{click:function(t){return e.changeFontFamily(s.value)}}},[e._v(" "+e._s(s.name)+" ")])})),0),t("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"icon iconfont iconxingzhuang-wenzi"})])])],1),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.fontSize"),placement:"top"}},[t("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[t("div",{staticClass:"fontOptionsList",class:{isDark:e.isDark}},e._l(e.fontSizeList,(function(s){return t("div",{key:s,staticClass:"fontOptionItem",class:{active:e.formatInfo.size===s+"px"},style:{fontSize:s+"px",height:(s<30?30:s+10)+"px"},on:{click:function(t){return e.changeFontSize(s)}}},[e._v(" "+e._s(s)+"px ")])})),0),t("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"icon iconfont iconcase fontColor"})])])],1),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.color"),placement:"top"}},[t("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.fontColor},on:{change:e.changeFontColor}}),t("div",{staticClass:"btn",style:{color:e.formatInfo.color},attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"icon iconfont iconzitiyanse"})])],1)],1),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.backgroundColor"),placement:"top"}},[t("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[t("Color",{attrs:{color:e.fontBackgroundColor},on:{change:e.changeFontBackgroundColor}}),t("div",{staticClass:"btn",attrs:{slot:"reference"},slot:"reference"},[t("span",{staticClass:"icon iconfont iconbeijingyanse"})])],1)],1),t("el-tooltip",{attrs:{content:e.$t("richTextToolbar.removeFormat"),placement:"top"}},[t("div",{staticClass:"btn",on:{click:e.removeFormat}},[t("span",{staticClass:"icon iconfont iconqingchu"})])])],1)},Pi=[],Fi={name:"RichTextToolbar",components:{Color:we},props:{mindMap:{type:Object}},data(){return{fontSizeList:K["j"],showRichTextToolbar:!1,style:{left:0,top:0},fontColor:"",fontBackgroundColor:"",formatInfo:{}}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark}),fontFamilyList(){return K["i"][this.$i18n.locale]||K["i"].zh}},created(){this.$bus.$on("rich_text_selection_change",this.onRichTextSelectionChange)},mounted(){document.body.append(this.$refs.richTextToolbar)},beforeDestroy(){this.$bus.$off("rich_text_selection_change",this.onRichTextSelectionChange)},methods:{onRichTextSelectionChange(e,t,s){e&&(this.style.left=t.left+t.width/2+"px",this.style.top=t.top-60+"px",this.formatInfo={...s||{}}),this.showRichTextToolbar=e},toggleBold(){this.formatInfo.bold=!this.formatInfo.bold,this.mindMap.richText.formatText({bold:this.formatInfo.bold})},toggleItalic(){this.formatInfo.italic=!this.formatInfo.italic,this.mindMap.richText.formatText({italic:this.formatInfo.italic})},toggleUnderline(){this.formatInfo.underline=!this.formatInfo.underline,this.mindMap.richText.formatText({underline:this.formatInfo.underline})},toggleStrike(){this.formatInfo.strike=!this.formatInfo.strike,this.mindMap.richText.formatText({strike:this.formatInfo.strike})},changeFontFamily(e){this.formatInfo.font=e,this.mindMap.richText.formatText({font:e})},changeFontSize(e){this.formatInfo.size=e,this.mindMap.richText.formatText({size:e+"px"})},changeFontColor(e){this.formatInfo.color=e,this.mindMap.richText.formatText({color:e})},changeFontBackgroundColor(e){this.formatInfo.background=e,this.mindMap.richText.formatText({background:e})},removeFormat(){this.mindMap.richText.removeFormat()}}},ji=Fi,Ri=(s("4fc1"),Object(m["a"])(ji,Ai,Pi,!1,null,"0041a5be",null)),zi=Ri.exports,Bi=function(){var e=this,t=e._self._c;return t("div",{ref:"noteContentViewer",staticClass:"noteContentViewer",style:{left:this.left+"px",top:this.top+"px",visibility:e.show?"visible":"hidden"},on:{click:function(e){e.stopPropagation()}}})},Vi=[],Ui=s("f059"),Hi=s.n(Ui),Wi=(s("fe5f"),{name:"NodeNoteContentShow",props:{mindMap:{type:Object,default(){return null}}},data(){return{editor:null,show:!1,left:0,top:0,node:null}},created(){this.$bus.$on("showNoteContent",this.onShowNoteContent),this.$bus.$on("hideNoteContent",this.hideNoteContent),document.body.addEventListener("click",this.hideNoteContent),this.$bus.$on("node_active",this.hideNoteContent),this.$bus.$on("scale",this.onScale),this.$bus.$on("translate",this.onScale),this.$bus.$on("svg_mousedown",this.hideNoteContent),this.$bus.$on("expand_btn_click",this.hideNoteContent)},mounted(){this.mindMap.el.appendChild(this.$refs.noteContentViewer),this.initEditor()},beforeDestroy(){this.$bus.$off("showNoteContent",this.onShowNoteContent),this.$bus.$off("hideNoteContent",this.hideNoteContent),document.body.removeEventListener("click",this.hideNoteContent),this.$bus.$off("node_active",this.hideNoteContent),this.$bus.$off("scale",this.onScale),this.$bus.$off("translate",this.onScale),this.$bus.$off("svg_mousedown",this.hideNoteContent),this.$bus.$off("expand_btn_click",this.hideNoteContent)},methods:{onShowNoteContent(e,t,s,i){this.node=i,this.editor.setMarkdown(e),this.updateNoteContentPosition(t,s),this.show=!0},updateNoteContentPosition(e,t){this.left=e,this.top=t},onScale(){if(!this.node||!this.show)return;const{left:e,top:t}=this.node.getNoteContentPosition();this.updateNoteContentPosition(e,t)},hideNoteContent(){this.show=!1},initEditor(){this.editor||(this.editor=new Hi.a({el:this.$refs.noteContentViewer}))}}}),Ki=Wi,Yi=(s("655a"),Object(m["a"])(Ki,Bi,Vi,!1,null,"58a896fe",null)),Gi=Yi.exports,Xi=function(){var e=this,t=e._self._c;return e.showMiniMap?t("div",{ref:"navigatorBox",staticClass:"navigatorBox",class:{isDark:e.isDark},style:{width:e.width+"px"},on:{mousedown:e.onMousedown,mousemove:e.onMousemove}},[t("div",{ref:"svgBox",staticClass:"svgBox",style:{transform:`scale(${e.svgBoxScale})`,left:e.svgBoxLeft+"px",top:e.svgBoxTop+"px"}},[t("img",{attrs:{src:e.mindMapImg},on:{mousedown:function(e){e.preventDefault()}}})]),t("div",{staticClass:"windowBox",class:{withTransition:e.withTransition},style:e.viewBoxStyle,on:{mousedown:function(t){return t.stopPropagation(),e.onViewBoxMousedown.apply(null,arguments)},mousemove:e.onViewBoxMousemove}})]):e._e()},Zi=[],qi={props:{mindMap:{type:Object}},data(){return{showMiniMap:!1,timer:null,boxWidth:0,boxHeight:0,svgBoxScale:1,svgBoxLeft:0,svgBoxTop:0,viewBoxStyle:{left:0,top:0,bottom:0,right:0},mindMapImg:"",width:0,setSizeTimer:null,withTransition:!0}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark})},mounted(){this.setSize(),window.addEventListener("resize",this.setSize),this.$bus.$on("toggle_mini_map",this.toggle_mini_map),this.$bus.$on("data_change",this.data_change),this.$bus.$on("view_data_change",this.data_change),this.$bus.$on("node_tree_render_end",this.data_change),window.addEventListener("mouseup",this.onMouseup),this.mindMap.on("mini_map_view_box_position_change",this.onViewBoxPositionChange)},destroyed(){window.removeEventListener("resize",this.setSize),this.$bus.$off("toggle_mini_map",this.toggle_mini_map),this.$bus.$off("data_change",this.data_change),this.$bus.$off("view_data_change",this.data_change),this.$bus.$off("node_tree_render_end",this.data_change),window.removeEventListener("mouseup",this.onMouseup),this.mindMap.off("mini_map_view_box_position_change",this.onViewBoxPositionChange)},methods:{toggle_mini_map(e){this.showMiniMap=e,this.$nextTick(()=>{this.$refs.navigatorBox&&this.init(),this.$refs.svgBox&&this.drawMiniMap()})},data_change(){this.showMiniMap&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.drawMiniMap()},500))},setSize(){clearTimeout(this.setSizeTimer),this.setSizeTimer=setTimeout(()=>{this.width=Math.min(window.innerWidth-80,370),this.$nextTick(()=>{this.showMiniMap&&(this.init(),this.drawMiniMap())})},300)},init(){let{width:e,height:t}=this.$refs.navigatorBox.getBoundingClientRect();this.boxWidth=e,this.boxHeight=t},drawMiniMap(){let{getImgUrl:e,viewBoxStyle:t,miniMapBoxScale:s,miniMapBoxLeft:i,miniMapBoxTop:a}=this.mindMap.miniMap.calculationMiniMap(this.boxWidth,this.boxHeight);e(e=>{this.mindMapImg=e}),this.viewBoxStyle=t,this.svgBoxScale=s,this.svgBoxLeft=i,this.svgBoxTop=a},onMousedown(e){this.mindMap.miniMap.onMousedown(e)},onMousemove(e){this.mindMap.miniMap.onMousemove(e)},onMouseup(e){this.withTransition||(this.withTransition=!0),this.mindMap.miniMap.onMouseup(e)},onViewBoxMousedown(e){this.mindMap.miniMap.onViewBoxMousedown(e)},onViewBoxMousemove(e){this.mindMap.miniMap.onViewBoxMousemove(e)},onViewBoxPositionChange({left:e,right:t,top:s,bottom:i}){this.withTransition=!1,this.viewBoxStyle.left=e,this.viewBoxStyle.right=t,this.viewBoxStyle.top=s,this.viewBoxStyle.bottom=i}}},Ji=qi,Qi=(s("8470"),Object(m["a"])(Ji,Xi,Zi,!1,null,"9ad8992e",null)),ea=Qi.exports,ta=function(){var e=this,t=e._self._c;return t("viewer",{attrs:{images:e.images}},e._l(e.images,(function(e){return t("img",{key:e,attrs:{src:e}})})),0)},sa=[],ia={props:{mindMap:{type:Object,default(){return null}}},data(){return{images:[]}},mounted(){this.mindMap.on("node_img_dblclick",this.onNodeTmgDblclick)},beforeDestroy(){this.mindMap.off("node_img_dblclick",this.onNodeTmgDblclick)},methods:{onNodeTmgDblclick(e,t){t.stopPropagation(),t.preventDefault(),this.images=[e.nodeData.data.image],this.$viewerApi({images:this.images})}}},aa=ia,oa=Object(m["a"])(aa,ta,sa,!1,null,null,null),na=oa.exports,ra=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebarTriggerContainer",class:{hasActive:e.show&&e.activeSidebar,show:e.show,isDark:e.isDark},on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"toggleShowBtn",class:{hide:!e.show},on:{click:function(t){e.show=!e.show}}},[t("span",{staticClass:"iconfont iconjiantouyou"})]),t("div",{staticClass:"trigger"},e._l(e.triggerList,(function(s){return t("div",{key:s.value,staticClass:"triggerItem",class:{active:e.activeSidebar===s.value},on:{click:function(t){return e.trigger(s)}}},[t("div",{staticClass:"triggerIcon iconfont",class:[s.icon]}),t("div",{staticClass:"triggerName"},[e._v(e._s(s.name))])])})),0)])},la=[],ca={name:"SidebarTrigger",data(){return{show:!0}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar}),triggerList(){return K["t"][this.$i18n.locale]||K["t"].zh}},methods:{...Object(W["c"])(["setActiveSidebar"]),trigger(e){this.setActiveSidebar(e.value)}}},da=ca,ha=(s("26db"),Object(m["a"])(da,ra,la,!1,null,"10ecfceb",null)),ua=ha.exports,ma=function(){var e=this,t=e._self._c;return t("div",{staticClass:"customNodeContent"},[t("p",[e._v(e._s(e.title))]),t("p",{domProps:{innerHTML:e._s(e.html)}}),t("p",{style:{backgroundColor:e.color},on:{click:e.onClick}},[e._v("点击我会变色")])])},pa=[],ga={props:{html:{type:String,default:""}},data(){return{title:"我是自定义节点",color:""}},methods:{onClick(){this.color="red"}}},fa=ga,ba=(s("f1f2"),Object(m["a"])(fa,ma,pa,!1,null,"6ef61ceb",null)),va=(ba.exports,s("41cb"),s("c0d6"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"searchContainer",class:{isDark:e.isDark,show:e.show},on:{mouseleave:e.onMouseleave}},[t("div",{staticClass:"closeBtnBox"},[t("span",{staticClass:"closeBtn el-icon-close",on:{click:e.close}})]),t("div",{staticClass:"searchInputBox"},[t("el-input",{ref:"searchInputRef",attrs:{placeholder:e.$t("search.searchPlaceholder"),size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.onSearchNext.apply(null,arguments))},keydown:function(e){e.stopPropagation()}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),e.isUndef(e.searchText)?e._e():t("el-button",{attrs:{slot:"append",size:"small"},on:{click:function(t){e.showReplaceInput=!0}},slot:"append"},[e._v(e._s(e.$t("search.replace")))])],1),e.showSearchInfo?t("div",{staticClass:"searchInfo"},[e._v(" "+e._s(e.currentIndex)+" / "+e._s(e.total)+" ")]):e._e()],1),e.showReplaceInput?t("el-input",{ref:"replaceInputRef",staticStyle:{margin:"12px 0"},attrs:{placeholder:e.$t("search.replacePlaceholder"),size:"small"},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.replaceText,callback:function(t){e.replaceText=t},expression:"replaceText"}},[t("i",{staticClass:"el-input__icon el-icon-edit",attrs:{slot:"prefix"},slot:"prefix"}),t("el-button",{attrs:{slot:"append",size:"small"},on:{click:e.hideReplaceInput},slot:"append"},[e._v(e._s(e.$t("search.cancel")))])],1):e._e(),e.showReplaceInput?t("div",{staticClass:"btnList"},[t("el-button",{attrs:{size:"small",disabled:e.isReadonly},on:{click:e.replace}},[e._v(e._s(e.$t("search.replace")))]),t("el-button",{attrs:{size:"small",disabled:e.isReadonly},on:{click:e.replaceAll}},[e._v(e._s(e.$t("search.replaceAll")))])],1):e._e()],1)}),Ca=[],wa={name:"Search",props:{mindMap:{type:Object}},data(){return{show:!1,searchText:"",replaceText:"",showReplaceInput:!1,currentIndex:0,total:0,showSearchInfo:!1}},computed:{...Object(W["d"])({isReadonly:e=>e.isReadonly,isDark:e=>e.localConfig.isDark})},watch:{searchText(){Object(d["Y"])(this.searchText)&&(this.currentIndex=0,this.total=0,this.showSearchInfo=!1)}},created(){this.$bus.$on("show_search",this.showSearch),this.mindMap.on("search_info_change",this.handleSearchInfoChange),this.mindMap.keyCommand.addShortcut("Control+f",this.showSearch)},beforeDestroy(){this.$bus.$off("show_search",this.showSearch),this.mindMap.off("search_info_change",this.handleSearchInfoChange),this.mindMap.keyCommand.removeShortcut("Control+f",this.showSearch)},methods:{isUndef:d["Y"],handleSearchInfoChange(e){this.currentIndex=e.currentIndex+1,this.total=e.total,this.showSearchInfo=!0},showSearch(){this.$bus.$emit("closeSideBar"),this.show=!0},hideReplaceInput(){this.showReplaceInput=!1,this.replaceText=""},onSearchNext(){this.mindMap.search.search(this.searchText,()=>{this.$refs.searchInputRef.focus()})},replace(){this.mindMap.search.replace(this.replaceText,!0)},replaceAll(){this.mindMap.search.replaceAll(this.replaceText)},close(){this.show=!1,this.showSearchInfo=!1,this.total=0,this.currentIndex=0,this.searchText="",this.hideReplaceInput(),this.mindMap.search.endSearch()},onMouseleave(){this.$refs.searchInputRef&&this.$refs.searchInputRef.blur(),this.$refs.replaceInputRef&&this.$refs.replaceInputRef.blur()}}},ya=wa,_a=(s("b189"),Object(m["a"])(ya,va,Ca,!1,null,"4c813624",null)),ka=_a.exports,xa=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("nodeIconSidebar.title")}},[t("div",{staticClass:"box",class:{isDark:e.isDark}},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.$t("nodeIconSidebar.icon"),name:"icon"}})],1),t("div",{staticClass:"boxContent"},["icon"===e.activeName?t("div",{staticClass:"iconBox"},e._l(e.nodeIconList,(function(s){return t("div",{key:s.name,staticClass:"item"},[t("div",{staticClass:"title"},[e._v(e._s(s.name))]),t("div",{staticClass:"list"},e._l(s.list,(function(i){return t("div",{key:i.name,staticClass:"icon",class:{selected:e.iconList.includes(s.type+"_"+i.name)},domProps:{innerHTML:e._s(e.getHtml(i.icon))},on:{click:function(t){return e.setIcon(s.type,i.name)}}})})),0)])})),0):e._e()])],1)])},Sa=[],$a=s("de42"),Da={name:"NodeIconSidebar",components:{Sidebar:Qt},data(){return{activeName:"icon",nodeIconList:Object(d["cb"])([...x["b"],...S["a"]]),nodeImageList:[...$a["a"]],iconList:[],nodeImage:"",activeNodes:[]}},computed:{...Object(W["d"])({activeSidebar:e=>e.activeSidebar,isDark:e=>e.localConfig.isDark})},watch:{activeSidebar(e){this.$refs.sidebar.show="nodeIconSidebar"===e}},created(){this.$bus.$on("node_active",this.handleNodeActive),this.$bus.$on("showNodeIcon",this.handleShowNodeIcon)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive),this.$bus.$off("showNodeIcon",this.handleShowNodeIcon)},methods:{handleNodeActive(...e){if(this.activeNodes=[...e[1]],this.activeNodes.length>0)if(1===this.activeNodes.length){let e=this.activeNodes[0];this.nodeImage=e.getData("image")||"",this.iconList=e.getData("icon")||[]}else this.nodeImage=[],this.iconList=[];else this.iconList=[],this.nodeImage=""},handleShowNodeIcon(){this.dialogVisible=!0},getHtml(e){return/^<svg/.test(e)?e:`<img src="${e}" />`},setIcon(e,t){this.activeNodes.forEach(s=>{const i=[...s.getData("icon")||[]];let a=e+"_"+t,o=i.findIndex(e=>e===a);if(-1!==o)i.splice(o,1);else{let t=i.findIndex(t=>t.split("_")[0]===e);-1!==t?i.splice(t,1,a):i.push(a)}s.setIcon(i),1===this.activeNodes.length&&(this.iconList=i)})},setImage(e){this.activeNodes.forEach(t=>{this.nodeImage=e.url,t.setImage({...e})})}}},Ta=Da,Na=(s("86b4"),Object(m["a"])(Ta,xa,Sa,!1,null,"33ad8a92",null)),Ia=Na.exports,Ma=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showNodeIconToolbar,expression:"showNodeIconToolbar"}],ref:"nodeIconToolbar",staticClass:"nodeIconToolbar",style:e.style,on:{"&click":function(e){e.stopPropagation()}}},[t("div",{staticClass:"iconListBox"},e._l(e.iconList,(function(s){return t("div",{key:s.name,staticClass:"icon",class:{selected:e.nodeIconList.includes(e.iconType+"_"+s.name)},domProps:{innerHTML:e._s(e.getHtml(s.icon))},on:{click:function(t){return e.setIcon(s.name)}}})})),0),t("div",{staticClass:"btnBox"},[t("span",{staticClass:"btn iconfont iconshanchu",on:{click:e.deleteIcon}})])])},La=[];const Oa=[...x["b"],...S["a"]];var Ea={name:"NodeIconToolbar",components:{},props:{mindMap:{type:Object}},data(){return{showNodeIconToolbar:!1,style:{left:0,top:0},node:null,iconType:"",iconName:"",nodeIconList:[],iconList:[]}},computed:{...Object(W["d"])(["activeSidebar"])},created(){this.mindMap.on("node_icon_click",this.show),this.mindMap.on("draw_click",this.close),this.mindMap.on("svg_mousedown",this.close),this.mindMap.on("node_dblclick",this.close),this.mindMap.on("node_active",this.onNodeActive),this.mindMap.on("scale",this.onScale),this.$bus.$on("close_node_icon_toolbar",this.close)},mounted(){document.body.append(this.$refs.nodeIconToolbar)},beforeDestroy(){this.mindMap.off("node_icon_click",this.show),this.mindMap.off("draw_click",this.close),this.mindMap.off("svg_mousedown",this.close),this.mindMap.off("node_dblclick",this.close),this.mindMap.off("node_active",this.onNodeActive),this.mindMap.off("scale",this.onScale),this.$bus.$off("close_node_icon_toolbar",this.close)},methods:{...Object(W["c"])(["setActiveSidebar"]),show(e,t){this.node=e,this.iconType=t.split("_")[0],this.iconName=t.split("_")[1],this.nodeIconList=e.getData("icon")||[],this.iconList=[...Oa.find(e=>e.type===this.iconType).list],this.updatePos(),this.showNodeIconToolbar=!0,"nodeIconSidebar"===this.activeSidebar&&this.setActiveSidebar("")},close(){this.showNodeIconToolbar=!1,this.node=null,this.iconType="",this.iconName="",this.nodeIconList=[],this.iconList=[],this.style.left=0,this.style.top=0},updatePos(){if(!this.node)return;const e=this.node.getRect();this.style.left=e.x+"px",this.style.top=e.y+e.height+"px"},onScale(){this.updatePos()},onNodeActive(e){e!==this.node&&this.close()},deleteIcon(){this.setIcon(this.iconName),this.close()},getHtml(e){return/^<svg/.test(e)?e:`<img src="${e}" />`},setIcon(e){let t=this.iconType+"_"+e,s=this.nodeIconList.findIndex(e=>e===t);if(-1!==s)this.nodeIconList.splice(s,1);else{let s=this.nodeIconList.findIndex(e=>e.split("_")[0]===this.iconType);-1!==s?(this.nodeIconList.splice(s,1,t),this.iconName=e):this.nodeIconList.push(t)}this.node.setIcon([...this.nodeIconList])}}},Aa=Ea,Pa=(s("75a5"),Object(m["a"])(Aa,Ma,La,!1,null,"1321abee",null)),Fa=Pa.exports,ja=function(){var e=this,t=e._self._c;return e.isOutlineEdit?t("div",{ref:"outlineEditContainer",staticClass:"outlineEditContainer",class:{isDark:e.isDark}},[t("div",{staticClass:"closeBtn",on:{click:e.onClose}},[t("span",{staticClass:"icon iconfont iconguanbi"})]),t("div",{ref:"outlineEditBox",staticClass:"outlineEditBox"},[t("div",{staticClass:"outlineEdit"},[t("el-tree",{ref:"tree",staticClass:"outlineTree",class:{isDark:e.isDark},attrs:{"node-key":"uid",draggable:"","default-expand-all":"",data:e.data,props:e.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"allow-drag":e.checkAllowDrag},on:{"node-drop":e.onNodeDrop,"current-change":e.onCurrentChange},scopedSlots:e._u([{key:"default",fn:function({node:s,data:i}){return t("span",{staticClass:"customNode",attrs:{"data-id":i.uid}},[t("span",{key:e.getKey(),staticClass:"nodeEdit",attrs:{contenteditable:!e.isReadonly},domProps:{innerHTML:e._s(s.label)},on:{blur:function(t){return e.onBlur(t,s)},keydown:function(t){return t.stopPropagation(),e.onNodeInputKeydown(t,s)},keyup:function(e){e.stopPropagation()},paste:function(t){return e.onPaste(t,s)}}})])}}],null,!1,485109613)})],1)])]):e._e()},Ra=[],za={name:"OutlineEdit",props:{mindMap:{type:Object}},data(){return{data:[],defaultProps:{label:"label"},currentData:null}},computed:{...Object(W["d"])({isReadonly:e=>e.isReadonly,isDark:e=>e.localConfig.isDark,isOutlineEdit:e=>e.isOutlineEdit})},watch:{isOutlineEdit(e){e&&(this.refresh(),this.$nextTick(()=>{document.body.appendChild(this.$refs.outlineEditContainer)}))}},created(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown)},methods:{...Object(W["c"])(["setIsOutlineEdit"]),refresh(){let e=this.mindMap.getData();e.root=!0;let t=e=>{let s=e.data.richText?Object(d["eb"])(e.data.text):e.data.text;s=Object(d["T"])(s),s=s.replaceAll(/\n/g,"<br>"),e.textCache=s,e.label=s,e.uid=e.data.uid,e.children&&e.children.length>0&&e.children.forEach(e=>{t(e)})};t(e),this.data=[e]},checkAllowDrag(e){return!e.data.root},onNodeDrop(){this.save()},onCurrentChange(e){this.currentData=e},onBlur(e,t){if(t.data.textCache===e.target.innerHTML)return;const s=t.data.data.richText,i=s?e.target.innerHTML:e.target.innerText;t.data.data.text=s?Object(d["sb"])(i):i,s&&(t.data.data.resetRichText=!0),t.data.textCache=e.target.innerHTML,this.save()},onNodeInputKeydown(e,t){const s=!!t.data.data.richText,i=Object(d["q"])(),a=this.$t("outline.nodeDefaultText"),o={textCache:a,uid:i,label:a,data:{text:s?Object(d["sb"])(a):a,uid:i,richText:s},children:[]};if(s&&(o.data.resetRichText=!0),13===e.keyCode&&!e.shiftKey){if(e.preventDefault(),t.data.root)return;this.$refs.tree.insertAfter(o,t)}9===e.keyCode&&(e.preventDefault(),e.shiftKey?(this.$refs.tree.insertAfter(t.data,t.parent),this.$refs.tree.remove(t)):this.$refs.tree.append(o,t)),this.save(),this.$nextTick(()=>{this.$refs.tree.setCurrentKey(i);const e=document.querySelector(`.customNode[data-id="${i}"] .nodeEdit`);if(e){let t=window.getSelection(),s=document.createRange();s.selectNodeContents(e),t.removeAllRanges(),t.addRange(s);let i=e.offsetTop;this.scrollTo(i)}})},onKeyDown(e){this.isOutlineEdit&&[46,8].includes(e.keyCode)&&this.currentData&&(e.stopPropagation(),this.$refs.tree.remove(this.currentData),this.currentData=null,this.save())},onPaste(e){Object(d["R"])(e)},getKey(){return Math.random()},onClose(){this.setIsOutlineEdit(!1),this.$bus.$emit("setData",this.getData())},scrollTo(e){let t=this.$refs.outlineEditBox,s=t.offsetHeight,i=t.scrollTop;e+=50,e>i+s&&t.scrollTo(0,e-s/2)},getData(){let e={},t=this.data[0],s=(e,t)=>{t.data=e.data,t.children=[],(e.children||[]).forEach(e=>{const i={};t.children.push(i),s(e,i)})};return s(t,e),Object(d["rb"])(e)},save(){Object(de["f"])(this.getData())}}},Ba=za,Va=(s("8abd"),Object(m["a"])(Ba,ja,Ra,!1,null,"157fc5ba",null)),Ua=Va.exports,Ha=s("3908"),Wa=s("e1ba"),Ka=function(){var e=this,t=e._self._c;return t("div",{staticClass:"scrollbarContainer",class:{isDark:e.isDark}},[t("div",{ref:"verticalScrollbarRef",staticClass:"scrollbar verticalScrollbar",on:{click:e.onVerticalScrollbarClick}},[t("div",{staticClass:"scrollbarInner",style:e.verticalScrollbarStyle,on:{click:function(e){e.stopPropagation()},mousedown:e.onVerticalScrollbarMousedown}})]),t("div",{ref:"horizontalScrollbarRef",staticClass:"scrollbar horizontalScrollbar",on:{click:e.onHorizontalScrollbarClick}},[t("div",{staticClass:"scrollbarInner",style:e.horizontalScrollbarStyle,on:{click:function(e){e.stopPropagation()},mousedown:e.onHorizontalScrollbarMousedown}})])])},Ya=[],Ga={props:{mindMap:{type:Object}},data(){return{timer:null,resizeTimer:null,verticalScrollbarStyle:{},horizontalScrollbarStyle:{}}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark})},mounted(){this.setScrollBarWrapSize(),this.$bus.$on("scrollbar_change",this.updateScrollbar),window.addEventListener("resize",this.onResize)},beforeDestroy(){this.$bus.$off("scrollbar_change",this.updateScrollbar),window.removeEventListener("resize",this.onResize)},methods:{setScrollBarWrapSize(){if(!this.mindMap.scrollbar)return;const{width:e}=this.$refs.horizontalScrollbarRef.getBoundingClientRect(),{height:t}=this.$refs.verticalScrollbarRef.getBoundingClientRect();this.mindMap.scrollbar.setScrollBarWrapSize(e,t)},onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.setScrollBarWrapSize()},300)},updateScrollbar({vertical:e,horizontal:t}){this.verticalScrollbarStyle={top:e.top+"%",height:e.height+"%"},this.horizontalScrollbarStyle={left:t.left+"%",width:t.width+"%"}},onVerticalScrollbarMousedown(e){this.mindMap.scrollbar.onMousedown(e,"vertical")},onVerticalScrollbarClick(e){this.mindMap.scrollbar.onClick(e,"vertical")},onHorizontalScrollbarMousedown(e){this.mindMap.scrollbar.onMousedown(e,"horizontal")},onHorizontalScrollbarClick(e){this.mindMap.scrollbar.onClick(e,"horizontal")}}},Xa=Ga,Za=(s("ac10"),Object(m["a"])(Xa,Ka,Ya,!1,null,"301c5ef9",null)),qa=Za.exports,Ja=function(){var e=this,t=e._self._c;return t("Sidebar",{ref:"sidebar",attrs:{title:e.$t("formulaSidebar.title")}},[t("div",{staticClass:"box",class:{isDark:e.isDark}},[t("div",{staticClass:"formulaInputBox"},[t("el-input",{attrs:{rows:4,resize:"none",type:"textarea",placeholder:e.$t("formulaSidebar.placeholder")},nativeOn:{keydown:function(e){e.stopPropagation()}},model:{value:e.formulaText,callback:function(t){e.formulaText=t},expression:"formulaText"}}),t("el-button",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{size:"small"},on:{click:e.confirm}},[e._v(e._s(e.$t("formulaSidebar.confirm")))])],1),t("div",{staticClass:"title"},[e._v(e._s(e.$t("formulaSidebar.common")))]),t("div",{staticClass:"formulaList"},e._l(e.list,(function(s,i){return t("div",{key:i,staticClass:"formulaItem"},[t("div",{staticClass:"overview",domProps:{innerHTML:e._s(s.overview)}}),t("div",{staticClass:"text",on:{click:function(t){e.formulaText=s.text}}},[e._v(" "+e._s(s.text)+" ")])])})),0)])])},Qa=[],eo=(s("be0f"),{name:"FormulaSidebar",components:{Sidebar:Qt},props:{mindMap:{type:Object}},data(){return{formulaText:"",list:[]}},computed:{...Object(W["d"])({activeSidebar:e=>e.activeSidebar,isDark:e=>e.localConfig.isDark,localConfig:e=>e.localConfig})},watch:{activeSidebar(e){this.$refs.sidebar.show="formulaSidebar"===e}},created(){this.$bus.$on("node_active",this.handleNodeActive)},beforeDestroy(){this.$bus.$off("node_active",this.handleNodeActive)},mounted(){this.init()},methods:{...Object(W["c"])(["setActiveSidebar"]),init(){this.list=vs["a"].map(e=>({overview:window.katex.renderToString(e,this.mindMap.formula.getKatexConfig()),text:e}))},handleNodeActive(...e){this.activeNodes=[...e[1]],this.activeNodes.length<=0&&"formulaSidebar"===this.activeSidebar&&this.setActiveSidebar(null)},confirm(){if(!this.localConfig.openNodeRichText)return this.$message.warning(this.$t("formulaSidebar.tip"));let e=this.formulaText.trim();e&&this.mindMap.execCommand("INSERT_FORMULA",e)}}}),to=eo,so=(s("d5f3"),Object(m["a"])(to,Ja,Qa,!1,null,"3171f35e",null)),io=so.exports,ao=function(){var e=this,t=e._self._c;return e.isSourceCodeEdit?t("div",{ref:"sourceCodeEditContainer",staticClass:"sourceCodeEditContainer",class:{isDark:e.isDark}},[t("div",{staticClass:"closeBtn"},[t("el-tooltip",{attrs:{effect:"dark",content:e.$t("sourceCodeEdit.copy"),placement:"top"}},[t("span",{staticClass:"icon iconfont iconfuzhi",staticStyle:{"font-size":"26px"},on:{click:e.copy}})]),t("el-tooltip",{attrs:{effect:"dark",content:e.$t("sourceCodeEdit.format"),placement:"top"}},[t("span",{staticClass:"icon iconfont icongeshihua",staticStyle:{"font-size":"24px"},on:{click:e.format}})]),t("el-tooltip",{attrs:{effect:"dark",content:e.$t("sourceCodeEdit.sourceCodeTip"),placement:"top"}},[t("span",{staticClass:"icon el-icon-info"})]),t("el-tooltip",{attrs:{effect:"dark",content:e.$t("sourceCodeEdit.confirm"),placement:"top"}},[t("span",{staticClass:"icon el-icon-circle-check",on:{click:e.onConfirm}})]),t("el-tooltip",{attrs:{effect:"dark",content:e.$t("sourceCodeEdit.close"),placement:"top"}},[t("span",{staticClass:"icon iconfont iconguanbi",on:{click:e.onClose}})])],1),t("div",{staticClass:"sourceCodeEditBox"},[t("div",{ref:"outlineEditRef",staticClass:"outlineEdit",on:{keydown:function(e){e.stopPropagation()}}})])]):e._e()},oo=[],no=s("56b3"),ro=s.n(no);s("f9d4"),s("a7be");let lo=null;var co={name:"SourceCodeEdit",props:{mindMap:{type:Object}},data(){return{}},computed:{...Object(W["d"])({isReadonly:e=>e.isReadonly,isDark:e=>e.localConfig.isDark,isSourceCodeEdit:e=>e.isSourceCodeEdit})},watch:{isSourceCodeEdit(e){e&&this.$nextTick(()=>{document.body.appendChild(this.$refs.sourceCodeEditContainer),this.initEditor(),this.initData()})}},methods:{...Object(W["c"])(["setIsSourceCodeEdit"]),initEditor(){lo=ro()(this.$refs.outlineEditRef,{mode:{name:"javascript",json:!0},lineWrapping:!0,lineNumbers:!0})},initData(){lo.setValue(JSON.stringify(this.mindMap.getData(),null,2))},onConfirm(){try{const e=lo.getValue(),t=JSON.parse(e);this.setIsSourceCodeEdit(!1),this.$bus.$emit("setData",t)}catch(e){console.log(e),this.$message.error(this.$t("sourceCodeEdit.formatErrorTip"))}},onClose(){this.setIsSourceCodeEdit(!1)},copy(){const e=lo.getValue();Object(te["a"])(e),this.$message.success(this.$t("sourceCodeEdit.copyTip"))},format(){try{const e=lo.getValue(),t=JSON.parse(e);lo.setValue(JSON.stringify(t,null,2)),this.$message.success(this.$t("sourceCodeEdit.formatTip"))}catch(e){console.log(e),this.$message.error(this.$t("sourceCodeEdit.formatErrorTip"))}}}},ho=co,uo=(s("518d"),Object(m["a"])(ho,ao,oo,!1,null,"261f5f85",null)),mo=uo.exports,po=function(){var e=this,t=e._self._c;return t("div",{staticClass:"nodeAttachmentContextMenu",style:{left:this.left+"px",top:this.top+"px",visibility:e.show?"visible":"hidden"},on:{click:function(t){return t.stopPropagation(),e.deleteAttachment.apply(null,arguments)}}},[t("div",{staticClass:"menuItem"},[e._v(e._s(e.$t("attachment.deleteAttachment")))])])},go=[],fo={props:{mindMap:{type:Object,default(){return null}}},data(){return{show:!1,left:0,top:0,node:null,icon:null}},created(){this.$bus.$on("node_attachmentClick",this.onNodeAttachmentClick),this.$bus.$on("selectAttachment",this.onSelectAttachment),this.$bus.$on("node_attachmentContextmenu",this.onNodeAttachmentContextmenu),this.$bus.$on("hide",this.hide),document.body.addEventListener("click",this.hide),this.$bus.$on("node_active",this.hide),this.$bus.$on("scale",this.onScale),this.$bus.$on("translate",this.onScale),this.$bus.$on("svg_mousedown",this.hide)},beforeDestroy(){this.$bus.$off("node_attachmentClick",this.onNodeAttachmentClick),this.$bus.$off("selectAttachment",this.onSelectAttachment),this.$bus.$off("node_attachmentContextmenu",this.onNodeAttachmentContextmenu),this.$bus.$off("hide",this.hide),document.body.removeEventListener("click",this.hide),this.$bus.$off("node_active",this.hide),this.$bus.$off("scale",this.onScale),this.$bus.$off("translate",this.onScale),this.$bus.$off("svg_mousedown",this.hide)},methods:{onSelectAttachment(e){},onNodeAttachmentClick(e,t,s){this.$message.info(this.$t("attachment.tip"))},onNodeAttachmentContextmenu(e,t,s){t.stopPropagation(),t.preventDefault(),this.node=e,this.icon=s,this.updatePosition(),this.show=!0},updatePosition(){const e=this.mindMap.themeConfig.iconSize,{x:t,y:s}=this.icon.rbox();this.left=t+e,this.top=s},onScale(){this.node&&this.show&&this.updatePosition()},deleteAttachment(){this.node&&this.show&&(this.node.setAttachment("",""),this.hide())},hide(){this.show=!1}}},bo=fo,vo=(s("e387"),Object(m["a"])(bo,po,go,!1,null,"49bf43bc",null)),Co=vo.exports,wo=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"elRef",staticClass:"nodeOuterFrameContainer",class:{isDark:e.isDark},style:e.position},[t("div",{staticClass:"btn",on:{click:function(t){e.showPanel=!e.showPanel}}},[t("span",{staticClass:"iconfont iconjingzi"})]),e.showPanel?t("div",{staticClass:"panel"},[t("div",{staticClass:"panelHeader"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("nodeOuterFrame.outerFrameSetting")))]),t("span",{staticClass:"deleteBtn",on:{click:e.deleteOuterFrame}},[e._v(" "+e._s(e.$t("nodeOuterFrame.deleteOuterFrame"))+" "),t("span",{staticClass:"iconfont iconshanchu"})])]),t("div",{staticClass:"panelBody"},[t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("nodeOuterFrame.boxStyle")))]),t("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.updateOuterFrame("strokeWidth",t)}},model:{value:e.styleConfig.strokeWidth,callback:function(t){e.$set(e.styleConfig,"strokeWidth",t)},expression:"styleConfig.strokeWidth"}},e._l(e.lineWidthList,(function(s){return t("el-option",{key:s,attrs:{label:s,value:s}},[s>0?t("span",{staticClass:"borderLine",class:{isDark:e.isDark},style:{height:s+"px"}}):e._e()])})),1),t("el-select",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:"mini",placeholder:""},on:{change:t=>{e.updateOuterFrame("strokeDasharray",t)}},model:{value:e.styleConfig.strokeDasharray,callback:function(t){e.$set(e.styleConfig,"strokeDasharray",t)},expression:"styleConfig.strokeDasharray"}},e._l(e.borderDasharrayList,(function(s){return t("el-option",{key:s.value,attrs:{label:s.name,value:s.value}},[t("svg",{attrs:{width:"120",height:"34"}},[t("line",{attrs:{x1:"10",y1:"17",x2:"110",y2:"17","stroke-width":"2",stroke:e.styleConfig.strokeDasharray===s.value?"#409eff":e.isDark?"#fff":"#000","stroke-dasharray":s.value}})])])})),1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("nodeOuterFrame.boxColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"block",style:{backgroundColor:e.styleConfig.strokeColor}}),t("el-popover",{ref:"popover",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.styleConfig.strokeColor},on:{change:t=>{e.updateOuterFrame("strokeColor",t)}}})],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"rowItem"},[t("span",{staticClass:"name"},[e._v(e._s(e.$t("nodeOuterFrame.fillColor")))]),t("span",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"block",style:{backgroundColor:e.styleConfig.fill}}),t("el-popover",{ref:"popover2",attrs:{placement:"bottom",trigger:"click"}},[t("Color",{attrs:{color:e.styleConfig.fill},on:{change:t=>{e.updateOuterFrame("fill",t)}}})],1)],1)])])]):e._e()])},yo=[],_o={components:{Color:we},props:{mindMap:{type:Object}},data(){return{lineWidthList:K["o"],show:!1,showPanel:!1,position:{left:0,top:0},styleConfig:{radius:5,strokeWidth:2,strokeColor:"#0984e3",strokeDasharray:"5,5",fill:"rgba(9,132,227,0.05)"}}},computed:{...Object(W["d"])({isDark:e=>e.localConfig.isDark,borderDasharrayList(){return K["d"][this.$i18n.locale]||K["d"].zh}})},created(){this.mindMap.on("outer_frame_active",this.onOuterFrameActive),this.mindMap.on("scale",this.hide),this.mindMap.on("translate",this.hide),this.mindMap.on("svg_mousedown",this.hide),this.mindMap.on("expand_btn_click",this.hide),this.mindMap.on("outer_frame_delete",this.hide)},beforeDestroy(){this.mindMap.off("outer_frame_active",this.onOuterFrameActive),this.mindMap.off("scale",this.hide),this.mindMap.off("translate",this.hide),this.mindMap.off("svg_mousedown",this.hide),this.mindMap.off("expand_btn_click",this.hide),this.mindMap.off("outer_frame_delete",this.hide)},mounted(){document.body.appendChild(this.$refs.elRef)},methods:{onOuterFrameActive(e,t,s){const i=t.children[s[0]],a=i.getData("outerFrame");Object.keys(a).forEach(e=>{this.styleConfig[e]=a[e]});const{x:o,y:n,width:r}=e.rbox();this.position.left=o+r+"px",this.position.top=n+"px",this.show=!0},updateOuterFrame(e,t){this.styleConfig[e]=t,this.mindMap.outerFrame.updateActiveOuterFrame({[e]:t}),this.hide()},deleteOuterFrame(){this.mindMap.outerFrame.removeActiveOuterFrame()},hide(){this.show=!1,this.showPanel=!1}}},ko=_o,xo=(s("8e5d"),s("d473"),Object(m["a"])(ko,wo,yo,!1,null,"3d37fbd4",null)),So=xo.exports,$o=s("2ef0");St["a"].usePlugin($t["a"]).usePlugin(Dt["a"]).usePlugin(Lt["a"]).usePlugin(Tt["a"]).usePlugin(Nt["a"]).usePlugin(It["a"]).usePlugin(Mt["a"]).usePlugin(Ot["a"]).usePlugin(At["a"]).usePlugin(Ft["a"]).usePlugin(Pt["a"]).usePlugin(jt["a"]).usePlugin(Rt["a"]).usePlugin(Bt["a"]).usePlugin(Vt["a"]).usePlugin(Ut["a"]).usePlugin(Ht["a"]).usePlugin(Wt["a"]),$s["a"].forEach(e=>{St["a"].defineTheme(e.value,e.theme)});var Do={name:"Edit",components:{OutlineSidebar:cs,Style:gs,BaseStyle:_s,Theme:Is,Structure:Ps,Count:Us,NavigatorToolbar:wi,ShortcutKey:$i,Contextmenu:Ei,RichTextToolbar:zi,NodeNoteContentShow:Gi,Navigator:ea,NodeImgPreview:na,SidebarTrigger:ua,Search:ka,NodeIconSidebar:Ia,NodeIconToolbar:Fa,OutlineEdit:Ua,Scrollbar:qa,FormulaSidebar:io,SourceCodeEdit:mo,NodeAttachment:Co,NodeOuterFrame:So},data(){return{enableShowLoading:!0,mindMap:null,mindMapData:null,prevImg:"",storeConfigTimer:null,showDragMask:!1,loading:!1}},computed:{...Object(W["d"])({isZenMode:e=>e.localConfig.isZenMode,openNodeRichText:e=>e.localConfig.openNodeRichText,isShowScrollbar:e=>e.localConfig.isShowScrollbar,useLeftKeySelectionRightKeyDrag:e=>e.localConfig.useLeftKeySelectionRightKeyDrag,isUseHandDrawnLikeStyle:e=>e.localConfig.isUseHandDrawnLikeStyle,extraTextOnExport:e=>e.extraTextOnExport})},watch:{openNodeRichText(){this.openNodeRichText?this.addRichTextPlugin():this.removeRichTextPlugin()},isShowScrollbar(){this.isShowScrollbar?this.addScrollbarPlugin():this.removeScrollbarPlugin()},isUseHandDrawnLikeStyle(){this.isUseHandDrawnLikeStyle?this.addHandDrawnLikeStylePlugin():this.removeHandDrawnLikeStylePlugin()}},mounted(){Object(Ha["b"])(),this.getData(),this.$bus.$on("execCommand",this.execCommand),this.$bus.$on("paddingChange",this.onPaddingChange),this.$bus.$on("export",this.export),this.$bus.$on("setData",this.setData),this.$bus.$on("startTextEdit",this.handleStartTextEdit),this.$bus.$on("endTextEdit",this.handleEndTextEdit),this.$bus.$on("createAssociativeLine",this.handleCreateLineFromActiveNode),this.$bus.$on("startPainter",this.handleStartPainter),this.$bus.$on("node_tree_render_end",this.handleHideLoading),this.$bus.$on("showLoading",this.handleShowLoading),window.addEventListener("resize",this.handleResize);let e=this;je["a"].$on("demo",(function(t){e.casereadonly(t)}))},beforeDestroy(){this.$bus.$off("execCommand",this.execCommand),this.$bus.$off("paddingChange",this.onPaddingChange),this.$bus.$off("export",this.export),this.$bus.$off("setData",this.setData),this.$bus.$off("startTextEdit",this.handleStartTextEdit),this.$bus.$off("endTextEdit",this.handleEndTextEdit),this.$bus.$off("createAssociativeLine",this.handleCreateLineFromActiveNode),this.$bus.$off("startPainter",this.handleStartPainter),this.$bus.$off("node_tree_render_end",this.handleHideLoading),this.$bus.$off("showLoading",this.handleShowLoading),window.removeEventListener("resize",this.handleResize),this.mindMap.destroy()},methods:{casereadonly(e){this.mindMap.setMode(e)},updateCaseMindmapThrottled:Object($o["throttle"])((async function(e){try{if(window.sessionStorage.getItem("caseid")){let t=await Object(de["i"])({content:e,caseid:window.sessionStorage.getItem("caseid"),name:window.sessionStorage.getItem("name"),treename:window.sessionStorage.getItem("treename"),type:"",switch:""});t.success}}catch(t){}}),6e4),handleStartTextEdit(){this.mindMap.renderer.startTextEdit()},handleEndTextEdit(){this.mindMap.renderer.endTextEdit()},handleCreateLineFromActiveNode(){this.mindMap.associativeLine.createLineFromActiveNode()},handleStartPainter(){this.mindMap.painter.startPainter()},handleResize(){this.mindMap.resize()},handleShowLoading(){this.enableShowLoading=!0,Object(Ha["b"])()},handleHideLoading(){this.enableShowLoading&&(this.enableShowLoading=!1,Object(Ha["a"])())},getData(){if("import"==window.sessionStorage.getItem("import")||"rehome"==window.sessionStorage.getItem("rehome")){let e=Object(de["a"])();this.mindMapData=e,this.init(),window.sessionStorage.removeItem("import"),window.sessionStorage.removeItem("rehome")}else{Object(ie["d"])({caseid:sessionStorage.getItem("caseid"),latest:!0}).then(e=>{if(e.success)this.mindMapData=JSON.parse(e.content),window.sessionStorage.setItem("switch",e.switch),this.init(),"delete"==window.sessionStorage.getItem("delete")?this.mindMap.setMode("readonly"):"True"==window.sessionStorage.getItem("switch")||"False"==window.sessionStorage.getItem("switch")&&window.sessionStorage.getItem("creter")==window.sessionStorage.getItem("username")?this.mindMap.setMode("edit"):"False"==window.sessionStorage.getItem("switch")&&window.sessionStorage.getItem("creter")!=window.sessionStorage.getItem("username")&&this.mindMap.setMode("readonly");else{let e=Object(de["a"])();this.mindMapData=e,this.init(),window.sessionStorage.removeItem("import")}}).catch(e=>{let t=Object(de["a"])();this.mindMapData=t,this.init(),window.sessionStorage.removeItem("import"),window.sessionStorage.setItem("delete","delete"),"delete"==window.sessionStorage.getItem("delete")&&this.mindMap.setMode("readonly")})}},bindSaveEvent(){this.$bus.$on("data_change",e=>{Object(de["f"])(e),this.updateCaseMindmapThrottled(window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA"))}),this.$bus.$on("view_data_change",e=>{clearTimeout(this.storeConfigTimer),this.storeConfigTimer=setTimeout(()=>{Object(de["e"])({view:e}),"delete"==window.sessionStorage.getItem("delete")&&this.mindMap.setMode("readonly")},300)})},manualSave(){let e=this.mindMap.getData(!0);Object(de["e"])(e)},async saveLocalFile(){Object(ie["m"])({content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA"),caseid:window.sessionStorage.getItem("caseid"),name:window.sessionStorage.getItem("name")}).then(e=>{e.success?this.$notify({title:"成功",message:"保存成功",type:"success",position:"top-left"}):"9900"==e.code?(window.sessionStorage.setItem("delete","delete"),this.$confirm("该用例已被删除！！！，不可读写，请建新用例，是否新建？","温馨提示",{distinguishCancelAndClose:!0,confirmButtonText:"新建",cancelButtonText:"关闭",type:"error"}).then(()=>{this.$bus.$emit("showAddcase")}).catch(e=>{this.$message({type:"info",message:"关闭新建"})})):this.$confirm("该用例创建人设置仅读，不可读写，你可以在该基础上点击复制，系统则为你复制一份属于你的用例，是否复制？","温馨提示",{distinguishCancelAndClose:!0,confirmButtonText:"复制",cancelButtonText:"放弃复制",type:"success"}).then(()=>{this.copyLocalFile()}).catch(e=>{this.$message({type:"info",message:"放弃复制"})})}).catch(e=>{this.$message.error("保存失败")})},async copyLocalFile(){var e="TMIND"+Date.now();Object(ie["f"])({copyid:e,caseid:window.sessionStorage.getItem("caseid"),content:window.sessionStorage.getItem("SIMPLE_MIND_MAP_DATA")}).then(e=>{this.$message.success("复制成功，请在用例管理打开~")}).catch(e=>{})},init(){let e=this.hasFileURL(),{root:t,layout:i,theme:a,view:o,config:n}=this.mindMapData;e&&(t={data:{text:this.$t("edit.root")},children:[]},i=ce["a"].layout,a=ce["a"].theme,o=null),this.mindMap=new St["a"]({el:this.$refs.mindMapContainer,data:t,fit:!1,layout:i,theme:a.template,themeConfig:a.config,viewData:o,nodeTextEditZIndex:1e3,nodeNoteTooltipZIndex:1e3,customNoteContentShow:{show:(e,t,s,i)=>{this.$bus.$emit("showNoteContent",e,t,s,i)},hide:()=>{}},...n||{},iconList:[...S["a"]],useLeftKeySelectionRightKeyDrag:this.useLeftKeySelectionRightKeyDrag,customInnerElsAppendTo:null,enableAutoEnterTextEditWhenKeydown:!0,customHandleClipboardText:Wa["a"],defaultNodeImage:s("24d1"),initRootNodePosition:["center","center"],handleIsSplitByWrapOnPasteCreateNewNode:()=>this.$confirm(this.$t("edit.splitByWrap"),this.$t("edit.tip"),{confirmButtonText:this.$t("edit.yes"),cancelButtonText:this.$t("edit.no"),type:"warning"}),errorHandler:(e,t)=>{switch(console.error(t),e){case"export_error":this.$message.error(this.$t("edit.exportError"));break;default:break}},addContentToFooter:()=>{const e=this.extraTextOnExport.trim();if(!e)return null;const t=document.createElement("div");t.className="footer",t.innerHTML=e;const s="\n\t            .footer {\n\t              width: 100%;\n\t              height: 30px;\n\t              display: flex;\n\t              justify-content: center;\n\t              align-items: center;\n\t              font-size: 12px;\n\t              color: #979797;\n\t            }\n\t          ";return{el:t,cssText:s,height:30}}}),this.openNodeRichText&&this.addRichTextPlugin(),this.isShowScrollbar&&this.addScrollbarPlugin(),this.isUseHandDrawnLikeStyle&&this.addHandDrawnLikeStylePlugin(),this.mindMap.keyCommand.addShortcut("Control+s",()=>{this.manualSave(),this.saveLocalFile()}),["node_active","data_change","view_data_change","back_forward","node_contextmenu","node_click","draw_click","expand_btn_click","svg_mousedown","mouseup","mode_change","node_tree_render_end","rich_text_selection_change","transforming-dom-to-images","generalization_node_contextmenu","painter_start","painter_end","scrollbar_change","scale","translate","node_attachmentClick","node_attachmentContextmenu","demonstrate_jump","exit_demonstrate"].forEach(e=>{this.mindMap.on(e,(...t)=>{this.$bus.$emit(e,...t)})}),this.bindSaveEvent(),this.testDynamicCreateNodes(),window.takeOverApp&&this.$bus.$emit("app_inited",this.mindMap),e&&this.$bus.$emit("handle_file_url"),this.cooperateTest()},hasFileURL(){const e=this.$route.query.fileURL;return!!e&&/\.(smm|json|xmind|md|xlsx)$/.test(e)},setData(e){this.handleShowLoading(),e.root?this.mindMap.setFullData(e):this.mindMap.setData(e),this.mindMap.view.reset(),this.manualSave()},reRender(){this.mindMap.reRender()},execCommand(...e){this.mindMap.execCommand(...e)},async export(...e){try{Object(Ha["b"])(),await this.mindMap.export(...e),Object(Ha["a"])()}catch(t){console.log(t),Object(Ha["a"])()}},onPaddingChange(e){this.mindMap.updateConfig(e)},showNewFeatureInfo(){let e=sessionStorage.getItem("SIMPLE_MIND_MAP_NEW_FEATURE_TIP_1");e||this.$notify.info({title:this.$t("edit.newFeatureNoticeTitle"),message:this.$t("edit.newFeatureNoticeMessage"),duration:0,onClose:()=>{sessionStorage.setItem("SIMPLE_MIND_MAP_NEW_FEATURE_TIP_1",!0)}})},addRichTextPlugin(){this.mindMap&&this.mindMap.addPlugin(Et["a"])},removeRichTextPlugin(){this.mindMap.removePlugin(Et["a"])},addScrollbarPlugin(){this.mindMap&&this.mindMap.addPlugin(zt["a"])},removeScrollbarPlugin(){this.mindMap.removePlugin(zt["a"])},addHandDrawnLikeStylePlugin(){try{if(!this.mindMap)return;this.mindMap.addPlugin(HandDrawnLikeStyle),this.mindMap.reRender()}catch(e){console.log("手绘风格插件不存在")}},removeHandDrawnLikeStylePlugin(){try{this.mindMap.removePlugin(HandDrawnLikeStyle),this.mindMap.reRender()}catch(e){console.log("手绘风格插件不存在")}},testDynamicCreateNodes(){setTimeout(()=>{},5e3)},cooperateTest(){this.mindMap.cooperate&&window.sessionStorage.getItem("caseid")&&(this.mindMap.cooperate.setProvider(null,{roomName:window.sessionStorage.getItem("caseid"),signalingList:["ws://139.9.196.188:8086"]}),this.mindMap.cooperate.setUserInfo({id:Math.random(),name:window.sessionStorage.getItem("username"),color:["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"][Math.floor(5*Math.random())],avatar:(Math.random(),"")}),this.mindMap.cooperate.userInfo&&(console.log("当前房间名："+this.mindMap.cooperate.provider.roomName),console.log("当前协同人："+this.mindMap.cooperate.userInfo.name),console.log("当前协同用例："+window.sessionStorage.getItem("name"))))},onDragenter(){this.showDragMask=!0},onDragleave(){this.showDragMask=!1},onDrop(e){this.showDragMask=!1;const t=e.dataTransfer,s=t.files&&t.files[0];this.$bus.$emit("importFile",s)}}},To=Do,No=(s("2fe6"),Object(m["a"])(To,kt,xt,!1,null,"95d2242a",null)),Io=No.exports,Mo={name:"Index",components:{Toolbar:_t,Edit:Io},data(){return{show:!1}},computed:{...Object(W["d"])({isZenMode:e=>e.localConfig.isZenMode,isDark:e=>e.localConfig.isDark,activeSidebar:e=>e.activeSidebar})},watch:{isDark(){this.setBodyDark()}},async created(){this.initLocalConfig();const e=this.$loading({lock:!0,text:this.$t("other.loading")});await this.getUserMindMapData(),this.show=!0,e.close(),this.setBodyDark()},methods:{...Object(W["b"])(["getUserMindMapData"]),...Object(W["c"])(["setLocalConfig"]),initLocalConfig(){let e=Object(de["d"])();e&&this.setLocalConfig({...this.$store.state.localConfig,...e})},setBodyDark(){this.isDark?document.body.classList.add("isDark"):document.body.classList.remove("isDark")}}},Lo=Mo,Oo=(s("e1cc"),Object(m["a"])(Lo,i,a,!1,null,null,null));t["default"]=Oo.exports},"5ff0":function(e,t,s){},"655a":function(e,t,s){"use strict";s("ae68")},"6a66":function(e,t,s){"use strict";var i=s("2b0e");t["a"]=new i["default"]},"6a87":function(e,t,s){"use strict";var i=function(){var e=this,t=e._self._c;return t("span",{staticClass:"tree-expand"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.DATA.isEdit,expression:"DATA.isEdit"}],staticClass:"tree-label"},[t("el-input",{ref:"treeInput"+e.DATA.id,staticClass:"edit",attrs:{size:"mini",autofocus:""},on:{blur:function(t){return t.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE)}},nativeOn:{click:function(t){return t.stopPropagation(),e.nodeEditFocus.apply(null,arguments)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.nodeEditPass(e.STORE,e.DATA,e.NODE))}},model:{value:e.DATA.name,callback:function(t){e.$set(e.DATA,"name",t)},expression:"DATA.name"}})],1),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],class:[e.DATA.id>e.maxexpandId?"tree-new tree-label":"tree-label"]},[t("span",[e._v(e._s(e.DATA.name))])]),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.DATA.isEdit,expression:"!DATA.isEdit"}],staticClass:"tree-btn"},[t("i",{staticClass:"el-icon-plus",on:{click:function(t){return t.stopPropagation(),e.nodeAdd(e.STORE,e.DATA,e.NODE)}}}),t("i",{staticClass:"el-icon-edit",on:{click:function(t){return t.stopPropagation(),e.nodeEdit(e.STORE,e.DATA,e.NODE)}}}),t("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.nodeDel(e.STORE,e.DATA,e.NODE)}}})])])},a=[],o={name:"treeExpand",props:["NODE","DATA","STORE","maxexpandId"],methods:{nodeAdd(e,t,s){this.$emit("nodeAdd",e,t,s)},nodeEdit(e,t,s){t.isEdit=!0,this.$nextTick(()=>{this.$refs["treeInput"+t.id].$refs.input.focus()}),this.$emit("nodeEdit",e,t,s)},nodeDel(e,t,s){this.$emit("nodeDel",e,t,s)},nodeEditPass(e,t,s){t.isEdit=!1},nodeEditFocus(){}}},n=o,r=(s("7a58"),s("2877")),l=Object(r["a"])(n,i,a,!1,null,null,null);t["a"]=l.exports},"6b7a":function(e,t,s){},"75a1":function(e,t,s){"use strict";s("cb83")},"75a5":function(e,t,s){"use strict";s("a72a")},"7a58":function(e,t,s){"use strict";s("9598")},"7d00":function(e,t,s){"use strict";s("f6ae")},"7fbf":function(e,t,s){"use strict";s.d(t,"j",(function(){return a})),s.d(t,"n",(function(){return o})),s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return r})),s.d(t,"i",(function(){return l})),s.d(t,"m",(function(){return c})),s.d(t,"f",(function(){return d})),s.d(t,"g",(function(){return h})),s.d(t,"h",(function(){return u})),s.d(t,"o",(function(){return m})),s.d(t,"c",(function(){return p})),s.d(t,"d",(function(){return g})),s.d(t,"l",(function(){return f})),s.d(t,"k",(function(){return b})),s.d(t,"p",(function(){return v})),s.d(t,"b",(function(){return C}));var i=s("0d5e");function a(e){return Object(i["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(i["a"])({url:"tree/casemindmaplist/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function n(e){return Object(i["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function r(e){return Object(i["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function l(e){return Object(i["a"])({url:"casemindmap/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function c(e){return Object(i["a"])({url:"saveCaseMindMap/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function d(e){return Object(i["a"])({url:"copyCaseMindMap/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function h(e){return Object(i["a"])({url:"copyIdCaseMindMap/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function u(e){return Object(i["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"delete",data:e})}function m(e){return Object(i["a"])({url:"casemindmaplist/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function p(e){return Object(i["a"])({url:"auth/casemindmaplist/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function g(e){return Object(i["a"])({url:"caseMindMapData/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function f(e){return Object(i["a"])({url:"recentUseCases/?token="+sessionStorage.getItem("token"),method:"post",data:e})}function b(e){return Object(i["a"])({url:"historicalMimdMap/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function v(e){return Object(i["a"])({url:"zenTao/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function C(e){return Object(i["a"])({url:"zenTao/?token="+sessionStorage.getItem("token"),method:"post",data:e})}},"80dc":function(e,t,s){"use strict";s("2ab1")},8179:function(e,t,s){"use strict";s("6b7a")},8470:function(e,t,s){"use strict";s("19d3")},"86b4":function(e,t,s){"use strict";s("a373")},"88d4":function(e,t,s){"use strict";s("4fd8")},"89c2":function(e,t,s){"use strict";t["a"]={maxexpandId:1e5,treelist:[{id:34,name:"格力电商",ProSort:34,remark:"格力电商",pid:"",isEdit:!1,children:[{id:82,name:"测试组",pid:34,remark:"",isEdit:!1,children:[]},{id:95,name:"开发组",pid:34,remark:"",isEdit:!1,children:[]}]}]}},"8abd":function(e,t,s){"use strict";s("d070")},"8b82":function(e,t,s){},"8b93":function(e,t,s){"use strict";s("3b78")},"8e5d":function(e,t,s){"use strict";s("8b82")},"90a8":function(e,t,s){"use strict";s("5be0")},9147:function(e,t,s){"use strict";s("cc4f")},"91b9":function(e,t,s){"use strict";s("162f")},"93e1":function(e,t,s){"use strict";s("f369")},9566:function(e,t,s){"use strict";s("49ec")},9581:function(e,t,s){},9598:function(e,t,s){},"9c3c":function(e,t,s){},"9fb9":function(e,t,s){"use strict";s("e801")},a11a:function(e,t,s){},a373:function(e,t,s){},a72a:function(e,t,s){},a8d5:function(e,t,s){},a9d3:function(e,t,s){"use strict";s("4ba6")},aabe:function(e,t,s){},aad6:function(e,t,s){"use strict";s("b40c")},ac10:function(e,t,s){"use strict";s("57e0")},ae68:function(e,t,s){},af1e:function(e,t,s){},b0ae:function(e,t,s){"use strict";s("5ff0")},b189:function(e,t,s){"use strict";s("a11a")},b40c:function(e,t,s){},b4f6:function(e,t,s){"use strict";s("0fd4")},bbc4:function(e,t,s){"use strict";s("200a")},bdb6:function(e,t,s){},beaa:function(e,t,s){"use strict";s("aabe")},c100:function(e,t,s){},c24f:function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return n})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return c}));var i=s("0d5e");function a(e){return Object(i["a"])({url:"login/",method:"post",data:e})}function o(e){return Object(i["a"])({url:"register/",method:"post",data:e})}function n(e){return Object(i["a"])({url:"userInfo/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function r(e){return Object(i["a"])({url:"userInfo/?token="+sessionStorage.getItem("token"),method:"patch",data:e})}function l(e){return Object(i["a"])({url:"user/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function c(e){return Object(i["a"])({url:"user/?token="+sessionStorage.getItem("token"),method:"post",data:e})}},cb83:function(e,t,s){},cbae:function(e,t,s){},cc4f:function(e,t,s){},cd04:function(e,t,s){"use strict";s("3b05")},d070:function(e,t,s){},d2a9:function(e,t,s){},d473:function(e,t,s){"use strict";s("bdb6")},d4bd:function(e,t,s){"use strict";s("af1e")},d513:function(e,t,s){"use strict";s("f4f8")},d5f3:function(e,t,s){"use strict";s("080b")},d72f:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return n}));var i=s("0d5e");function a(e){return Object(i["a"])({url:"casetree/?token="+sessionStorage.getItem("token"),method:"get",params:e})}function o(e){return Object(i["a"])({url:"casetree/?id="+e.id+"&token="+sessionStorage.getItem("token"),method:"patch",data:e})}function n(e){return Object(i["a"])({url:"updatesingle/?token="+sessionStorage.getItem("token"),method:"post",data:e})}},db39:function(e,t,s){"use strict";s("40b0")},dc19:function(e,t,s){},df77:function(e,t,s){},dfc2:function(e,t,s){"use strict";s("c100")},e1cc:function(e,t,s){"use strict";s("9581")},e387:function(e,t,s){"use strict";s("a8d5")},e3a0:function(e,t,s){"use strict";s("df77")},e801:function(e,t,s){},efd7:function(e,t,s){"use strict";s("2820")},f0de:function(e,t,s){"use strict";s("5e0c")},f1b8:function(e,t,s){},f1f2:function(e,t,s){"use strict";s("dc19")},f369:function(e,t,s){},f4f8:function(e,t,s){},f6ae:function(e,t,s){},f716:function(e,t,s){"use strict";s("3870")},fd68:function(e,t,s){"use strict";s("d2a9")}}]);